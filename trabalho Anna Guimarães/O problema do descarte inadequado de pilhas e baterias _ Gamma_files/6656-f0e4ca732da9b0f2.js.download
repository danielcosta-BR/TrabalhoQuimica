"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6656],{21979:function(e,t,r){r.d(t,{I:function(){return g}});var n=r(52322),i=r(26284),a=r(70065),o=r(24772),l=r(62614),s=r(85573),c=r(43297),d=r(74105),u=r(20816),p=r(5879),m=r(2784);let g=e=>{let{url:t,placeholder:r,isDisabled:g=!1,variant:h="plain",customLabel:f,onClick:x,...b}=e,[v,j]=(0,m.useState)(!1),{hasCopied:y,onCopy:w}=(0,i.V)(t),C=(0,m.useRef)(null),A=(0,a.p)(),k="link-copied-toast",_=(0,o.S)({base:!0,sm:!1},{fallback:"sm"});(0,m.useEffect)(()=>{C.current&&v&&(C.current.focus(),C.current.select())},[v]);let S=(0,m.useCallback)(()=>j(!0),[]),I=(0,m.useCallback)(()=>j(!1),[]),E=(0,m.useCallback)(()=>{w(),A.isActive(k)||A({id:k,title:(0,n.jsx)(p.cC,{id:"pQjjYo"}),status:"success",duration:5e3}),null==x||x()},[w,A]),U=f||(0,n.jsx)(p.cC,{id:"he3ygx"}),R=!!(_&&void 0!==f),P=(0,n.jsx)(l.z,{isDisabled:g,onClick:E,variant:h,w:"100%",...R?{}:{height:"2rem",margin:2},...g?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:y?(0,n.jsx)(p.cC,{id:"6V3Ea3"}):U}),T=(0,n.jsx)(s.I,{ref:C,type:"text",variant:"filled",value:t,isReadOnly:!0,isDisabled:g,placeholder:r||void 0,onClick:S,onBlur:I,pointerEvents:g?"none":void 0,h:"3rem",...b});return R?(0,n.jsxs)(c.K,{w:"100%",children:[T,P]}):(0,n.jsxs)(d.B,{children:[T,(0,n.jsx)(u.x,{h:"3rem",zIndex:1,w:"unset",children:P})]})}},11355:function(e,t,r){r.d(t,{o:function(){return l}});var n=r(52322),i=r(29494),a=r(2784),o=r(93441);let l=(0,a.forwardRef)((e,t)=>{let{initialHeight:r="1em",onChange:l,...s}=e,c=(0,a.useCallback)(()=>{"function"!=typeof t&&(null==t?void 0:t.current)&&(t.current.style.height=r,t.current.style.height="".concat(t.current.scrollHeight,"px"))},[r,t]);(0,a.useEffect)(()=>{c()},[c]),(0,a.useEffect)(()=>{c()},[c,s.value]);let d=(0,o.lz)(100);return(0,a.useEffect)(()=>{d&&c()},[d,c]),(0,n.jsx)(i.g,{h:r,minH:r,ref:t,resize:"none",overflow:"hidden",...s,onChange:e=>{c(),null==l||l(e)}})});l.displayName="ResizingTextarea"},21156:function(e,t,r){r.d(t,{V:function(){return a}});var n=r(93202),i=r(89918);class a extends i.j{getSystemChatMessage(e){return{role:n.XaP.System,operation:this.systemPromptOperation,variables:e}}getUserChatMessage(e){return{role:n.XaP.User,operation:this.userPromptOperation,variables:e}}constructor({variables:e,systemPromptOperation:t,userPromptOperation:r,params:n}){super({params:n}),this.variables=e,this.systemPromptOperation=t,this.userPromptOperation=r}}},89918:function(e,t,r){r.d(t,{j:function(){return a}});var n=r(93202);let i={model:"gpt-3.5-turbo-1106",provider:n.nyn.Azure};class a{prepare(e){let{variables:t,history:r=[],params:n}=e,i=this.getSystemChatMessage(t),a=this.getUserChatMessage(t);return{messages:[i,...r,a],params:{...this.params,...n}}}constructor({params:e}){this.params={...i,...e}}}},77787:function(e,t,r){r.d(t,{c:function(){return o}});var n=r(72338),i=r(30764),a=r(396);let o=(e,t)=>{let r=l(e),n=i.HY.from(t),o=r.serializeFragment(n),s=(0,a.S)(o),c=document.createElement("div");c.appendChild(s);let d=c.innerHTML;return d},l=e=>{let{schema:t,extensionManager:r}=e;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;let a=i.PW.marksFromSchema(t),o=i.PW.nodesFromSchema(t),l=e.extensionManager.attributes;r.extensions.forEach(e=>{if(!e.config.renderHTMLforAI)return;let t=l.filter(t=>t.type===e.name);o[e.name]&&(o[e.name]=r=>{let i=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:i})}),a[e.name]&&(a[e.name]=(r,i)=>{let a=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:i,HTMLAttributes:a})})});let s=new i.PW(o,a);return t.cached.aiDomSerializer=s,s}},9231:function(e,t,r){r.d(t,{T1:function(){return n},VG:function(){return a},Vh:function(){return o},rm:function(){return i}});class n extends Error{constructor(e,t){super(e),this.name="StreamError",this.code="stream_error",t&&(this.code=t)}}class i extends n{constructor(e){super(e),this.name="StreamTimeoutError",this.code="timeout"}}class a extends n{constructor(e){super(e),this.name="StreamOnOpenError",this.code="on_open"}}class o extends n{constructor(e){super(e),this.name="StreamUnexpectedCloseError",this.code="unexpected_close"}}},50634:function(e,t,r){r.d(t,{M:function(){return c},j:function(){return d}});var n=r(2784),i=r(9449),a=r(1010),o=r(31490),l=r(95993);class s extends l.GJ{getContent(){return this.content}constructor(e){super({start:()=>{var t;null===(t=e.onStart)||void 0===t||t.call(e)},transform:async(t,r)=>{var n,i,a;"content"===t.event&&(this.content+=t.data,null===(n=e.onContent)||void 0===n||n.call(e,this.content)),"done"===t.event&&(null===(i=e.onComplete)||void 0===i||i.call(e,this.content)),"cancel"===t.event&&(null===(a=e.onCancel)||void 0===a||a.call(e)),r.enqueue(t)},flush(){var t;null===(t=e.onFlush)||void 0===t||t.call(e)}}),this.content=""}}let c=(e,t)=>{let r=(0,n.useCallback)(r=>{let{variables:n,interactionId:l,params:c,workspaceId:d}=r;l=l||(0,o.nZ)();let u=e.prepare({variables:n,params:c,interactionId:l}),{cancel:p,stream:m}=(0,i.z4)({...u,workspaceId:d,interactionId:l},{timeout:t.timeout}),g=new s(t),h=m.pipeThrough(g),f=new Promise((e,r)=>{(0,a.GO)(h,{onError(e){var n;null===(n=t.onError)||void 0===n||n.call(t,e),r(e)},onDone(){e(g.getContent())}})});return{cancel:p,promise:f}},[t,e]);return{generate:r}},d=(e,t)=>{let r=(0,n.useCallback)(r=>{let{variables:n,interactionId:l,workspaceId:c}=r;l=l||(0,o.nZ)();let{cancel:d,stream:u}=(0,i.ZE)({promptKey:e,variables:n,interactionId:l,workspaceId:c},{timeout:t.timeout}),p=new s(t),m=u.pipeThrough(p),g=new Promise((e,r)=>{(0,a.GO)(m,{onError(e){var n;null===(n=t.onError)||void 0===n||n.call(t,e),r(e)},onDone(){e(p.getContent())}})});return{cancel:d,promise:g}},[t,e]);return{generate:r}}},9449:function(e,t,r){r.d(t,{z4:function(){return f},ZE:function(){return h},pM:function(){return x}});var n,i,a=r(95993),o=r(14274),l=r(9231);class s extends a.GJ{constructor(){super({transform:async(e,t)=>{if("error"===e.event){t.error(new l.T1("StreamError message received: ".concat(JSON.stringify(e)),e.data));return}if("cancel"===e.event||"done"===e.event||"content"===e.event){t.enqueue(e);return}}})}}async function c(e,t){let r;let n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}function d(){return{data:"",event:"",id:"",retry:void 0}}(n=i||(i={}))[n.NewLine=10]="NewLine",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.Colon=58]="Colon";let u="text/event-stream",p="last-event-id";function m(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(u)))throw Error("Expected content-type to be ".concat(u,", Actual: ").concat(t))}class g extends Error{constructor(e){super(),this.timeout=e}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.v.API_HOST+"/ai/v2/generation",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:n,body:JSON.stringify(e)};return b(r,i,t)}let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.v.API_HOST+"/ai/chatCompletion",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:n,body:JSON.stringify(e)};return b(r,i,t)},x=e=>{let{streamId:t,lastEventId:r,interactionId:n,...i}=e,a=new URL(o.v.API_HOST+"/ai/resumeChatCompletion");return a.searchParams.set("interactionId",n),b(a.toString(),{method:"GET",headers:{"gamma-chat-completion-stream-id":t,"last-event-id":r}},{streamResumingEnabled:!0,...i})},b=(e,t,r)=>{var n;let i=r.retries||0,o=r.backoff||1e3,h=r.timeout||null,f=null!==(n=r.streamResumingEnabled)&&void 0!==n&&n,x=0,b=new AbortController,v=!1,j=!1,y=!1,w=null,C=!1,A=()=>o*Math.pow(2,Math.max(x-1,0)),k={};f&&(k["gamma-stream-resuming-enabled"]="true");let _=new a.Pz({async start(r){null!=h&&(w=setTimeout(()=>{C=!0,b.abort(),r.error(new l.rm("Stream timed out after ".concat(h,"ms")))},h));let{headers:n,...a}=t;(function(e,t){let{signal:r,headers:n,onopen:i,onmessage:a,onclose:o,onerror:l,openWhenHidden:s,fetch:g,...h}=t;return new Promise((t,f)=>{let x;let b={...n};function v(){x.abort(),document.hidden||k()}b.accept||(b.accept=u),s||document.addEventListener("visibilitychange",v);let j=1e3,y=0;function w(){document.removeEventListener("visibilitychange",v),window.clearTimeout(y),x.abort()}null==r||r.addEventListener("abort",()=>{w(),t()});let C=null!=g?g:window.fetch,A=null!=i?i:m;async function k(){var r,n;x=new AbortController;try{let n,i,l,s;let u=await C(e,{...h,headers:b,signal:x.signal});await A(u),await c(u.body,(r=function(e,t,r){let n=d(),i=new TextDecoder,a=!1;return function(o,l){if(0===o.length)null==r||r(n),n=d(),a=!1;else if(l>0){let r=i.decode(o.subarray(0,l)),s=l+(32===o[l+1]?2:1),c=i.decode(o.subarray(s));switch(r){case"data":a?n.data=n.data+"\n"+c:(n.data=c,a=!0);break;case"event":n.event=c;break;case"id":e(n.id=c);break;case"retry":let d=parseInt(c,10);isNaN(d)||t(n.retry=d)}}}}(e=>{e?b[p]=e:delete b[p]},e=>{j=e},a),s=!1,function(e){void 0===n?(n=e,i=0,l=-1):n=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(n,e);let t=n.length,a=0;for(;i<t;){s&&(10===n[i]&&(a=++i),s=!1);let e=-1;for(;i<t&&-1===e;++i)switch(n[i]){case 58:-1===l&&(l=i-a);break;case 13:s=!0;case 10:e=i}if(-1===e)break;r(n.subarray(a,e),l),a=i,l=-1}a===t?n=void 0:0!==a&&(n=n.subarray(a),i-=a)})),null==o||o(),w(),t()}catch(e){if(!x.signal.aborted)try{let t=null!==(n=null==l?void 0:l(e))&&void 0!==n?n:j;window.clearTimeout(y),y=window.setTimeout(k,t)}catch(e){w(),f(e)}}}k()})})(e,{openWhenHidden:!0,credentials:"include",...a,headers:{...n,...k},signal:b.signal,onopen:async e=>{if(!e.ok||e.headers.get("content-type")!==u){if(e.status>=400&&e.status<500&&429!==e.status)b.abort(),r.error(new l.VG("Unable to complete request"));else if(x++<i&&!v)throw new g(A());else b.abort(),r.error(new l.VG("Unable to complete request"))}},onmessage(e){if(y){j||(j=!0,console.log("[AIStream] enqueue cancel event",{...e,event:"cancel",data:""}),r.enqueue({...e,event:"cancel",data:""}),r.close(),b.abort());return}C||(r.enqueue(e),v=!0)},onclose(){w&&(clearTimeout(w),w=null),r.close()},onerror(e){if(e instanceof g){if(y)throw console.error("Stream cancelled - not retrying"),Error("Stream cancelled");return e.timeout}if(e instanceof Error){if(console.error("Uncaught stream error",e),!f)throw e;if(x++<i)return A();throw e}if(v){let e="Stream closed unexpectedly";throw console.error("Uncaught stream error",e),new l.Vh(e)}}}).catch(e=>{w&&(clearTimeout(w),w=null),y||r.error(e)})}});return{stream:_.pipeThrough(new s),cancel:()=>{y||(y=!0)}}}},1010:function(e,t,r){r.d(t,{GO:function(){return a},fZ:function(){return l},uS:function(){return o}});var n=r(37164),i=r(9231);let a=(e,t)=>{let r=e.getReader(),n=async()=>{var e,i,a;try{let{done:a,value:o}=await r.read();if(a)null===(i=t.onDone)||void 0===i||i.call(t);else{null===(e=t.onMessage)||void 0===e||e.call(t,o),n();return}}catch(e){null===(a=t.onError)||void 0===a||a.call(t,e instanceof Error?e:Error(e))}};n()},o=e=>e instanceof i.T1?{errorCode:e.code,errorMessage:e.message}:e instanceof Error?{errorMessage:e.message}:{errorMessage:e},l=(0,n.kP)("0123456789abcdefghijklmnopqrstuvwxyz",16)},31490:function(e,t,r){r.d(t,{Io:function(){return v},Lt:function(){return b},Wf:function(){return h},XH:function(){return x},fM:function(){return f},gb:function(){return c},hq:function(){return s},mV:function(){return d},nZ:function(){return j},o:function(){return p},pQ:function(){return g},qZ:function(){return u},vL:function(){return m}});var n=r(37164),i=r(14274),a=r(1163),o=r(11050),l=r(36651);let s=e=>{o.co.track(o.AA.AI_REQUEST_SENT,{...e,gitSHA:i.v.GIT_SHA})},c=e=>{o.co.track(o.AA.AI_REQUEST_COMPLETE,{...e,gitSHA:i.v.GIT_SHA})},d=e=>{o.co.track(o.AA.AI_REQUEST_ABORT,{...e,gitSHA:i.v.GIT_SHA})},u=e=>{o.co.track(o.AA.AI_REQUEST_STREAM_START,{...e,gitSHA:i.v.GIT_SHA})},p=e=>{o.co.track(o.AA.AI_REQUEST_RESPONSE,{...e,gitSHA:i.v.GIT_SHA})},m=e=>{o.co.track(o.AA.AI_SUGGESTION_APPLY,{...e,gitSHA:i.v.GIT_SHA})},g=e=>{o.co.track(o.AA.AI_REQUEST_ERROR,{...e,gitSHA:i.v.GIT_SHA})},h=e=>{o.co.track(o.AA.AI_REQUEST_RETRY,{...e,gitSHA:i.v.GIT_SHA})},f=e=>{o.co.track(o.AA.AI_DOC_RATED,{...e,gitSHA:i.v.GIT_SHA,product:(0,a.K9)((0,l.rW)())})},x=e=>{let t=e.tags.reduce((e,t)=>(e[t]=!0,e),{});o.co.track(o.AA.AI_DOC_FEEDBACK_SUBMITTED,{...e,tags_map:t,gitSHA:i.v.GIT_SHA,product:(0,a.K9)((0,l.rW)())})},b=e=>{o.co.track(o.AA.AI_IMAGE_FEEDBACK_SUBMITTED,{...e,gitSHA:i.v.GIT_SHA})},v=e=>{o.co.track(o.AA.AI_IMAGE_RATED,{...e,gitSHA:i.v.GIT_SHA})},j=()=>(0,n.x0)()},14764:function(e,t,r){r.d(t,{r:function(){return v}});var n=r(52322),i=r(38035),a=r(11550),o=r(57124),l=r(97763),s=r(40651),c=r(62614),d=r(81540),u=r(77533),p=r(42946),m=r(49929),g=r(94523),h=r(5879),f=r(2784),x=r(86704);let b=(0,f.memo)(e=>{let{credits:t,lowCreditStatus:r,onClick:i,variant:a="solid",isDark:o=!1}=e,l=null===t,s=(0,x.ko)();return(0,n.jsx)(g.kH,{label:(0,n.jsx)(h.cC,{id:"IY3q+2"}),placement:"top",children:(0,n.jsx)(c.z,{onClick:i,isDisabled:l,..."ghost"===a?{variant:"ghost",size:"sm",colorScheme:o?"gray":"blackAlpha"}:{variant:"unstyled",bg:"white",px:4},color:r?s[r].lightColor:void 0,fontWeight:"500",leftIcon:(0,n.jsx)(m.G,{icon:p.owJ,size:"sm"}),rightIcon:(0,n.jsx)(m.G,{color:o?"var(--chakra-colors-gray-400)":"var(--chakra-colors-gray-600)",icon:p.DBf,size:"xs"}),children:l?(0,n.jsx)(d.$,{size:"xs"}):(0,n.jsx)(u.x,{as:"span",color:null===r?void 0:s[r].lightColor,children:(0,n.jsx)(h.cC,{id:"T57gLR",values:{credits:t}})})})})}),v=e=>{let{modalId:t="ai-credits-modal",variant:r,segmentEvent:c,isDark:d,...u}=e,{credits:p,lowCreditStatus:m}=(0,l.qO)(),g=(0,o.Y)("unlimited_credits"),{isOpen:h,onOpen:f,onClose:x}=(0,a.M)({id:t});return g?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.k,{...u,children:(0,n.jsx)(b,{credits:p,onClick:f,lowCreditStatus:m,variant:r,isDark:d})}),(0,n.jsx)(s.H,{isOpen:h,onOpen:f,onClose:x,credits:p,segmentEvent:c})]})}},40651:function(e,t,r){r.d(t,{H:function(){return Y}});var n=r(52322),i=r(29705),a=r(92850),o=r(26468),l=r(22226),s=r(2338),c=r(17993),d=r(77533),u=r(54326),p=r(29117),m=r(28535),g=r(81540),h=r(97217),f=r(75768),x=r(62614),b=r(82554),v=r(11082),j=r(42946),y=r(49929),w=r(94523),C=r(5879),A=r(87254),k=r(2784),_=r(21979),S=r(42111),I=r(1196),E=r(94199),U=r(44663),R=r(87342),P=r(57124),T=r(11050),O=r(36651),H=r(78462),M=r(86704),D=r(97763),N=r(49259),L=r(97010),z=r(87436),G=r(95897),B=r(89511),F=r(11121),W=r(57574);let q=e=>{let{onContactUsClick:t,...r}=e,i=(0,S.ye)("aiDebits"),a=(0,S.ye)("ai-credits").enabled,o=i.generateCard,l=i.wizardCreation,s=i.chatSuggestion,c=i.autocomplete,d=i.generateImage,u=(0,S.ye)("aiAutocomplete"),p=(0,S.ye)("aiGeneratedImages"),m=(0,S.ye)("addCard2");return(0,n.jsxs)(N.U,{allowMultiple:!0,...r,children:[(0,n.jsx)(V,{accordionLabel:A.ag._({id:"IVVQ18"}),children:(0,n.jsxs)(L.QI,{children:[(0,n.jsxs)(L.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(C.cC,{id:"p4u+sD"})})," ",(0,n.jsx)(C.cC,{id:"XSCvWA",values:{aiGeneration:l,GAMMA_ARTIFACT_PROPER_NOUN:E.Yc}})]}),m&&(0,n.jsxs)(L.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(C.cC,{id:"R8xLRW"})})," ",(0,n.jsx)(C.cC,{id:"M3I7Cf",values:{aiAddCard:o}})]}),(0,n.jsxs)(L.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(C.cC,{id:"gPyWmV"})})," ",(0,n.jsx)(C.cC,{id:"8HgQlf",values:{aiEditing:s}}),(0,n.jsx)(C.cC,{id:"bO6EBT"})]}),p&&(0,n.jsxs)(L.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(C.cC,{id:"0jmvoW"})})," ",(0,n.jsx)(C.cC,{id:"OY40J+",values:{aiImages:d}})]}),u&&(0,n.jsxs)(L.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(C.cC,{id:"eBVeIQ"})})," ",(0,n.jsx)(C.cC,{id:"AJ11w6",values:{aiAutocomplete:c,AUTOCOMPLETE_SLASH_SHORTCUT:W.Y,AUTOCOMPLETE_INPUT_SHORTCUT:W.o}})]})]})}),a&&(0,n.jsx)(V,{accordionLabel:A.ag._({id:"1pwdRz"}),children:(0,n.jsx)(C.cC,{id:"1Ijs7v",values:{GAMMA_PRO_PROPER_NOUN:E.x8,GAMMA_PROPER_NOUN:E.N6}})})]})},V=e=>{let{accordionLabel:t,children:r}=e;return(0,n.jsxs)(z.Q,{children:[(0,n.jsx)("h2",{children:(0,n.jsxs)(G.K,{px:2,py:2,fontSize:"sm",children:[(0,n.jsx)(m.xu,{as:"span",flex:"1",textAlign:"left",fontWeight:500,children:t}),(0,n.jsx)(B.X,{})]})}),(0,n.jsx)(F.H,{pb:4,px:2,fontSize:"sm",children:r})]})},Q=()=>({friend:{label:A.ag._({id:"uU68PM"})},teammate:{label:A.ag._({id:"O/k8gF"})},buy:{label:A.ag._({id:"/2RIKE"})}}),K={fontWeight:500,letterSpacing:"normal",color:"gray.600"},X=e=>{let{onClose:t,onOpen:r,credits:A,segmentEvent:N=T.AA.GAMMA_PRO_UPSELL_CALLOUT_AI_CREDITS}=e,{user:L,currentWorkspace:z}=(0,O.SE)(),G=(0,O.d3)(),B=(0,S.ye)("upsellUXEnabled_Pro"),F=(0,P.Y)("unlimited_credits"),[W,V]=(0,k.useState)(B?"buy":"friend"),X=(0,S.ye)("ai-credits"),Y=(0,S.ye)("intercom"),Z=(0,U.G)(),{lowCreditStatus:J}=(0,D.qO)(),$=(0,k.useMemo)(()=>L?"teammate"===W&&z&&G?(0,H.Mr)({userId:L.id,workspace:z}):"friend"===W?(0,H.Mr)({userId:L.id}):"":"",[G,z,W,L]),ee=X.enabled,et=X.referralBonus,er=Q()[W],en=(0,k.useCallback)(()=>{Z(),t()},[Z,t]),ei=(0,M.ko)();return(0,n.jsx)(w.Wk,{isDark:!1,children:(0,n.jsxs)(a.u_,{isOpen:!0,onClose:t,size:"xl",children:[(0,n.jsx)(o.Z,{}),(0,n.jsxs)(l.h,{children:[(0,n.jsx)(s.o,{}),(0,n.jsxs)(c.g,{py:4,px:6,textAlign:"center",children:[(0,n.jsx)(d.x,{...K,fontSize:"md",color:J?ei[J].darkColor:void 0,children:J?ei[J].description:(0,n.jsx)(C.cC,{id:"xy3nnP"})}),(0,n.jsx)(u.x,{p:0,color:J?ei[J].lightColor:void 0,children:(0,n.jsxs)(p.U,{children:[(0,n.jsx)(m.xu,{as:"span",fontSize:"xl",children:(0,n.jsx)(y.G,{icon:j.owJ})})," ",null===A?(0,n.jsx)(g.$,{size:"sm"}):(0,n.jsx)(C.cC,{id:"T57gLR",values:{credits:A}})]})}),(0,n.jsx)(d.x,{textAlign:"left",fontSize:"sm",pt:2,...K,children:(0,n.jsx)(C.cC,{id:"lUUl1i"})})]}),(0,n.jsxs)(h.f,{pb:4,children:[ee?(0,n.jsxs)(c.g,{spacing:4,children:[(0,n.jsxs)(f.h,{variant:"ghost",size:"sm",spacing:0,gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center",children:[!F&&B&&(0,n.jsx)(x.z,{onClick:()=>V("buy"),isActive:"buy"===W,color:"buy"===W?void 0:"gray.700",children:(0,n.jsx)(C.cC,{id:"KctW9G"})}),(0,n.jsx)(x.z,{onClick:()=>V("friend"),isActive:"friend"===W,color:"friend"===W?void 0:"gray.700",children:(0,n.jsx)(C.cC,{id:"KSBmDv"})}),G&&(0,n.jsx)(x.z,{leftIcon:(0,n.jsx)(y.G,{icon:j.FKd}),onClick:()=>V("teammate"),isActive:"teammate"===W,color:"teammate"===W?void 0:"gray.700",children:(0,n.jsx)(C.cC,{id:"dUOpaF"})})]}),("friend"===W||"teammate"===W)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.U,{spacing:2,children:[(0,n.jsxs)(d.x,{fontSize:"sm",minW:"50%",children:["friend"===W&&(0,n.jsx)(C.cC,{id:"tBKKYy",values:{referralBonusAmount:et,GAMMA_PROPER_NOUN:E.N6}}),"teammate"===W&&(0,n.jsx)(C.cC,{id:"q8MWFp",values:{referralBonusAmount:et}})]}),(0,n.jsxs)(b.C,{colorScheme:"green",fontSize:"xs",px:"0.4em",py:"0.2em",children:["+"," ",(0,n.jsx)(C.cC,{id:"NFNFrR",values:{referralBonusAmount:et}})]})]}),(0,n.jsx)(_.I,{url:$,customLabel:er.label,variant:"solid"})]}),"buy"===W&&(0,n.jsx)(R.m,{segmentEvent:N,onOpenCallback:t,onCloseCallback:r})]}):(0,n.jsxs)(p.U,{align:"baseline",spacing:1,children:[(0,n.jsx)(d.x,{children:(0,n.jsx)(C.cC,{id:"0TJN6B"})}),Y?(0,n.jsx)(x.z,{onClick:en,variant:"link",children:(0,n.jsx)(C.cC,{id:"Bhgd0l"})}):(0,n.jsxs)(v.r,{href:"mailto:".concat(I.p),children:[(0,n.jsx)(C.cC,{id:"Bhgd0l"}),(0,n.jsx)(i.h,{ml:1,transform:"translateY(-2px)"})]})]}),(0,n.jsx)(q,{my:4,onContactUsClick:Y?en:void 0})]})]})]})})},Y=(0,k.memo)(e=>{let{isOpen:t,...r}=e;return t?(0,n.jsx)(X,{...r}):null})},85420:function(e,t,r){r.d(t,{J:function(){return g}});var n=r(52322),i=r(82554),a=r(29117),o=r(77533),l=r(42946),s=r(49929),c=r(94523),d=r(5879),u=r(42111),p=r(57124),m=r(86704);let g=e=>{var t;let{type:r,...g}=e,h=(0,u.ye)("aiDebits"),f=(0,p.Y)("unlimited_credits");if(f)return null;let x=null!==(t=h[r])&&void 0!==t?t:m.Sy[r];return(0,n.jsx)(c.kH,{label:(0,n.jsx)(d.cC,{id:"B7jvsP",values:{numCredits:x}}),children:(0,n.jsx)(i.C,{colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2,...g,children:(0,n.jsxs)(a.U,{spacing:1,children:[(0,n.jsx)(o.x,{children:x}),(0,n.jsx)(s.G,{icon:l.owJ,size:"sm"})]})})})}},7144:function(e,t,r){r.d(t,{d:function(){return u}});var n=r(93202),i=r(42111),a=r(57124),o=r(91994),l=r(11050),s=r(21733),c=r(86704),d=r(17749);let u=async(e,t,r)=>{var u,p;let m=(0,a.uL)("unlimited_credits",t),g=i.VH.get("aiDebits"),h=null!==(p=g[e])&&void 0!==p?p:c.Sy[e];if(l.co.track(l.AA.AI_CREDITS_USED,{operation:e,used:h,has_unlimited_ai:m,interactionId:r}),0===h||m)return;let f=(null==t?void 0:t.id)||(0,s.n_)();if(!f)return;let x=(0,n.WQq)(),b=await x.mutate({mutation:n.ATM,variables:{value:h,workspaceId:f}}),v=null===(u=b.data)||void 0===u?void 0:u.deductCredits;if(!v)return null;l.co.track(l.AA.AI_CREDITS_DEDUCTED,{operation:e,used:h,remaining:v.credits,interactionId:r});let j=(0,o.bh)();return j.dispatch((0,d.B1)({availableCredits:v.credits})),v.credits}},1196:function(e,t,r){r.d(t,{p:function(){return n}});let n="support@gamma.app"},39877:function(e,t,r){r.d(t,{C:function(){return g},J:function(){return h}});var n=r(84636),i=r.n(n),a=r(14274),o=r(42111),l=r(87205),s=r(81674),c=r(38914),d=r(46152),u=r.n(d);let p=async e=>{let t=e.split(" ")[0];try{var r;let e=await fetch("/api/icons/search?count=5&query=".concat(t),{credentials:"include"}),n=null===(r=await e.json())||void 0===r?void 0:r.data;if(!n||0===n.length)return console.warn("[fetchIcons] No icons found. Using default set"),u()(m);return console.debug("[AI fetchIcons] fetched icons",n),n}catch(e){return console.error("(caught) [fetchIcons] fetchResults:",e),u()(m)}},m=[c.ILF,c.Y$T,c.Tab,c.Mzg,c.Qz9,c.gMD].map(e=>{let t=(0,s.qv)(e),[r,n]=t.icon;return{id:e.iconName,provider:"fa",styles:["light"],src:"".concat(a.v.FRONTEND_URL,"/api/icons/").concat(e.iconName,".svg?provider=fa&style=light"),html:t.html[0],width:r,height:n}}),g=async e=>{let{query:t,provider:r,options:n={},count:i=35,prefetch:a=!1}=e,s="web"===r?o.VH.get("webImageProviderType"):void 0;if("fontawesome"===r){let e=(await p(t)).map(e=>({id:e.id,imageUrl:e.src,width:e.width,height:e.height,attributionUrl:"",thumbnailUrl:"",credit:""}));return e}let c=f({query:t,provider:r,options:{type:s,...n},count:i});try{let e=await fetch(c,{credentials:"include"}),t=await e.json();if(!((null==t?void 0:t.length)>=0))throw Error(t);return a&&Promise.all(t.map(e=>(0,l.GN)(e.imageUrl))).then(()=>{console.debug("[fetchImageSearchResults] images downloaded in background")}).catch(e=>{console.debug("[fetchImageSearchResults] error downloading image:",e)}),t}catch(e){return console.error("(caught) [fetchImages] fetchResults:",e),[]}},h=async e=>{let{queries:t,count:r,provider:n,prefetch:a,options:o}=e,l=(await Promise.all(t.map(e=>g({query:e,count:r,provider:n,prefetch:a,options:o}).then(t=>t.map(t=>({query:e,image:t,provider:n})))))).flat(),s=i()(l,e=>e.image.id||e.image.imageUrl);return s},f=e=>{let{query:t,count:r,provider:n,options:i={}}=e,o=new URLSearchParams,l=a.v.API_HOST||"https://api.gamma.app";return o.append("query",t),o.append("provider",n),o.append("count",String(r)),Object.entries(i).forEach(e=>{let[t,r]=e;void 0!==r&&o.append(t,String(r))}),"".concat(l).concat("/media/images/search","?").concat(o.toString())}},2090:function(e,t,r){r.d(t,{Ge:function(){return h},N$:function(){return x},ND:function(){return j},WY:function(){return w},cT:function(){return y},eb:function(){return p},pK:function(){return u},u0:function(){return m},xQ:function(){return v}});var n=r(65616),i=r(48484),a=r(42340),o=r(13326),l=r(14274),s=r(81345),c=r(87205);let d={auth:{key:l.v.TRANSLOADIT_AUTH_KEY},template_id:l.v.TRANSLOADIT_IMAGE_TEMPLATE_ID},u=["image/*",o.Z.heic,o.Z.heif],p=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],m=[o.Z.doc,o.Z.docx],g=[...m,...p,o.Z.pdf],h=["font/otf","font/ttf","application/x-font-ttf","application/x-font-otf",".otf",".ttf"],f={all:[...g,...p,...u],importDoc:[...g],importPpt:[...p],doc:g,font:h,image:u,icon:[".png",".ico",".gif",".svg"]},x={autoProceed:!0,restrictions:{allowedFileTypes:[],maxNumberOfFiles:1}},b={},v=async e=>{let t=b[e];if(t&&t.expires&&+new Date(t.expires)-3e5>Date.now())return b[e];let r=await fetch("/api/transloadit/signature",{method:"POST",body:JSON.stringify({templateId:e})}),{signature:n,expires:i}=await r.json();return n&&i?(b[e]={signature:n,expires:i},b[e]):(console.error("Error getting Transloadit signature"),{signature:"",expires:""})},j={createUppyInstance:function(e,t){let{onUploadStart:r,onOriginalFileUpload:a,onUploadComplete:o,onUploadFailed:l,setErrorMessage:u}=t,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,b=2560,j="false";"background"===p||"themeBackground"===p?b=3840:"icon"===p?b=250:"profile"===p?(b=1024,j="true"):"workspaceLogo"===p&&(b=1024);let y=[];g=g||"image";let w=new n.ZP({...x,restrictions:{...x.restrictions,maxNumberOfFiles:m,allowedFileTypes:f[g]}});return w.use(i.ZP,{assemblyOptions:async()=>{let t=h||d.template_id,{signature:r,expires:n}=await v(t);return{params:{...d,auth:{...d.auth,expires:n},template_id:h||d.template_id},fields:{orgId:e,imageType:p,resizePx:b,cropPadding:"50%",detectAndCropFace:j},signature:r}},waitForEncoding:!0}),w.on("file-added",async e=>{try{var t;(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.includes("image"))&&(null==e?void 0:e.data)instanceof File&&await (0,c.sy)(e),r&&1===m&&r({tempUrl:URL.createObjectURL(e.data),file:e})}catch(t){console.error("[Uppy.file-added] ".concat(t.message)),w.removeFile(e.id)}}),w.on("files-added",e=>{r&&1!==m&&e.forEach(e=>{r({tempUrl:URL.createObjectURL(e.data),file:e})})}),w.on("error",e=>{let t="Error uploading to Transloadit: ".concat(e.message);u&&u(""),l&&l(t),console.error(t)}),w.on("transloadit:result",(e,t,r)=>{if(1===m){if(!a||"original_file"!==e||0===r.uploads.length||(0,c.Ns)(r.uploads[0].mime)||(0,s.kO)(r.uploads[0].mime,r.uploads[0].ext)||!t)return;let{url:n,meta:i,name:o}=t;u&&u(""),n?a({src:n,meta:i,name:o,uploadResultStep:"original"}):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}else{if("filter_skip_optimize"===e){y=y.concat(t);return}{let e,i;if((0,c.Ns)(t.mime))i=t;else{var n;e=null===(n=y.find(e=>e.name===t.name))||void 0===n?void 0:n.url,i=t}if(!i)return;let{url:a,meta:s,name:d}=i;u&&u(""),a?o&&o({src:a,meta:s,name:d,uploadResultStep:"optimized",fullResults:r.results},e):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}}}),w.on("transloadit:complete",e=>{var t,r,n,i,a;let d,p,h,f;if(1!=m)return;if(0===e.uploads.length)throw console.error("[transloadit:complete] No uploads in assembly",e),Error("No uploads in assembly");if("importDoc"===g)p=e.results.convert_to_html[0];else if("importPpt"===g)p=e.results.convert_to_html[0];else{if((0,s.S9)(e.uploads[0].ext))return;(0,s.O7)(e.uploads[0].mime)?(p=e.results.original_file[0],h=e.results.doc_thumbnail[0].url):(0,s.kO)(e.uploads[0].mime,e.uploads[0].ext)?(p=e.results.convert_to_pdf[0],h=e.results.doc_thumbnail[0].url):(0,c.Ns)(e.uploads[0].mime)?(p=(null===(t=e.results.optimized)||void 0===t?void 0:t[0])||(null===(r=e.results.filter_skip_optimize)||void 0===r?void 0:r[0]),f=null===(n=e.results.detect_and_crop_face)||void 0===n?void 0:n[0].url):(d=e.results.original_file[0].url,f=null===(i=e.results.detect_and_crop_face)||void 0===i?void 0:i[0].url,p=(null===(a=e.results.optimized)||void 0===a?void 0:a[0])||e.results.original_file[0])}let{url:x,ssl_url:b,meta:v,name:j}=p;u&&u(""),b||x?o&&o({src:b||x,meta:v,name:j,thumbnail:h,croppedFace:f,uploadResultStep:"optimized",fullResults:e.results},d):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}),w}},y=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"image",a=arguments.length>5?arguments[5]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let o=j.createUppyInstance(t,r,n,1,i,a);o.addFile({name:e.name,type:e.type,data:e}),o.upload()},w=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",o=arguments.length>4?arguments[4]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let l=j.createUppyInstance(t,r,n,null,void 0,o);l.use(a.Z,{companionUrl:i.Zm}),l.getPlugin("Url").addFile(e)}},46772:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(21156),i=r(76332);let a=new n.V({systemPromptOperation:i.Run.GenerateImagePromptSystem,userPromptOperation:i.Run.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},9883:function(e,t,r){r.d(t,{q:function(){return k}});var n=r(52322),i=r(35183),a=r(10625),o=r(67046),l=r(62614),s=r(29117),c=r(38035),d=r(75009),u=r(77533),p=r(332),m=r(99058),g=r(25481),h=r(42946),f=r(49929),x=r(26773),b=r(41003),v=r(62131),j=r(2953),y=r(91994),w=r(11050),C=r(47968),A=r(1188);let k=e=>{let{value:t,setValue:r,isDisabled:k}=e,_=(0,A.mw)(t),S=(0,y.CG)(C.yx),I=(0,b.Y)("ai_premium_models",null==S?void 0:S.organization),{openUpsellModal:E}=(0,j.z)();return(0,n.jsx)(i.NI,{children:(0,n.jsxs)(a.v,{children:[(0,n.jsx)(o.j,{as:l.z,variant:"plain",isDisabled:k,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,n.jsx)(f.G,{icon:h.ptq}),boxShadow:"none",children:(0,n.jsxs)(s.U,{spacing:2,children:[(0,n.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:_.image?(0,n.jsx)(d.E,{src:_.image.src,w:"1.25em",h:"1.25em",objectFit:"contain"}):(0,n.jsx)(f.G,{icon:_.icon,fixedWidth:!0})}),(0,n.jsx)(u.x,{as:"span",flex:1,children:null==_?void 0:_.label()})]})}),(0,n.jsx)(p.h,{children:(0,n.jsx)(m.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",children:Object.entries(x.Iw).map(e=>{let[t,{label:i,description:a,icon:o,image:l}]=e;if(!(0,x.Hr)(t))return null;let c=(0,x.Om)(t);return(0,n.jsxs)(g.s,{value:t,icon:l?(0,n.jsx)(d.E,{src:l.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):(0,n.jsx)(f.G,{icon:o,fixedWidth:!0}),onClick:()=>{if(c&&!I){E({segmentEvent:w.AA.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS});return}r(t)},children:[(0,n.jsxs)(s.U,{children:[(0,n.jsx)(u.x,{children:i()}),c&&(0,n.jsx)(v.U,{productFeature:"ai_premium_models",workspace:null==S?void 0:S.organization})]}),a&&(0,n.jsx)(u.x,{color:"gray.400",fontSize:"sm",children:a()})]},t)})})})]})})}},62801:function(e,t,r){r.d(t,{O:function(){return c}});var n=r(52322),i=r(29117),a=r(32899),o=r(28535),l=r(42946),s=r(49929);let c=e=>{let{promptPageInfo:t,nextPrompt:r,prevPrompt:c,isDisabled:d,...u}=e;return(0,n.jsxs)(i.U,{spacing:1,...u,children:[(0,n.jsx)(a.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:l.A35}),isDisabled:d||!t.canGoPrev,onClick:()=>c(),"aria-label":"left",color:"gray.800",size:"xs"}),(0,n.jsxs)(o.xu,{as:"span",color:"gray.800",fontSize:"sm",children:[t.curr," / ",t.total]}),(0,n.jsx)(a.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:l._tD}),color:"gray.800",isDisabled:d||!t.canGoNext,onClick:()=>r(),"aria-label":"left",size:"xs"})]})}},67475:function(e,t,r){r.d(t,{A2:function(){return S},SL:function(){return _}});var n=r(52322),i=r(55478),a=r(35183),o=r(38035),l=r(43679),s=r(34071),c=r(62614),d=r(29117),u=r(75009),p=r(28535),m=r(39429),g=r(48394),h=r(17993),f=r(74409),x=r(20437),b=r(29494),v=r(77533),j=r(42946),y=r(49929),w=r(2784),C=r(42111),A=r(91994),k=r(47968);let _=(e,t)=>{let r=t[0].presets[0];return t.forEach(t=>{let n=t.presets.find(t=>t.style_preset===e);if(n){r=n;return}}),r},S=(0,w.memo)(e=>{let{presetId:t,setPresetId:r,stylePrompt:v,setStylePrompt:S,presetOptions:E,isDisabled:U}=e,{isOpen:R,onToggle:P,onClose:T}=(0,i.q)(),[O,H]=(0,w.useState)(),M=(0,C.ye)("aiImageGenV2"),D=(0,A.CG)(k.Pu);return(0,w.useEffect)(()=>{t&&H(_(t,E))},[t,E]),(0,w.useEffect)(()=>{O&&"Theme"===O.style_preset&&D.config.stylePrompt?S(D.config.stylePrompt):O&&S(O.stylePrompt)},[O,S,D]),(0,n.jsx)(a.NI,{children:(0,n.jsxs)(o.k,{direction:"column",gap:2,children:[(0,n.jsxs)(l.J,{placement:"bottom-start",matchWidth:!0,isOpen:R,onClose:T,closeOnBlur:!0,children:[(0,n.jsx)(s.x,{children:(0,n.jsx)(c.z,{width:"100%",type:"button",boxShadow:"none",onClick:P,rightIcon:(0,n.jsx)(y.G,{icon:j.ptq}),isDisabled:U,justifyContent:"space-between",children:(0,n.jsxs)(d.U,{spacing:2,children:[(0,n.jsx)(u.E,{width:"24px",height:"24px",src:null==O?void 0:O.imageUrl,borderRadius:"md"}),(0,n.jsx)(p.xu,{flex:1,children:null==O?void 0:O.name()})]})})}),(0,n.jsx)(m.y,{width:"auto",maxHeight:"max(350px, 40vh)",overflowY:"auto",children:(0,n.jsx)(g.b,{children:(0,n.jsx)(h.g,{spacing:4,children:E.map(e=>(0,n.jsxs)(h.g,{align:"start",spacing:0,children:[(0,n.jsx)(f.X,{size:"sm",mb:2,children:e.title()}),(0,n.jsx)(x.M,{columns:{base:M?3:2,"2xl":M?4:3},spacing:2,children:e.presets.map(e=>(0,n.jsx)(I,{preset:e,onClick:()=>{r(e.style_preset),T()},isSelected:e.style_preset===t},e.style_preset))})]},e.title()))})})})]}),M&&(null==O?void 0:O.style_preset)!=="None"&&(0,n.jsx)(b.g,{isDisabled:U,height:"80px",value:v})]})})});S.displayName="StylePresetMenu";let I=e=>{let{preset:t,onClick:r,isSelected:i}=e;return(0,n.jsxs)(h.g,{_hover:{cursor:i?"default":"pointer"},onClick:r,borderRadius:"md",spacing:1,p:2,border:"1px",bgColor:i?"trueblue.50":"transparent",borderColor:i?"trueblue.200":"transparent",children:[(0,n.jsx)(u.E,{src:t.imageUrl,width:"100%",height:"auto",borderRadius:"md"}),(0,n.jsx)(v.x,{color:i?"trueblue.500":"gray.900",fontSize:"sm",children:t.name()})]})}},72263:function(e,t,r){r.d(t,{oj:function(){return B},ec:function(){return O},Rq:function(){return G},Qo:function(){return R},S8:function(){return L},ci:function(){return z},jg:function(){return N},LJ:function(){return F}});var n=r(87254),i=r(84636),a=r.n(i),o=r(27191),l=r(2784),s=r(77787),c=r(50634),d=r(31490),u=r(93202),p=r(7144),m=r(42111),g=r(26773),h=r(46772),f=r(41003),x=r(91994),b=r(59568),v=r(74684),j=r(47968),y=r(11093),w=r(91073),C=r(36651),A=r(89458),k=r(78597);let _={Default:()=>n.ag._({id:"ovBPCi"}),Realistic:()=>n.ag._({id:"Yps9ro"}),Artistic:()=>n.ag._({id:"6J8BCS"})},S={None:"None",Anime:"Anime",Digital_Art_Concept_Art:"Digital_Art_Concept_Art",Ethereal_Fantasy_Art:"Ethereal_Fantasy_Art",Photography:"Photography",Analog_film:"Analog_film",Vaporwave:"Vaporwave",Isometric:"Isometric",Low_Poly:"Low_Poly",Claymation:"Claymation",Origami:"Origami",Line_Art:"Line_Art",Pixel_Art:"Pixel_Art",Texture:"Texture",Theme:"Theme",Custom:"Custom"},I=[{style_preset:S.None,name:()=>n.ag._({id:"EdQY6l"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/default.jpg",category:_.Default,stylePrompt:""},{style_preset:S.Anime,name:()=>n.ag._({id:"0NCJ/8"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/anime.jpg",category:_.Artistic,stylePrompt:"anime artwork. anime style, key visual, vibrant, studio anime, highly detailed"},{style_preset:S.Digital_Art_Concept_Art,name:()=>n.ag._({id:"qg9EcH"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/digital_art.jpg",category:_.Artistic,stylePrompt:"concept art. digital artwork, illustrative, painterly, matte painting, highly detailed"},{style_preset:S.Ethereal_Fantasy_Art,name:()=>n.ag._({id:"PTX7GW"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/fantasy_art.jpg",category:_.Artistic,stylePrompt:"ethereal fantasy concept art of. magnificent, celestial, ethereal, painterly, epic, majestic, magical, fantasy art, cover art, dreamy"},{style_preset:S.Photography,name:()=>n.ag._({id:"PDaunD"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/photography.jpg",category:_.Realistic,stylePrompt:"cinematic photo. 35mm photograph, film, bokeh, professional, 4k, highly detailed"},{style_preset:S.Analog_film,name:()=>n.ag._({id:"hr6t77"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/analog_film.jpg",category:_.Realistic,stylePrompt:"analog film photo. faded film, desaturated, 35mm photo, grainy, vignette, vintage, Kodachrome, Lomography, stained, highly detailed, found footage"},{style_preset:S.Vaporwave,name:()=>n.ag._({id:"zd/PSU"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/vaporwave.jpg",category:_.Artistic,stylePrompt:"vaporwave synthwave style. cyberpunk, neon, vibes, stunningly beautiful, crisp, detailed, sleek, ultramodern, high contrast, cinematic composition"},{style_preset:S.Isometric,name:()=>n.ag._({id:"5tylr3"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/isometric.jpg",category:_.Artistic,stylePrompt:"isometric style. vibrant, beautiful, crisp, detailed, ultra detailed, intricate"},{style_preset:S.Low_Poly,name:()=>n.ag._({id:"UdeABa"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/low_poly.jpg",category:_.Artistic,stylePrompt:"low-poly style. ambient occlusion, low-poly game art, polygon mesh, jagged, blocky, wireframe edges, centered composition"},{style_preset:S.Claymation,name:()=>n.ag._({id:"8tSuHw"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/claymation.jpg",category:_.Artistic,stylePrompt:"claymation style. sculpture, clay art, centered composition, play-doh"},{style_preset:S.Origami,name:()=>n.ag._({id:"br2YxS"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/origami.jpg",category:_.Artistic,stylePrompt:"origami style. paper art, pleated paper, folded, origami art, pleats, cut and fold, centered composition"},{style_preset:S.Line_Art,name:()=>n.ag._({id:"e3xMT9"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/line_art.jpg",category:_.Artistic,stylePrompt:"line art drawing. professional, sleek, modern, minimalist, graphic, line art, vector graphics"},{style_preset:S.Pixel_Art,name:()=>n.ag._({id:"fmqjfg"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/pixel_art.jpg",category:_.Artistic,stylePrompt:"pixel-art. low-res, blocky, pixel art style, 16-bit graphics"},{style_preset:S.Texture,name:()=>n.ag._({id:"X9aPH+"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/texture.jpg",category:_.Default,stylePrompt:"texture. top down close-up, video game"},{style_preset:S.Theme,name:()=>n.ag._({id:"FEr96N"}),imageUrl:"https://placekitten.com/300/300",category:_.Default,stylePrompt:"",hidden:!0},{style_preset:S.Custom,name:()=>n.ag._({id:"8Tg/JR"}),imageUrl:"https://placekitten.com/200/200",category:_.Default,stylePrompt:"",hidden:!0}];var E=r(1188);let U=e=>{let{docId:t,themeId:r}=e,[n,i]=(0,l.useState)([]),[o,s]=(0,l.useState)(!1),{data:c,loading:d,fetchMore:p}=(0,u.qOp)({variables:{docId:t,themeId:r,source:"image.ai-generated",type:u.DDH.Image,first:18}}),[m,g]=(0,l.useState)(null),[h]=(0,u.BAq)(),f=(0,l.useCallback)(async e=>{i(t=>t.filter(t=>t.id!==e)),g(e);try{await h({variables:{id:e},update:t=>{let r=RegExp(e,"g");Object.keys(t.data.data).forEach(e=>{e.match(r)&&t.data.delete(e)})},refetchQueries:["GetSavedMedia"]})}catch(e){console.error(e)}g(null)},[h]),x=(0,l.useMemo)(()=>(null==c?void 0:c.savedMedia.edges.map(e=>e.node))||[],[null==c?void 0:c.savedMedia.edges]),b=(0,l.useCallback)(e=>{i(t=>[...e,...t])},[]),v=(0,l.useMemo)(()=>a()([...n,...x],"id"),[n,x]),j=null==c?void 0:c.savedMedia.pageInfo,y=(0,l.useCallback)(()=>{(null==j?void 0:j.hasNextPage)&&(null==j?void 0:j.endCursor)&&(s(!0),p({variables:{after:null==j?void 0:j.endCursor}}).finally(()=>{s(!1)}))},[p,j]);return{history:v,loadMore:y,canFetchMore:!!(null==j?void 0:j.hasNextPage),isLoadingHistory:d,isFetchingMore:o,addToHistory:b,deleteImage:f,deletingId:m}},R=e=>{var t,r;let i,{selectImage:a}=e,o=(0,x.CG)(j.ke),s=(0,b.q)(),c=null==s?void 0:null===(r=s.state)||void 0===r?void 0:null===(t=r.theme)||void 0===t?void 0:t.id;"new"===c&&(c=void 0,i=u.wNJ.Theme);let{currentWorkspace:h}=(0,C.SE)(),[f,v]=(0,l.useState)(""),[y,w]=(0,l.useState)(!1),[A,k]=(0,l.useState)(!1),[_,S]=(0,l.useState)(""),{history:I,isLoadingHistory:R,addToHistory:P,loadMore:T,canFetchMore:O,isFetchingMore:H,deleteImage:M,deletingId:D}=U(c?{themeId:c}:o?{docId:o}:{}),N=(0,l.useCallback)(async e=>{let t=(0,d.nZ)();v(e.prompt),w(!0),k(!1),S("");let r={...e,style_preset:e.style_preset||"Theme",stylePrompt:e.stylePrompt||"",docId:e.docId||o,themeId:e.themeId||c,context:i},l=(0,E.mw)(e.model),s=performance.now(),u={interactionId:t,interface:"generate-image",provider:l.provider,streaming:!1,inputContent:r.prompt,docId:r.docId,generateImageOptions:r};try{(0,d.hq)(u);let e=await (0,g.Qz)({interactionId:t,workspaceId:null==h?void 0:h.id,rewrite:m.VH.get("rewriteImagePrompts"),...r});if(w(!1),0===e.length)throw Error("No images generated");e.length>0&&(P(e),a(e[0])),(0,p.d)("generateImage",void 0,t),(0,d.o)({...u,latency:performance.now()-s,generateImageUrls:e.map(e=>e.attrs.src)})}catch(e){k(!0),S(e.messageTranslated?e.messageTranslated:n.ag._({id:"QcZqsh"})),w(!1),console.error("(caught) [AIGenerateImage] error:",e),(0,d.pQ)({...u,latency:performance.now()-s,errorName:"GenerateImageError",errorMessage:e.message,outputMessage:""})}w(!1)},[o,c,i,null==h?void 0:h.id,P,a]);return{generate:N,isGenerating:y,hasError:A,errorMessage:_,isLoadingHistory:R,imageResults:I,searchQuery:f,loadMore:T,canLoadMore:O,isLoadingMore:H,deleteImage:M,deletingId:D}},P=e=>{var t,r;if(!(e instanceof o.qv))return null;if("smartLayoutCell"===e.node.type.name&&(null===(t=e.node.textContent)||void 0===t?void 0:t.length)>=5)return e.node.content;let n=e.$from;for(;n.depth>0;){let e=n.node(n.depth);if("smartLayoutCell"===e.type.name&&(null===(r=e.textContent)||void 0===r?void 0:r.length)>=5)return e.content;n=n.doc.resolve(n.before(n.depth))}return null},T=e=>{let t=(0,l.useCallback)(()=>{if(!e)return null;let{selection:t}=e.state,r=(0,y.Ru)(t.$from,w.KH)[0],n=r&&(0,v.NE)(r.node,r.pos),{content:i}=e.state.doc.slice(n.pos+1,n.pos+n.node.nodeSize-1),a=P(t);return a?(0,s.c)(e,a):(0,s.c)(e,i)},[e]);return t},O=(e,t)=>{let r=T(e),{generate:n}=(0,c.M)(h.S,{...t,timeout:3e4}),i=(0,l.useCallback)(e=>{let{promise:t}=n({variables:{input:e,html:r()},workspaceId:(0,C.n_)()});return(0,k.OI)(t,3e4)},[n,r]);return i},H=e=>e.ind===e.history.length-1,M=e=>e.history[e.history.length-1],D={load:(e,t)=>({history:[t],ind:0}),push(e,t){return""===M(e).trim()?this.replace(e,t):{history:[...e.history,t],ind:e.history.length}},replace(e,t){let r=e.history.slice(0,-1);return{history:[...r,t],ind:r.length}},select(e,t){return H(e)&&M(e)===t?e:this.push(e,t)}},N=()=>{let e=(0,l.useRef)(!1),[t,r]=(0,l.useState)({history:[""],ind:0}),n=(0,l.useCallback)((t,n)=>{"load"===n&&r(e=>D.load(e,t)),"push"===n&&r(e=>D.push(e,t)),"update"===n&&(e.current?r(e=>D.push(e,t)):r(e=>D.replace(e,t))),"select"===n&&r(e=>D.select(e,t)),e.current="update"!==n},[]),i=(0,l.useCallback)(()=>{let{ind:e}=t;e<=0||r(e=>({...e,ind:e.ind-1}))},[t]),a=(0,l.useCallback)(()=>{let{history:e,ind:n}=t;n>=e.length-1||r(e=>({...e,ind:e.ind+1}))},[t]),{ind:o,history:s}=t;return{prompt:s[o]||"",addPrompt:n,promptPageInfo:{curr:o+1,total:s.length,canGoNext:o<s.length-1,canGoPrev:o>0},nextPrompt:a,prevPrompt:i}},L=()=>{let[e,t]=(0,A.I)("aiImageRatings",{}),r=(0,l.useCallback)((r,n)=>{r.savedMediaId&&(e[r.savedMediaId]=n,t(e))},[]),n=(0,l.useCallback)(t=>!t.savedMediaId||!!e[t.savedMediaId],[]);return{saveImageRating:r,hasRatedImage:n}},z=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[r,n]=(0,l.useState)(void 0);(0,l.useEffect)(()=>{var r,i;if(!t)return;let a=null==e?void 0:null===(i=e.getAttributes("document"))||void 0===i?void 0:null===(r=i.aiOptions)||void 0===r?void 0:r.imageOptions;n(a)},[e,t]);let i=(0,l.useCallback)(r=>{t&&(null==e||e.commands.updateNestedAttributesAtPos(0,{aiOptions:{imageOptions:{model:r.model,generateStyle:r.style_preset,height:r.height,width:r.width}}}),n(r))},[e,t]);return{lastUsedAiImageStyles:r||{},setLastUsedAiImageStyles:i}},G=e=>{let{data:t,loading:r}=(0,u.qOp)({variables:{interactionId:e,source:"image.ai-generated",type:u.DDH.Image,first:3}}),n=(0,l.useMemo)(()=>(null==t?void 0:t.savedMedia.edges.map(e=>e.node))||[],[null==t?void 0:t.savedMedia.edges]);return{savedMedia:n,isLoading:r}},B=()=>{let e=(0,x.CG)(j.yx),t=(0,f.Y)("ai_premium_models",null==e?void 0:e.organization),r=(0,l.useCallback)(e=>(0,g.Hr)(e)&&(t||!(0,g.Om)(e)),[t]);return r},F=()=>{let[e,t]=(0,l.useState)("Theme"),[r,n]=(0,l.useState)(""),i=(0,m.ye)("aiImageGenV2"),a=[];for(let e of Object.values(_))a.push({title:e,presets:I.filter(t=>t.category===e&&(i||!t.hidden))});return{stylePresetOptions:a,style_preset:e,setStylePreset:t,stylePrompt:r,setStylePrompt:n}}},1188:function(e,t,r){r.d(t,{Ac:function(){return d},MI:function(){return h},Xc:function(){return x},k8:function(){return u},mG:function(){return p},mw:function(){return f},sK:function(){return m},yD:function(){return g}});var n=r(27875),i=r.n(n),a=r(2784),o=r(42111),l=r(26773),s=r(72263),c=r(67475);let d=100,u=8,p=200,m=30,g=1,h=3,f=e=>l.Iw[e]||l.Iw[o.VH.get("aiGeneratedImagesDefaultModel")],x=()=>{let e=(0,o.ye)("aiGeneratedImagesDefaultModel"),[t,r]=(0,a.useState)(e),[n,g]=(0,a.useState)(m),[x,b]=(0,a.useState)(h),[v,j]=(0,a.useState)((0,o.ye)("aiGeneratedImagesCount")),{prompt:y,addPrompt:w,promptPageInfo:C,nextPrompt:A,prevPrompt:k}=(0,s.jg)(),[_,S]=(0,a.useState)(""),[I,E]=(0,a.useState)("square"),{stylePresetOptions:U,stylePrompt:R,setStylePrompt:P,style_preset:T,setStylePreset:O}=(0,s.LJ)(),H=f(t),M=(null==H?void 0:H.aspectRatios[I])||l.vr,D={prompt:y,model:t,style_preset:T,stylePrompt:R,height:M.height,width:M.width,steps:i()(n,1,d),count:i()(v,1,u),negative_prompt:_,cfg_scale:i()(x,1,p)},N=(0,s.oj)();(0,a.useEffect)(()=>{N(t)||r(e)},[t,e,r,N]);let L=(0,a.useCallback)((e,t)=>{if(!e)return;let{prompt:n,height:i,width:a,style_preset:o,stylePrompt:l,cfg_scale:s,negative_prompt:d,steps:u,model:p}=e;i&&a&&(i>a?E("portrait"):i<a?E("landscape"):E("square")),n&&w(n,t),l&&P(l),o&&O((0,c.SL)(o,U).style_preset),s&&b(s),d&&S(d),u&&g(u),p&&N(p)&&r(p)},[w,O,P,U,N]);return{model:t,setModel:r,prompt:y,addPrompt:w,promptPageInfo:C,nextPrompt:A,prevPrompt:k,stylePrompt:R,setStylePrompt:P,style_preset:T,setStylePreset:O,stylePresetOptions:U,aspectRatio:I,setAspectRatio:E,imageGenerateConfig:D,count:v,setCount:j,loadImageAiParams:L,negativePrompt:_,setNegativePrompt:S,steps:n,setSteps:g,cfgScale:x,setCfgScale:b}}},68728:function(e,t,r){r.d(t,{A:function(){return v},E:function(){return b}});var n=r(52322),i=r(10625),a=r(67046),o=r(62614),l=r(332),s=r(99058),c=r(44035),d=r(39237),u=r(77533),p=r(54933),m=r(49929),g=r(87254);let h={label:()=>g.ag._({id:"DAmK+T"}),key:"All",description:()=>g.ag._({id:"Zz/1wq"})},f=[h,{label:()=>g.ag._({id:"10G8Kb"}),key:"Share",description:()=>g.ag._({id:"EVNJ2h"})},{label:()=>g.ag._({id:"SjDzTh"}),key:"ShareCommercially",description:()=>g.ag._({id:"DHhpJP"})}],x=h.key,b=e=>{var t;return null===(t=f.find(t=>t.key===e))||void 0===t?void 0:t.label()},v=e=>{let{value:t=x,onChange:r}=e;return(0,n.jsxs)(i.v,{children:[(0,n.jsx)(a.j,{w:"100%",as:o.z,boxShadow:"sm",size:"sm",variant:"plain",rightIcon:(0,n.jsx)(m.G,{icon:p.ptq}),textAlign:"left",children:b(t)}),(0,n.jsx)(l.h,{children:(0,n.jsx)(s.q,{zIndex:"tooltip",w:"350px",children:(0,n.jsx)(c._,{type:"radio",w:"100%",defaultValue:h.key,value:t,onChange:e=>r(e),children:f.map(e=>{let{key:t,label:r,description:i}=e;return(0,n.jsxs)(d.i,{value:t,children:[r(),(0,n.jsx)(u.x,{fontSize:"sm",color:"gray.400",children:i()})]},t)})})})})]})}},53345:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(52322),i=r(32899),a=r(17993),o=r(74105),l=r(20816),s=r(28535),c=r(85573),d=r(35183),u=r(97166),p=r(42946),m=r(49929),g=r(94523),h=r(5879),f=r(87254),x=r(38045),b=r(4742),v=r.n(b),j=r(2784),y=r(66028),w=r(93441),C=r(68728),A=r(14274),k=r(39877),_=r(13773),S=r(87205);let I=e=>(0,j.useCallback)(t=>{let r="".concat(A.v.API_HOST||"","/media/images/track");fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,id:t.id})})},[e]),E=e=>{let{provider:t,enablePagination:r,resultsPerPage:n}=e,[i,a]=(0,j.useState)(""),[o,l]=(0,j.useState)([]),[s,c]=(0,j.useState)(!1),[d,u]=(0,j.useState)(!1),[p,m]=(0,j.useState)(1),[g,h]=(0,j.useState)("All"),f=(0,j.useRef)(g),x=r&&o.length>0&&p<6,b=(0,j.useCallback)(async(e,r)=>{c(!0),u(!1);try{let i={license:f.current,page:r,gammaFeature:"mediaDrawer"};"bing"===t&&(i.minWidth=_.x.minWidth,i.maxWidth=_.x.maxWidth);let a=await (0,k.C)({query:e,count:n,provider:t,options:i});if(c(!1),!((null==a?void 0:a.length)>=0))throw Error("No images found");let o=a.filter(e=>(0,S.VE)(e.imageUrl));l(e=>e.concat(o))}catch(e){u(!0),c(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t,n]),v=(0,j.useCallback)(e=>{l([]),m(1),a(e),b(e,1)},[b]),y=(0,j.useCallback)(()=>{b(i,p+1),m(p+1)},[b,i,p]),w=(0,j.useCallback)(()=>{a(""),l([]),m(1)},[]),C=(0,j.useCallback)(e=>{h(e),f.current=e,w(),v(i)},[w,v,i]);return{search:v,isLoading:s,loadMore:y,canLoadMore:x,hasError:d,imageResults:o,resetResults:w,searchQuery:i,license:g,updateLicense:C}};var U=r(38035),R=r(62614),P=r(77533),T=r(47443),O=r(52929),H=r(20437),M=r(30523),D=r(67109),N=r(2689),L=r.n(N),z=r(75641),G=r(42111),B=r(50279),F=r(75009),W=r(78071),q=r(42822),V=r(11082);let Q=(0,j.memo)(e=>{let{image:t,isSelected:r,onImageClick:i,resizeThumbnail:a}=e,o=a?(0,S.SN)(t.thumbnailUrl,S.Iv):t.thumbnailUrl,l=(0,G.ye)("aiImageGenV2");return(0,n.jsxs)(R.z,{borderRadius:"base",overflow:"hidden",display:"block",variant:"ghost",width:"100%",opacity:1,textAlign:"left",pos:"relative",p:0,minH:"auto",h:"auto",_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>i(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",children:[(0,n.jsx)(F.E,{w:"100%",src:o,fallback:(0,n.jsx)(D.O,{height:l?"120px":"100px",borderRadius:"base"})}),(0,n.jsx)(W.p,{in:r,children:(0,n.jsx)(s.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,n.jsx)(q.M,{h:"100%",w:"100%",children:(0,n.jsx)(m.G,{icon:p.LEp})})})}),!t.thumbnailUrl&&(0,n.jsx)(M.P,{width:"100%",children:(0,n.jsx)(D.O,{height:"80px",borderRadius:"base"})}),(0,n.jsxs)(s.xu,{left:0,right:0,bottom:0,p:2,pos:"absolute",color:"white",fontSize:"xs",textOverflow:"ellipsis",overflow:"hidden",bg:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)",borderBottomRadius:"base",className:"attribution-container",opacity:0,transitionProperty:"common",transitionDuration:"normal",children:[t.attributionUrl&&t.credit&&(0,n.jsx)(g.kH,{label:t.credit,placement:"left",children:(0,n.jsx)(V.r,{mr:1,target:"_blank",rel:"noopener noreferrer",href:t.attributionUrl,tabIndex:-1,children:(0,n.jsx)(m.G,{transform:"shrink-4",icon:p.Xjp})})}),t.credit]})]})});Q.displayName="ImageSearchGridItem";let K=e=>{let{searchQuery:t,currentImageUrl:r,updateAttributes:i,provider:a,imageResults:o,isLoading:l,canLoadMore:c,loadMore:d,hasError:u,resultsPerPage:p,resizeThumbnails:m}=e,g=I(a),f=(0,j.useCallback)(e=>{g(e),i((0,B.C)(e,t,a))},[a,t,g,i]),x=o.map(e=>{let t=e.imageUrl.split("?")[0],i=r&&r.split("?")[0];return(0,n.jsx)(Q,{provider:a,image:e,isSelected:t===i,onImageClick:f,resizeThumbnail:m},e.id)}),b=(0,G.ye)("aiImageGenV2");return(0,n.jsxs)(U.k,{direction:"column",align:"stretch",children:[l&&0===o.length&&(0,n.jsx)(X,{resultsPerPage:p}),o.length>0&&(0,n.jsx)(z.Z,{columnsCount:b?3:2,gutter:"0.5rem",children:x}),c&&(0,n.jsx)(R.z,{variant:"plain",onClick:d,mt:4,isLoading:l,children:(0,n.jsx)(h.cC,{id:"yQ2kGp"})}),0===o.length&&!l&&(0,n.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,n.jsx)(P.x,{style:{color:"gray"},children:(0,n.jsx)(h.cC,{id:"SihI8q",values:{searchQuery:t}})})}),u&&(0,n.jsxs)(T.b,{status:"error",children:[(0,n.jsx)(O.z,{}),(0,n.jsx)(h.cC,{id:"Fkbzp8"})]})]})},X=e=>{let{resultsPerPage:t}=e,r=(0,G.ye)("aiImageGenV2");return(0,n.jsx)(H.M,{columns:r?3:2,spacing:2,children:L()(t).map((e,t)=>(0,n.jsx)(M.P,{children:(0,n.jsx)(D.O,{height:r?"120px":"100px",borderRadius:"base"})},t))})},Y=(0,x.E)(i.h),Z=e=>{let{currentImageUrl:t,updateAttributes:r,defaultQuery:i,randomQueries:x,provider:b,enablePagination:A=!0,enableSearch:k=!0,enableLicenseFilter:_=!1,resultsPerPage:S=18,resizeThumbnails:I=!1}=e,[U,R]=(0,j.useState)(""),{search:P,isLoading:T,loadMore:O,canLoadMore:H,hasError:M,imageResults:D,resetResults:N,searchQuery:L,license:z,updateLicense:G}=E({provider:b,enablePagination:A,resultsPerPage:S});(0,w.vm)(()=>{if(i){R(i),P(i);return}R(""),x?P(v()(x)||""):N()},[i,x,N,P],[b]);let B=(0,j.useCallback)(()=>{let e=v()(x);e&&P(e)},[x,P]),F=(0,w.Kt)(P,1e3);return(0,n.jsxs)(a.g,{spacing:4,align:"stretch",translate:"no",children:[(0,n.jsx)(g.kH,{placement:"top",label:(0,n.jsx)(h.cC,{id:"wj1Zq8"}),isDisabled:k,children:(0,n.jsxs)(o.B,{size:"md",children:[(0,n.jsx)(l.Z,{pointerEvents:"none",children:(0,n.jsx)(s.xu,{color:"gray.400",children:(0,n.jsx)(m.G,{icon:p.wn1})})}),(0,n.jsx)(c.I,{isDisabled:!k,placeholder:f.ag._({id:"6YBjmV"}),value:U,onChange:e=>{R(e.target.value),F(e.target.value)},"data-testid":"image-search-input"}),x&&(0,n.jsx)(l.x,{children:(0,n.jsx)(g.kH,{placement:"top",label:(0,n.jsx)(h.cC,{id:"OVjfHO"}),children:(0,n.jsx)(Y,{icon:(0,n.jsx)(m.G,{icon:p.RJo}),"aria-label":"Surprise me",variant:"ghost",onClick:B,size:"sm",whileTap:{y:"-5px"},onMouseDown:y.br})})})]})}),_&&(0,n.jsxs)(d.NI,{children:[(0,n.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(h.cC,{id:"6TSHCF"})}),(0,n.jsx)(C.A,{value:z,onChange:G})]}),L&&(0,n.jsx)(K,{updateAttributes:r,currentImageUrl:t,searchQuery:L,provider:b,imageResults:D,isLoading:T,canLoadMore:H,loadMore:O,hasError:M,resultsPerPage:S,resizeThumbnails:I})]})}},13833:function(e,t,r){r.d(t,{v:function(){return k},ft:function(){return A}});var n=r(52322),i=r(17993),a=r(74409),o=r(29117),l=r(85573),s=r(62614),c=r(47443),d=r(52929),u=r(5879),p=r(87254),m=r(2784),g=r(91994),h=r(47968),f=r(87205),x=r(15425);let b={thumbnail:void 0,embed:void 0,meta:void 0,sourceUrl:void 0},v=async e=>{var t,r,n,i,a,o;let l=await fetch("https://cdn.iframe.ly/api/iframely/?url=".concat(encodeURIComponent(e),"&key=").concat("a68bac8b6624d46b6d0ba46e5b3f8971","&iframe=1&omit_script=1")),s=await l.json();if(console.debug("[Iframely]",s),s.error)return Promise.reject(s);let{html:c,links:d,meta:u}=s,{icon:p,player:m,reader:g,app:h,thumbnail:f}=d,x=m||g||h,b=x?x.filter(e=>"text/html"===e.type&&e.href)[0]||x[0]:null,v=u&&!u.xframe&&(!u.csp||!u.csp.includes("frame-ancestors"));return{sourceUrl:(null==u?void 0:u.canonical)||e,embed:b?{url:b.href,html:c,height:null===(t=b.media)||void 0===t?void 0:t.height,width:(null===(r=b.media)||void 0===r?void 0:r.width)||(null===(n=b.media)||void 0===n?void 0:n["max-width"]),aspectRatio:null===(i=b.media)||void 0===i?void 0:i["aspect-ratio"]}:v?{url:e}:void 0,meta:{...u||{},icon:p&&p[0]?p[0].href:void 0},thumbnail:f&&f[0]?{src:f[0].href,height:null===(a=f[0].media)||void 0===a?void 0:a.height,width:null===(o=f[0].media)||void 0===o?void 0:o.width}:void 0}};var j=r(2090),y=r(6038);let w=e=>{try{var t,r;let n=new DOMParser().parseFromString(e,"text/html");return(null===(t=n.querySelector("iframe"))||void 0===t?void 0:t.src)||(null===(r=n.querySelector("blockquote"))||void 0===r?void 0:r.cite)||!1}catch(e){return!1}},C=async e=>{var t,r,n,i,a;let o,l;try{o=await v(e)}catch(t){if(403===t.status||404===t.status||415===t.status){for(let{key:t,urlRegex:r,canEmbedPrivate:n,label:i,defaultDisplayStyle:a}of y.yC)if(r&&e.match(r)&&n)return{...b,source:t,proxy:!1,url:e,meta:{title:p.ag._({id:"SuoEIZ"})},sourceUrl:e,displayStyle:a||"inline"}}throw Error("Code: ".concat(t.status,". Message: ").concat(t.error))}if(!o)throw Error("No link metadata found");for(let{key:e,urlRegex:t}of y.yC)if(t&&(null===(i=o.sourceUrl)||void 0===i?void 0:i.match(t))){l=e;break}if(l){let e=y.zX[l];return{...b,...o,source:l,proxy:!1,url:(null===(a=o.embed)||void 0===a?void 0:a.url)||o.sourceUrl,displayStyle:e.defaultDisplayStyle}}return(null===(t=o.meta)||void 0===t?void 0:t.medium)=="audio"||(null===(r=o.meta)||void 0===r?void 0:r.medium)==="video"?{...b,...o,source:y.wj.key}:(null===(n=o.embed)||void 0===n?void 0:n.url)?{...b,...o,source:y.Hw.key,proxy:!1,url:o.embed.url}:{...b,...o,source:y.Hw.key,proxy:!0,url:e}},A=async(e,t)=>await C(e).then(e=>(t(e),e)).then(e=>_(e,t)),k=e=>{let{currentUrl:t="",updateAttributes:r,handleSubmit:g,handleDataSubmit:h,placeholder:b,noHeader:v}=e,[j,y]=(0,m.useState)(t||""),[C,k]=(0,m.useState)(),_=j!==t;(0,m.useEffect)(()=>{t&&y(t)},[t]),(0,m.useEffect)(()=>{k(void 0)},[j]);let S=(0,m.useCallback)(e=>{if(0===e.indexOf("data:")){if(h){try{(0,f.v9)(e)}catch(e){k(p.ag._({id:"YqH0TR"}));return}return h(e)}return void k(p.ag._({id:"YqH0TR"}))}let t=w(e);if(t&&(e=t),!(0,x.kr)(e)&&(e="https://"+e,!(0,x.jv)(e))){k(p.ag._({id:"YqH0TR"}));return}return g?g(e):r?A(e,r).catch(e=>{console.error("Error fetching URL",e),k(p.ag._({id:"dZyJFB"}))}):void console.error("No submit handler provided")},[h,g,r]),I=(0,m.useCallback)(()=>{S(j.trim())},[S,j]),E=(0,m.useCallback)(e=>{if(t)return;let r=e.clipboardData.getData("text/plain");S(r.trim())},[t,S]);return(0,n.jsxs)(i.g,{align:"flex-start",spacing:4,w:"100%",children:[!v&&(0,n.jsx)(a.X,{size:"md",children:(0,n.jsx)(u.cC,{id:"D89ve+"})}),(0,n.jsxs)(o.U,{align:"flex-start",spacing:2,w:"100%",children:[(0,n.jsx)(l.I,{placeholder:b,onKeyDown:e=>{"Enter"===e.key&&I()},onPaste:E,value:j,onChange:e=>y(e.target.value),flex:1,"data-testid":"url-input"}),(0,n.jsx)(s.z,{onClick:I,isDisabled:!_,children:(0,n.jsx)(u.cC,{id:"4pSxwB"})})]}),C&&(0,n.jsxs)(c.b,{status:"error",children:[(0,n.jsx)(d.z,{}),C]})]})},_=async(e,t)=>{let r=(0,g.bh)().getState(),n=(0,h.KV)(r);if(!n){console.error("[uploadIframelyThumbnail] No orgId specified, bailing");return}let i={...e.thumbnail},a=i.src;if(a&&void 0!==i)try{await (0,j.WY)(a,n,{onUploadComplete:e=>(i&&(i.src=e.src,i.width=e.meta.width,i.height=e.meta.height,t({thumbnail:i})),Promise.resolve()),onOriginalFileUpload:e=>(i&&(i.src=e.src,i.width=e.meta.width,i.height=e.meta.height,t({thumbnail:i})),Promise.resolve()),onUploadFailed:e=>(console.error("[iframely] Thumbnail upload error: ",e),Promise.reject())},"iframelyThumbnail")}catch(e){console.error("[iframely] Thumbnail upload error: ",e)}}},26433:function(e,t,r){r.d(t,{u:function(){return u}});var n=r(52322),i=r(47443),a=r(52929),o=r(17993),l=r(91710),s=r(2784),c=r(2090);r(65331),r(41779);var d=r(87254);let u=e=>{let{orgId:t,uploadType:r,editType:u,onUploadStart:p,onUploadSuccess:m,onUploadFailed:g,showTip:h=!0,dropHereText:f=d.ag._({id:"mgPDos",values:{0:"%{browse}"}}),customHeight:x,customFontSize:b,maxFilesAllowed:v=1,templateId:j,sx:y}=e,[w,C]=(0,s.useState)(""),A=(0,s.useMemo)(()=>c.ND.createUppyInstance(t,{onUploadStart:p,onOriginalFileUpload:m,onUploadComplete:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];m(...t),A.cancelAll()},onUploadFailed:g,setErrorMessage:C},u,v,r,j),[t,u,r,v,j,m,p,g]);return(0,n.jsxs)(o.g,{align:"stretch",spacing:4,fontSize:b||void 0,sx:y,children:[(0,n.jsx)(l.v0,{width:"100%",height:x||"100%",note:h?d.ag._({id:"x4Ts51"}):"",uppy:A,locale:{strings:{dropHereOr:f,browse:d.ag._({id:"wZ9s+A"})}}}),w&&(0,n.jsxs)(i.b,{status:"error",children:[(0,n.jsx)(a.z,{}),w]})]})}},99787:function(e,t,r){r.d(t,{$5:function(){return a.$5},BF:function(){return a.BF},BM:function(){return a.BM},BR:function(){return a.BR},Bo:function(){return a.Bo},DN:function(){return a.DN},DU:function(){return a.DU},Ds:function(){return a.Ds},F6:function(){return a.F6},FH:function(){return a.FH},Ge:function(){return n.Ge},Hw:function(){return a.Hw},LE:function(){return a.LE},N$:function(){return n.N$},ND:function(){return n.ND},NX:function(){return a.NX},QR:function(){return a.QR},QT:function(){return a.QT},TQ:function(){return a.TQ},Vy:function(){return a.Vy},WY:function(){return n.WY},bD:function(){return a.bD},bO:function(){return a.bO},cT:function(){return n.cT},eK:function(){return a.eK},hq:function(){return a.hq},iL:function(){return a.iL},in:function(){return a.in},jS:function(){return a.jS},jt:function(){return a.jt},oC:function(){return a.oC},p7:function(){return a.p7},pK:function(){return n.pK},qz:function(){return a.qz},ud:function(){return a.ud},un:function(){return i.u},w4:function(){return a.w4},wj:function(){return a.wj},zX:function(){return a.zX},zs:function(){return a.zs}});var n=r(2090);r(53345);var i=r(26433),a=r(6038)},78704:function(e,t,r){r.d(t,{N:function(){return eG}});var n=r(54933),i=r(87254),a=r(52322),o=r(17993),l=r(38035),s=r(75009),c=r(47443),d=r(52929),u=r(74444),p=r(29117),m=r(74409),g=r(62614),h=r(49259),f=r(87436),x=r(95897),b=r(28535),v=r(89511),j=r(11121),y=r(42946),w=r(49929),C=r(94523),A=r(5879),k=r(2784),_=r(11355),S=r(31490),I=r(14764),E=r(85420),U=r(97763),R=r(42111),P=r(94199),T=r(20437),O=r(30523),H=r(67109),M=r(2689),D=r.n(M),N=r(75641),L=r(78071),z=r(42822),G=r(32899),B=r(87205);let F=(0,k.memo)(e=>{let{image:t,isSelected:r,onImageClick:n,resizeThumbnail:i,isDeleting:o,onDeleteImage:l,h:c,w:d}=e,u=i?(0,B.SN)(t.attrs.src,B.Iv,t.attrs.meta):t.attrs.src,p=(0,B.Ly)(u),m=(0,R.ye)("aiImageGenV2");return(0,a.jsx)(O.P,{children:(0,a.jsxs)(g.z,{borderRadius:"base",display:"block",variant:"ghost",width:d?"".concat(d,"px"):"100%",opacity:1,height:m?"auto":"100px",minHeight:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),backgroundImage:m?"":p,backgroundRepeat:m?"":"no-repeat",backgroundSize:m?"":"cover",backgroundPosition:m?"":"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},isDisabled:o,"data-testid":"image-search-grid-item",role:"group",children:[m&&(0,a.jsx)(s.E,{w:"100%",src:u,fallback:(0,a.jsx)(H.O,{height:"120px",borderRadius:"base"})}),(0,a.jsx)(L.p,{in:r,children:(0,a.jsx)(b.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,a.jsx)(z.M,{h:"100%",w:"100%",children:(0,a.jsx)(w.G,{icon:y.LEp})})})}),!r&&(0,a.jsx)(G.h,{isRound:!0,size:"xs","aria-label":"Delete image",onClick:e=>{e.stopPropagation(),l(t.id)},color:"red.500",icon:(0,a.jsx)(w.G,{icon:y.XAH}),zIndex:100,pos:"absolute",top:1,display:"none",bg:"0 none",bgColor:"red.50",right:1,_hover:{color:"red.600",bg:"0 none",bgColor:"red.200"},_groupHover:{display:"block"}}),!t.attrs.src&&(0,a.jsx)(O.P,{width:"100%",children:(0,a.jsx)(H.O,{height:"80px",borderRadius:"base"})})]})},t.id)});F.displayName="AIImageHistoryItem";let W=e=>{let{onSelectImage:t,savedMediaId:r,imageResults:n,onDeleteImage:i,deletingId:o,isLoading:s,canLoadMore:c,isLoadingMore:d,loadMore:u,resultsPerPage:p,resizeThumbnails:m}=e,h=(0,R.ye)("aiImageGenV2"),f=n.map(e=>(0,a.jsx)(F,{image:e,isSelected:e.id===r,isDeleting:e.id===o,onDeleteImage:i,onImageClick:t,resizeThumbnail:m},e.id));return(0,a.jsxs)(l.k,{direction:"column",align:"stretch",children:[h&&(0,a.jsx)(N.Z,{columnsCount:3,gutter:"0.5rem",children:f}),!h&&(0,a.jsxs)(T.M,{gap:2,columns:3,children:[s&&(0,a.jsx)(q,{resultsPerPage:p}),f]}),c&&(0,a.jsx)(g.z,{variant:"plain",onClick:u,mt:4,isLoading:d,children:(0,a.jsx)(A.cC,{id:"yQ2kGp"})})]})},q=e=>{let{resultsPerPage:t}=e;return(0,a.jsx)(a.Fragment,{children:D()(t).map((e,t)=>(0,a.jsx)(O.P,{children:(0,a.jsx)(H.O,{height:"100px",borderRadius:"base"})},t))})};var V=r(77533),Q=r(43297),K=r(29494),X=r(75768);let Y=(0,k.memo)(e=>{var t;let{attrs:r,onRateImage:n}=e,s=null===(t=r.aiParams)||void 0===t?void 0:t.interactionId,[c,d]=(0,k.useState)(null),[u,p]=(0,k.useState)(""),[m,h]=(0,k.useState)("rate");(0,k.useEffect)(()=>{r.savedMediaId&&(h("rate"),p(""),d(null))},[r.savedMediaId]);let f=(0,k.useCallback)(e=>{d(e),h("feedback"),n(e)},[n]),x=(0,k.useCallback)(()=>{h("thanks"),setTimeout(()=>{h("hide"),p(""),d(null)},3e3)},[]),b=(0,k.useCallback)(()=>{x()},[x]),v=(0,k.useCallback)(()=>{var e;(null===(e=r.aiParams)||void 0===e?void 0:e.interactionId)&&((0,S.Lt)({feedback:u,aiParams:r.aiParams,imageUrl:r.src,interactionId:r.aiParams.interactionId}),x())},[r,u,x]);return s&&"hide"!==m?"thanks"===m?(0,a.jsx)(l.k,{position:"absolute",zIndex:1,bottom:1,p:2,right:1,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,a.jsx)(V.x,{fontSize:"xs",children:(0,a.jsx)(A.cC,{id:"yOrM5+"})})}):(0,a.jsxs)(o.g,{position:"absolute",bottom:2,zIndex:"sticky",right:2,align:"flex-end",spacing:1,children:["feedback"===m&&(0,a.jsx)(l.k,{p:2,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,a.jsxs)(Q.K,{alignItems:"flex-end",children:[(0,a.jsx)(K.g,{value:u,onChange:e=>p(e.target.value),fontSize:"xs",placeholder:i.ag._({id:"eYeGuP"}),p:1,px:2,borderRadius:"0"}),(0,a.jsxs)(X.h,{size:"xs",children:[(0,a.jsx)(g.z,{variant:"ghost",onClick:b,children:(0,a.jsx)(A.cC,{id:"6Uau97"})}),(0,a.jsx)(g.z,{variant:"solid",onClick:v,children:(0,a.jsx)(A.cC,{id:"1m41/U"})})]})]})}),(0,a.jsxs)(X.h,{size:"sm",children:[(0,a.jsx)(C.kH,{label:(0,a.jsx)(A.cC,{id:"kR82DG"}),placement:"top",children:(0,a.jsx)(G.h,{"aria-label":"thumbs down",color:"poor"===c?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===c?"red.600":"transparent",bg:"poor"===c?"red.100":void 0,_hover:{bg:"poor"===c?"red.200":"red.100"},icon:(0,a.jsx)(w.G,{icon:y.bam}),onClick:()=>{f("poor")}})}),(0,a.jsx)(C.kH,{label:(0,a.jsx)(A.cC,{id:"y1GvbS"}),placement:"top",children:(0,a.jsx)(G.h,{"aria-label":"thumbs up",color:"good"===c?"green.600":void 0,borderWidth:"1px",borderColor:"good"===c?"green.600":"transparent",bg:"good"===c?"green.100":void 0,_hover:{bg:"good"===c?"green.200":"green.100"},icon:(0,a.jsx)(w.G,{icon:y.u8Q}),onClick:()=>{f("good")}})})]})]}):null});Y.displayName="AIImageRating";var Z=r(35183),J=r(10625),$=r(67046),ee=r(99058),et=r(44035),er=r(39237),en=r(26773),ei=r(1188);let ea={square:y.pL1,portrait:y.j8N,landscape:y.r9b},eo=(0,k.memo)(e=>{let{value:t,setValue:r,isDisabled:n,model:i}=e,o=(0,ei.mw)(i),s=(null==o?void 0:o.aspectRatios)||{},c=s[t]||en.vr;return(0,a.jsx)(Z.NI,{children:(0,a.jsxs)(J.v,{children:[(0,a.jsx)($.j,{as:g.z,variant:"plain",isDisabled:n,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,a.jsx)(w.G,{icon:y.ptq}),boxShadow:"none",children:(0,a.jsxs)(p.U,{spacing:2,children:[(0,a.jsx)(l.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,a.jsx)(w.G,{icon:ea[c.key],fixedWidth:!0})}),(0,a.jsx)(V.x,{as:"span",flex:1,children:c.name()})]})}),(0,a.jsx)(ee.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",children:(0,a.jsx)(et._,{value:t,type:"radio",onChange:e=>{r(e)},children:Object.values(s).map(e=>(0,a.jsx)(er.i,{value:e.key,children:(0,a.jsxs)(p.U,{spacing:2,children:[(0,a.jsx)(l.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,a.jsx)(w.G,{icon:ea[e.key],fixedWidth:!0})}),(0,a.jsx)(V.x,{as:"span",flex:1,children:e.name()})]})},e.key))})})]})})});eo.displayName="AspectRatioSelect";var el=r(72263),es=r(62801),ec=r(67475),ed=r(25566),eu=r(31866),ep=r(63176);let em=e=>{let{enabled:t,isGenerating:r,negativePrompt:n,setNegativePrompt:i,count:l,setCount:s,steps:c,setSteps:d,cfgScale:u,setCfgScale:g,model:h}=e,{usesNegativePrompt:f,usesSteps:x,usesCFG:b}={usesNegativePrompt:"stable-diffusion-xl-v1-0"===h||"imagen-2"===h,usesSteps:"stable-diffusion-xl-v1-0"===h,usesCFG:"stable-diffusion-xl-v1-0"===h||"imagen-2"===h};return(0,a.jsxs)(o.g,{align:"stretch",spacing:3,children:[f&&(0,a.jsxs)(o.g,{align:"stretch",spacing:2,children:[(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"cwxGog"})}),(0,a.jsx)(K.g,{isDisabled:!t||r,value:n,onChange:e=>{i(e.target.value)},rows:3})]}),(0,a.jsxs)(T.M,{columns:2,gap:2,children:[(0,a.jsxs)(p.U,{children:[(0,a.jsx)(C.kH,{placement:"top",label:(0,a.jsx)(A.cC,{id:"pKdwsO",values:{MAX_COUNT:ei.k8,DEFAULT_COUNT:ei.yD}}),children:(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"wBMjJ2"})})}),(0,a.jsx)(ep.Y2,{defaultValue:l,value:l||"",min:1,max:ei.k8,isDisabled:!t||r,onChange:(e,t)=>{s(t)},children:(0,a.jsx)(ep.zu,{paddingInline:2})})]}),x&&(0,a.jsxs)(p.U,{children:[(0,a.jsx)(C.kH,{placement:"top",label:(0,a.jsx)(A.cC,{id:"5H4Pmz",values:{MAX_STEPS:ei.Ac,DEFAULT_STEPS:ei.sK}}),children:(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"A9onc2"})})}),(0,a.jsx)(ep.Y2,{defaultValue:c,value:c||"",min:1,max:ei.Ac,isDisabled:!t||r,onChange:(e,t)=>{d(t)},children:(0,a.jsx)(ep.zu,{paddingInline:2})})]}),b&&(0,a.jsxs)(p.U,{children:[(0,a.jsx)(C.kH,{placement:"top",label:(0,a.jsx)(A.cC,{id:"Hcpaw+",values:{MAX_CFG_SCALE:ei.mG,DEFAULT_CFG_SCALE:ei.MI}}),children:(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"hsYa9i"})})}),(0,a.jsx)(ep.Y2,{defaultValue:u,value:u||"",min:1,max:ei.mG,isDisabled:!t||r,onChange:(e,t)=>{g(t)},children:(0,a.jsx)(ep.zu,{paddingInline:2})})]})]})]})};var eg=r(82642),eh=r(70065),ef=r(55478),ex=r(92850),eb=r(26468),ev=r(22226),ej=r(66028);let ey=e=>{var t,r;let{currentAttributes:n,...o}=e,l=(0,eh.p)(),c=(0,k.useCallback)(async e=>{try{let t=document.createElement("a");t.href=e,t.target="_blank",t.download="image.jpg",document.body.appendChild(t),t.click(),document.body.removeChild(t),l({title:(0,a.jsx)(A.cC,{id:"BZBUfX"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}catch(e){console.error(e),l({title:(0,a.jsx)(A.cC,{id:"4+qb0c"}),description:(0,a.jsx)(A.cC,{id:"XLO6fp"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l]),{isOpen:d,onOpen:u,onClose:p}=(0,ef.q)();return(0,a.jsxs)(X.h,{size:"sm",...o,children:[(0,a.jsx)(C.kH,{label:(0,a.jsx)(A.cC,{id:"dhu12h"}),placement:"top",children:(0,a.jsx)(G.h,{"aria-label":"download image",borderWidth:"1px",icon:(0,a.jsx)(w.G,{icon:y.fuY}),onClick:()=>c(null!==(t=n.src)&&void 0!==t?t:"")})}),(0,a.jsx)(C.kH,{label:(0,a.jsx)(A.cC,{id:"AWOSPo"}),placement:"top",children:(0,a.jsx)(G.h,{"aria-label":"zoom in",borderWidth:"1px",icon:(0,a.jsx)(w.G,{icon:y.q9v}),onClick:u})}),d&&(0,a.jsxs)(ex.u_,{isOpen:d,size:"6xl",onClose:p,isCentered:!0,children:[(0,a.jsx)(eb.Z,{bg:"blackAlpha.900"}),(0,a.jsxs)(ev.h,{width:"fit-content",children:[(0,a.jsx)(b.xu,{position:"absolute",right:2,top:2,zIndex:"toast",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,a.jsx)(G.h,{"aria-label":i.ag._({id:"8qZ5De"}),colorScheme:"gray",size:"md",onClick:p,onMouseDown:ej.br,icon:(0,a.jsx)(eg.T,{})})}),(0,a.jsx)(s.E,{src:null!==(r=n.src)&&void 0!==r?r:"",objectFit:"contain",rounded:"lg",maxH:"90vh",maxW:"90vw"})]})]})]})};var ew=r(82729),eC=r(6238),eA=r.n(eC),ek=r(75320);let e_=()=>{let{wA:e,hA:t,wBCD:r,hBCD:n}=eI({vpWidth:624,gap:8,ratioW:1024,ratioH:1024,thumbCount:3}),i=Array.from({length:3},(e,t)=>(0,a.jsx)(ew.o,{ratio:1,w:r,h:n,children:(0,a.jsx)(H.O,{w:r,h:n})},t));return(0,a.jsxs)(l.k,{dir:"row",w:"100%",height:"full",gap:2,alignItems:"center",justifyContent:"center",children:[(0,a.jsx)(l.k,{justify:"center",pos:"relative",overflow:"visible",flex:"2",children:(0,a.jsx)(ew.o,{w:e,h:t,children:(0,a.jsx)(H.O,{w:e,h:t})})}),(0,a.jsx)(l.k,{flex:"1",alignItems:"center",justifyContent:"center",direction:"column",gap:2,children:i})]})},eS=e=>{let{imagesMatchingInteractionId:t,currentAttributes:r,isGenerating:n,selectedSavedMediaId:i,deletingId:o,hasRatedImage:c,deleteImage:d,selectImage:u,onRateImage:p}=e,[m,g]=(0,k.useState)({wA:0,hA:0,wBCD:0,hBCD:0}),{ref:h,width:f}=(0,ek.h)([r.src]),x=t.length<=1||eE(t);(0,k.useEffect)(()=>{var e,n,i,a;if((null==r?void 0:null===(e=r.meta)||void 0===e?void 0:e.width)&&(null==r?void 0:null===(n=r.meta)||void 0===n?void 0:n.height)){let e=eI({vpWidth:f||624,gap:8,ratioW:(null==r?void 0:null===(i=r.meta)||void 0===i?void 0:i.width)||1024,ratioH:(null==r?void 0:null===(a=r.meta)||void 0===a?void 0:a.height)||1024,thumbCount:t.length});(e.wA!==m.wA||e.hA!==m.hA||e.wBCD!==m.wBCD||e.hBCD!==m.hBCD)&&g(e)}},[r,t,f,m]);let b=t.map(e=>(0,a.jsx)(ew.o,{ratio:m.wBCD/m.hBCD,w:m.wBCD,h:m.hBCD,transition:"all 0.2s",children:n?(0,a.jsx)(H.O,{w:m.wBCD,h:m.hBCD}):(0,a.jsx)(F,{image:e,isSelected:e.id===i,isDeleting:e.id===o,onDeleteImage:d,onImageClick:u,resizeThumbnail:!0,w:m.wBCD,h:m.hBCD},e.id)},e.id));return n?(0,a.jsx)(e_,{}):(0,a.jsxs)(l.k,{dir:"row",w:"100%",height:"full",ref:h,gap:2,alignItems:"center",justifyContent:"center",children:[(0,a.jsxs)(l.k,{justifyContent:"center",pos:"relative",overflow:"visible",flex:"2",children:[(0,a.jsx)(ew.o,{w:m.wA,h:m.hA,transition:"all 0.2s",children:(0,a.jsx)(s.E,{h:m.hA,w:m.wA,objectFit:"contain",src:r.src||void 0,fallbackSrc:r.tempUrl||void 0,alt:"",borderRadius:"md"})}),(0,a.jsx)(ey,{currentAttributes:r,position:"absolute",bottom:2,zIndex:"sticky",left:2}),!c(r)&&(0,a.jsx)(Y,{attrs:r,onRateImage:p})]}),!x&&(0,a.jsx)(l.k,{flex:"1",alignItems:"center",justifyContent:"center",direction:"column",gap:2,children:b})]})},eI=e=>{let{vpWidth:t,gap:r,ratioW:n,ratioH:i,thumbCount:a}=e,o=4;2===a&&(o=3);let l=t/o*(o-1),s=l*i/n;return{wA:Math.floor(l),hA:Math.floor(s),wBCD:Math.floor(t-l-r),hBCD:Math.floor((s-(a-1)*r)/a)}};eA()(eI);let eE=e=>{let t=new Set(e.map(e=>e.attrs.meta.width/e.attrs.meta.height));return t.size>1};var eU=r(9883),eR=r(54326),eP=r(2338),eT=r(97217),eO=r(50250),eH=r(82713),eM=r(14274);let eD=async e=>{let{imageUrl:t,upscaleFactor:r}=e,n="".concat(eM.v.API_HOST||"https://api.gamma.app","/media/images/upscale"),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t,upscaleFactor:r})});if(!i.ok){let e=await i.json(),t="".concat(e.error,": ").concat(e.message);throw Error(t,e)}let a=await i.json();return a.data},eN=e=>{let{canGenerate:t,isEnhancingPrompt:r,images:n,canLoadMore:l,isLoadingMore:s,loadMore:c}=e,{isOpen:d,onOpen:u,onClose:h}=(0,ef.q)(),[f,x]=(0,k.useState)([]),[b,v]=(0,k.useState)(2),[j,y]=(0,k.useState)(!1),[w,_]=(0,k.useState)(!1),S=(0,eh.p)(),I=(0,k.useCallback)(e=>{x(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},[]),E=(0,k.useCallback)(()=>{w?x([]):x(n.map(e=>e.id)),_(!w)},[n,w]),U=(0,k.useCallback)(async e=>{let t=atob(e),r=Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let n=new Uint8Array(r),i=new Blob([n],{type:"image/jpeg"}),a=window.URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download="image.jpg",o.click()},[]),R=(0,k.useCallback)(async()=>{y(!0);let e=n.filter(e=>f.includes(e.id)),t=1;await Promise.all(e.map(async e=>{let r=await eD({imageUrl:e.attrs.src,upscaleFactor:b});U(r),S({title:"Image ".concat(t," downloaded"),status:"success",duration:3e3,isClosable:!0}),t++})),y(!1)},[n,f,b,y,S,U]);return(0,a.jsxs)(o.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(g.z,{variant:"outline",isDisabled:!t||r,onClick:u,px:12,children:(0,a.jsx)(A.cC,{id:"DN9OsQ"})}),(0,a.jsxs)(ex.u_,{isOpen:d,onClose:h,size:"2xl",scrollBehavior:"inside",children:[(0,a.jsx)(eb.Z,{}),(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(eR.x,{children:"Select images to upscale and download"}),(0,a.jsx)(eP.o,{}),(0,a.jsxs)(eT.f,{children:[(0,a.jsx)(T.M,{gap:2,columns:5,children:n.map(e=>(0,a.jsx)(eL,{image:e,isSelected:f.includes(e.id),onSelectImage:I},e.id))}),l&&(0,a.jsx)(g.z,{variant:"plain",onClick:c,mt:4,isLoading:s,children:(0,a.jsx)(A.cC,{id:"yQ2kGp"})})]}),(0,a.jsxs)(eO.m,{justifyContent:"space-between",children:[(0,a.jsxs)(p.U,{spacing:2,children:[(0,a.jsx)(eH.X,{checked:w,onChange:E}),(0,a.jsx)(V.x,{size:"sm",children:(0,a.jsx)(A.cC,{id:"wgNoIs"})})]}),(0,a.jsxs)(p.U,{spacing:4,children:[(0,a.jsx)(C.kH,{placement:"top",label:(0,a.jsx)(A.cC,{id:"UiTWCg"}),children:(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"yT2JRA"})})}),(0,a.jsxs)(g.z,{variant:"solid",mr:3,onClick:R,isLoading:j,isDisabled:0===f.length,children:["Upscale and download",f.length>0&&" "+i.ag._({id:"nJw77c",values:{0:f.length}})]})]})]})]})]})]})},eL=e=>{let{image:t,isSelected:r,onSelectImage:n}=e,i=(0,B.Ly)(t.attrs.src);return(0,a.jsx)(O.P,{children:(0,a.jsx)(g.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),backgroundImage:i,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",role:"group",children:(0,a.jsx)(L.p,{in:r,children:(0,a.jsx)(b.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,a.jsx)(z.M,{h:"100%",w:"100%",children:(0,a.jsx)(w.G,{icon:y.LEp})})})})})},t.id)},ez=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{prompt:""},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;let{generateStyle:r,model:n}=t;return{...e,style_preset:(null==e?void 0:e.style_preset)||r,model:(null==e?void 0:e.model)||n,height:(null==e?void 0:e.height)||t.height,width:(null==e?void 0:e.width)||t.width}},eG={key:"image.ai-generated",Panel:e=>{var t,r;let{currentAttributes:n,updateAttributes:T,editor:O}=e,{hasEnoughCreditsToGenerateImage:H}=(0,U.qO)(),M=(0,R.ye)("aiGeneratedImagesAdvancedOptions"),D=(0,R.ye)("aiImageGenV2"),N=null==O?void 0:O.isSiteNavbarEditor,{lastUsedAiImageStyles:L,setLastUsedAiImageStyles:z}=(0,el.ci)(O,!N),{prompt:G,addPrompt:F,promptPageInfo:q,nextPrompt:V,prevPrompt:Q,count:K,setCount:X,model:Z,setModel:J,style_preset:$,setStylePreset:ee,stylePrompt:et,setStylePrompt:er,stylePresetOptions:en,aspectRatio:ea,setAspectRatio:ep,imageGenerateConfig:eg,loadImageAiParams:eh,negativePrompt:ef,setNegativePrompt:ex,steps:eb,setSteps:ev,cfgScale:ej,setCfgScale:ew}=(0,ei.Xc)(),eC=(0,eu.b)(O),eA=(0,k.useCallback)(e=>{eh(e.attrs.aiParams,"select"),T({tempUrl:(0,B.SN)(e.attrs.src,B.Iv,e.attrs.meta),...e.attrs}),O&&eC(null==O?void 0:O.state.selection.from)},[O,eh,eC,T]),{generate:ek,isGenerating:e_,isLoadingMore:eI,hasError:eE,imageResults:eR,loadMore:eP,canLoadMore:eT,errorMessage:eO,deleteImage:eH,deletingId:eM}=(0,el.Qo)({selectImage:eA}),eD="image.ai-generated"===n.source,eL=n.savedMediaId,eG=eD?n.src:void 0;(0,k.useEffect)(()=>{var e;if(D){let e=ez(n.aiParams,L);eh(e,"load")}else eD&&(null===(e=n.aiParams)||void 0===e?void 0:e.prompt)&&eh(n.aiParams,"load");!eD&&n.query&&F(n.query,"load")},[L]);let eB=(0,k.useRef)(null);(0,k.useEffect)(()=>{setTimeout(()=>{var e;null===(e=eB.current)||void 0===e||e.focus()},200)},[]);let eF=(0,k.useCallback)(()=>{if(eB.current){var e;eB.current.scrollTop=null===(e=eB.current)||void 0===e?void 0:e.scrollHeight}},[]),[eW,eq]=(0,k.useState)(!1),eV=(0,el.ec)(O,{onStart(){F("","push")},onContent(e){F(e,"update"),eF()}}),eQ=(0,k.useCallback)(()=>{eW||(eq(!0),eV(G).catch(e=>{console.error("Error enhancing AI image prompt",e)}).finally(()=>{eq(!1)}))},[eV,eW,G]);(0,k.useEffect)(()=>{eG||!O||O.isSiteNavbarEditor||eQ()},[O]);let eK=(0,k.useCallback)(()=>{eW||e_||(0===G.trim().length?(eq(!0),eV("").then(e=>{ek({...eg,prompt:e})}).catch(e=>{console.error("Error enhancing AI image prompt",e)}).finally(()=>{eq(!1)})):ek(eg),D&&z({...eg,height:eg.height,width:eg.width}))},[eV,ek,D,eg,eW,e_,G,z]),eX=(0,U.YO)(eK,"generateImage",ed.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),eY=(0,k.useCallback)(e=>{"Enter"===e.key&&e.metaKey&&(e.preventDefault(),eX()),e.stopPropagation()},[eX]),{saveImageRating:eZ,hasRatedImage:eJ}=(0,el.S8)(),e$=(0,k.useCallback)(e=>{var t;(null===(t=n.aiParams)||void 0===t?void 0:t.interactionId)&&((0,S.Io)({rating:e,aiParams:n.aiParams,imageUrl:n.src,interactionId:n.aiParams.interactionId}),eZ(n,e))},[n,eZ]),e0=!!(null===(t=n.aiParams)||void 0===t?void 0:t.interactionId),{savedMedia:e1}=(0,el.Rq)((null===(r=n.aiParams)||void 0===r?void 0:r.interactionId)||"");return(0,a.jsxs)(o.g,{spacing:4,align:"stretch",translate:"no",children:[eG&&D&&(0,a.jsx)(eS,{imagesMatchingInteractionId:e0?e1:[],currentAttributes:n,isGenerating:e_,selectedSavedMediaId:eL||void 0,deletingId:eM,hasRatedImage:eJ,deleteImage:eH,selectImage:eA,onRateImage:e$}),eG&&!D&&(0,a.jsxs)(l.k,{justify:"center",pos:"relative",overflow:"visible",children:[(0,a.jsx)(s.E,{maxH:"30vh",maxW:"100%",objectFit:"fill",src:eG,fallbackSrc:n.tempUrl||void 0,alt:"",borderRadius:"md"}),D&&(0,a.jsx)(ey,{currentAttributes:n,position:"absolute",bottom:2,zIndex:"sticky",left:2}),!eJ(n)&&(0,a.jsx)(Y,{attrs:n,onRateImage:e$})]}),eE&&(0,a.jsxs)(c.b,{status:"error",flexDirection:"row",alignItems:"start",justifyContent:"start",borderRadius:"md",children:[(0,a.jsx)(d.z,{}),(0,a.jsx)(u.X,{children:eO})]}),(0,a.jsxs)(o.g,{align:"stretch",spacing:4,children:[(0,a.jsxs)(o.g,{align:"stretch",spacing:1,children:[(0,a.jsxs)(p.U,{position:"relative",align:"center",justify:"space-between",children:[(0,a.jsx)(p.U,{children:(0,a.jsx)(m.X,{size:"sm",color:e_?"gray.500":"black",children:(0,a.jsx)(A.cC,{id:"W9uQXX"})})}),O&&!O.isSiteNavbarEditor&&(0,a.jsx)(p.U,{children:(0,a.jsx)(C.kH,{placement:"top",label:(0,a.jsx)(A.cC,{id:"DZCfCB",values:{GAMMA_PROPER_NOUN:P.N6}}),children:(0,a.jsx)(g.z,{variant:"ghost",rightIcon:(0,a.jsx)(w.G,{icon:y.qHV}),isLoading:eW||e_,"aria-label":"magic generate",onClick:eQ,size:"sm",children:(0,a.jsx)(A.cC,{id:"YqdfV4"})})})})]}),(0,a.jsx)(_.o,{ref:eB,isDisabled:e_,placeholder:eW?"":i.ag._({id:"6RfNWb"}),onKeyDown:eY,value:G,onChange:e=>{F(e.target.value,"update")},"data-testid":"image-search-input",rows:5,initialHeight:"100px"}),q.total>1&&(0,a.jsx)(es.O,{alignSelf:"end",promptPageInfo:q,nextPrompt:V,prevPrompt:Q,isDisabled:e_||eW})]}),D&&(0,a.jsxs)(o.g,{align:"stretch",gap:10,display:"flex",children:[(0,a.jsxs)(o.g,{align:"stretch",children:[(0,a.jsx)(m.X,{size:"sm",color:e_?"gray.500":"black",children:(0,a.jsx)(A.cC,{id:"1CalO6"})}),(0,a.jsx)(ec.A2,{presetId:$,stylePrompt:et,setStylePrompt:er,setPresetId:ee,presetOptions:en,isDisabled:e_})]}),(0,a.jsxs)(p.U,{w:"100%",children:[(0,a.jsxs)(o.g,{w:"100%",align:"stretch",children:[(0,a.jsx)(m.X,{size:"sm",color:e_?"gray.500":"black",children:(0,a.jsx)(A.cC,{id:"iKM2jY"})}),(0,a.jsx)(eo,{value:ea,setValue:ep,model:Z,isDisabled:e_})]}),(0,a.jsxs)(o.g,{w:"100%",align:"stretch",children:[(0,a.jsx)(m.X,{size:"sm",color:e_?"gray.500":"black",children:(0,a.jsx)(A.cC,{id:"scu3wk"})}),Z&&(0,a.jsx)(eU.q,{value:Z,setValue:e=>{J(e)},isDisabled:e_})]})]})]}),!D&&(0,a.jsxs)(o.g,{align:"stretch",children:[(0,a.jsx)(m.X,{size:"sm",color:e_?"gray.500":"black",children:(0,a.jsx)(A.cC,{id:"TXeQBY"})}),(0,a.jsx)(ec.A2,{presetId:$,setPresetId:ee,presetOptions:en,stylePrompt:et,setStylePrompt:er,isDisabled:e_}),(0,a.jsx)(eo,{value:ea,setValue:ep,model:Z,isDisabled:e_}),Z&&(0,a.jsx)(eU.q,{value:Z,setValue:e=>{J(e)},isDisabled:e_})]}),M&&(0,a.jsx)(h.U,{allowToggle:!0,children:(0,a.jsxs)(f.Q,{children:[(0,a.jsxs)(x.K,{children:[(0,a.jsx)(b.xu,{as:"span",flex:"1",textAlign:"left",children:(0,a.jsx)(m.X,{size:"sm",children:(0,a.jsx)(A.cC,{id:"sxkWRg"})})}),(0,a.jsx)(v.X,{})]}),(0,a.jsx)(j.H,{pb:4,children:(0,a.jsx)(em,{enabled:!0,isGenerating:e_,negativePrompt:ef,setNegativePrompt:ex,count:K,setCount:X,steps:eb,setSteps:ev,cfgScale:ej,setCfgScale:ew,model:Z})})]})}),(0,a.jsxs)(o.g,{spacing:1,align:"stretch",children:[(0,a.jsxs)(g.z,{variant:"solid",isLoading:e_,isDisabled:eW,onClick:eX,px:12,children:[(0,a.jsx)(A.cC,{id:"ziAjHi"}),(0,a.jsx)(E.J,{type:"generateImage",position:"absolute",right:4})]}),(0,a.jsx)(I.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:ed.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES}),M&&(0,a.jsx)(eN,{canGenerate:H,isEnhancingPrompt:eW,images:eR,canLoadMore:eT,isLoadingMore:eI,loadMore:eP})]})]}),(0,a.jsx)(W,{onSelectImage:eA,savedMediaId:eL,imageResults:eR,onDeleteImage:eH,deletingId:eM,isLoading:e_,canLoadMore:eT,isLoadingMore:eI,loadMore:eP,resultsPerPage:K,resizeThumbnails:!0})]})},checkDisabled:()=>!1,label:()=>i.ag._({id:"O+LXs1"}),icon:n.ddb,description:()=>i.ag._({id:"yXA4hx"}),keywords:["ai","image","illustration","graphics","generate"],resizeToFit:!0,badge:()=>i.ag._({id:"isRobC"})}},13773:function(e,t,r){r.d(t,{x:function(){return n}});let n={minWidth:1800,maxWidth:5e3,count:10}},68430:function(e,t,r){r.d(t,{E:function(){return w}});var n=r(52322),i=r(70065),a=r(17993),o=r(74409),l=r(77533),s=r(75009),c=r(62614),d=r(85573),u=r(29494),p=r(29117),m=r(5879),g=r(87254),h=r(26433),f=r(16494),x=r(91994),b=r(28553),v=r(47968),j=r(87205),y=r(13833);let w=e=>{let{updateAttributes:t,currentAttributes:r}=e,{sourceUrl:w,meta:C,thumbnail:A}=r,k=(0,x.CG)(v.KV),_=(0,i.p)(),S=async()=>{w&&await (0,y.ft)(w,t).catch(e=>{console.error("[EMBED METADATA] Error restoring preview defaults",e),_({title:g.ag._({id:"cgB+pO",values:{0:e.error}}),status:"error",isClosable:!0,position:"top"})})};return(0,n.jsxs)(a.g,{pt:4,align:"stretch",spacing:4,children:[(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(o.X,{size:"md",children:(0,n.jsx)(m.cC,{id:"qbzc6p"})}),(0,n.jsx)(l.x,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(m.cC,{id:"D9R1mI"})})]}),(0,n.jsxs)(a.g,{align:"stretch",p:4,borderRadius:"lg",border:"1px solid var(--chakra-colors-blue-500)",bg:"gray.100",spacing:4,children:[(null==A?void 0:A.showPlaceholder)?(0,n.jsx)(b.k3,{hasUploadError:(null==A?void 0:A.uploadStatus)===f.D.Error,isUploading:(null==A?void 0:A.uploadStatus)===f.D.Uploading}):A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.E,{src:A.src||A.tempUrl||"",alt:(null==C?void 0:C.title)||"",ignoreFallback:!0,borderRadius:"md"}),(0,n.jsx)(c.z,{isDisabled:A.uploadStatus===f.D.Uploading,onClick:()=>{t({thumbnail:void 0})},children:(0,n.jsx)(m.cC,{id:"YFcW0s"})})]}):k&&(0,n.jsx)(h.u,{onUploadStart:e=>{let{file:r,tempUrl:n}=e;r.type&&(0,j.Ns)(r.type)?t({thumbnail:{uploadStatus:f.D.Uploading,showPlaceholder:!0,tempUrl:null}}):t({thumbnail:{tempUrl:n,uploadStatus:f.D.Uploading,showPlaceholder:!1}})},onUploadSuccess:e=>{let{src:r}=e;t({thumbnail:{src:r}})},onUploadFailed:e=>{console.error("[EMBED METADATA] Error uploading thumbnail image",e),t({thumbnail:{uploadStatus:f.D.Error,showPlaceholder:!0,tempUrl:null}})},orgId:k||"",uploadType:"image",editType:"icon",showTip:!1,dropHereText:g.ag._({id:"yxTfZB",values:{0:"%{browse}"}}),customHeight:"200px",customFontSize:"sm"}),(0,n.jsxs)(a.g,{mt:2,align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(m.cC,{id:"MHrjPM"})}),(0,n.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.title)||"",placeholder:g.ag._({id:"bTzMt5"}),onChange:e=>{t({meta:{...C,title:e.target.value}})},"data-testid":"title-input"})]}),(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(m.cC,{id:"Nu4oKW"})}),(0,n.jsx)(u.g,{bg:"white",rows:4,value:(null==C?void 0:C.description)||"",placeholder:g.ag._({id:"2VBqT4"}),onChange:e=>{t({meta:{...C,description:e.target.value}})}})]}),(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(m.cC,{id:"On0aF2"})}),(0,n.jsxs)(p.U,{children:[(null==C?void 0:C.icon)&&(0,n.jsx)(s.E,{src:C.icon,h:"1.5em",borderRadius:"sm"}),(0,n.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.site)||"",placeholder:g.ag._({id:"SmWcKR"}),onChange:e=>{t({meta:{...r.meta,site:e.target.value}})}})]})]})]}),(0,n.jsx)(c.z,{onClick:S,children:(0,n.jsx)(m.cC,{id:"Z00hdC"})})]})}},69396:function(e,t,r){r.d(t,{j:function(){return z}});var n=r(52322),i=r(82655),a=r(87254),o=r(30523),l=r(62614),s=r(28535),c=r(38035),d=r(20437),u=r(77533),p=r(47443),m=r(52929),g=r(82729),h=r(67109),f=r(32899),x=r(17993),b=r(74105),v=r(20816),j=r(85573),y=r(42946),w=r(49929),C=r(94523),A=r(5879),k=r(38045),_=r(2689),S=r.n(_),I=r(4742),E=r.n(I),U=r(2784),R=r(66028),P=r(93441);let T="60px",O=(0,U.memo)(e=>{let{icon:t,isSelected:r,onIconClick:i}=e;return(0,n.jsx)(o.P,{height:T,width:T,children:(0,n.jsx)(l.z,{borderRadius:"base",bgColor:r?"trueblue.100":void 0,color:"gray.900",display:"block",width:"100%",height:"100%",maxH:"100%",pos:"relative",_hover:{bgColor:r?"trueblue.100":"trueblue.50"},_active:{bgColor:"trueblue.100"},transition:"box-shadow .2s ease",variant:"ghost",cursor:"pointer",onClick:()=>i(t),"data-testid":"icon-search-grid-item",children:(0,n.jsx)(s.xu,{height:"100%",maxH:"100%",sx:{svg:{width:"100%",height:"100%"}},dangerouslySetInnerHTML:{__html:t.html}})})},t.id)});O.displayName="ImageSearchGridItem";let H=e=>{let{searchQuery:t,currentAttributes:r,updateAttributes:i}=e,[a,o]=(0,U.useState)([]),[l,g]=(0,U.useState)(!0),[h,f]=(0,U.useState)(!1),[x,b]=(0,U.useState)(1),v=(0,U.useCallback)(async e=>{let r="/api/icons/search?count=".concat(100,"&query=").concat(t,"&page=").concat(e);g(!0),f(!1);try{var n;let e=await fetch(r,{credentials:"include"}),t=await e.json();if(g(!1),!((null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.length)>=0))throw Error(t);o(t.data)}catch(e){f(!0),g(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t]);(0,U.useEffect)(()=>{o([]),b(1),v(1)},[t,v]),(0,U.useCallback)(()=>{v(x+1),b(x+1)},[v,x]);let j=(0,U.useCallback)(e=>{i({src:void 0,tempUrl:e.src,meta:{height:e.height,width:e.width},providerMeta:{name:e.provider,id:e.id},query:t})},[t,i]),y=a.map((e,t)=>{var i,a;let o=e.id===(null==r?void 0:null===(i=r.providerMeta)||void 0===i?void 0:i.id)&&e.provider===(null==r?void 0:null===(a=r.providerMeta)||void 0===a?void 0:a.name);return(0,n.jsx)(O,{provider:e.provider,icon:e,isSelected:o,onIconClick:j},t)});return(0,n.jsxs)(c.k,{direction:"column",align:"stretch",children:[(0,n.jsxs)(d.M,{gap:2,columns:{base:4,"2xl":6},children:[y,l&&(0,n.jsx)(M,{})]}),!1,0===a.length&&!l&&(0,n.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,n.jsx)(u.x,{style:{color:"gray"},children:(0,n.jsx)(A.cC,{id:"2AY48J",values:{searchQuery:t}})})}),h&&(0,n.jsxs)(p.b,{status:"error",children:[(0,n.jsx)(m.z,{}),(0,n.jsx)(A.cC,{id:"5hlcZg"})]})]})},M=()=>(0,n.jsx)(n.Fragment,{children:S()(100).map((e,t)=>(0,n.jsx)(o.P,{height:T,children:(0,n.jsx)(g.o,{ratio:1,children:(0,n.jsx)(h.O,{borderRadius:"base"})})},t))}),D=(0,k.E)(f.h),N=e=>{let{currentAttributes:t,updateAttributes:r,defaultQuery:i="",randomQueries:o}=e,[l,c]=(0,U.useState)(i),[d,u]=(0,U.useState)("");(0,U.useEffect)(()=>{u(i),c(i)},[i]);let p=(0,U.useCallback)(()=>{let e=E()(o);for(;e===l;)e=E()(o);e&&(c(e),u(""))},[o,l]),m=(0,P.Kt)(c,500);return(0,n.jsxs)(x.g,{spacing:4,align:"stretch",translate:"no",children:[(0,n.jsxs)(b.B,{size:"md",children:[(0,n.jsx)(v.Z,{pointerEvents:"none",children:(0,n.jsx)(s.xu,{color:"gray.400",children:(0,n.jsx)(w.G,{icon:y.wn1})})}),(0,n.jsx)(j.I,{placeholder:l||a.ag._({id:"oMAM3/"}),value:d,onChange:e=>{u(e.target.value),m(e.target.value)},"data-testid":"image-search-input"}),o&&(0,n.jsx)(v.x,{children:(0,n.jsx)(C.kH,{placement:"top",label:(0,n.jsx)(A.cC,{id:"OVjfHO"}),children:(0,n.jsx)(D,{icon:(0,n.jsx)(w.G,{icon:y.RJo}),"aria-label":a.ag._({id:"OVjfHO"}),variant:"ghost",onClick:p,size:"sm",whileTap:{y:"-5px"},onMouseDown:R.br})})})]}),(0,n.jsx)(H,{currentAttributes:t,updateAttributes:r,searchQuery:l||""})]})},L=["animals","arrows","business","party","nature","food"],z={key:"image.icon",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(N,{updateAttributes:t,currentAttributes:r,currentIconUrl:r.src,defaultQuery:r.query||"",randomQueries:L})},label:()=>a.ag._({id:"mcmuCe"}),icon:i.ocQ,keywords:["icon","symbol","picture"]}},61185:function(e,t,r){r.d(t,{Q:function(){return a},s:function(){return o}});var n=r(78704),i=r(83230);let a={bing:"image.bing",giphy:"image.giphy",google:"image.google",web:"image.web",unsplash:"image.unsplash",lexica:"image.lexica",aiGenerated:"image.ai-generated",fontawesome:"image.icon"},o={web:i.Q,aiGenerated:n.N}},83230:function(e,t,r){r.d(t,{Q:function(){return s}});var n=r(52322),i=r(82655),a=r(87254),o=r(53345);let l=["modern office workspace","sustainable energy landscape","vintage automobile collection","future technology concept","tropical beach paradise","urban street art","classical music instruments","mountain hiking adventure","wildlife safari","space exploration visuals","ancient ruins aerial view","deep sea marine life","high fashion runway event","robotics in manufacturing","gourmet food presentation","winter sports scene","abstract art paintings","traditional village festival","modern architecture landmarks","digital art fantasy worlds"],s={key:"image.web",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(o.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enablePagination:!0,enableLicenseFilter:!0,provider:"web",resultsPerPage:48,randomQueries:l,resizeThumbnails:!0})},featureFlag:"webImageSearch",label:()=>a.ag._({id:"coorYU"}),icon:i.Y$T,keywords:["image","photo","pic"],description:()=>a.ag._({id:"NMbF1d"}),resizeToFit:!0}},6038:function(e,t,r){r.d(t,{NX:function(){return n.N},LE:function(){return v},BF:function(){return j},jt:function(){return A},QR:function(){return k},in:function(){return F},wj:function(){return W},DN:function(){return q},$5:function(){return J},bO:function(){return ee},F6:function(){return et},bD:function(){return er},eK:function(){return ei},jS:function(){return ea.j},FH:function(){return eo},ud:function(){return es},Vy:function(){return ed},yC:function(){return eR},zX:function(){return eP},DU:function(){return eu},Bo:function(){return ep},BR:function(){return em},TQ:function(){return eh},p7:function(){return ef},w4:function(){return ex},zs:function(){return ev},iL:function(){return ej},Ds:function(){return ey},hq:function(){return eA},oC:function(){return ek},QT:function(){return e_.Q},Hw:function(){return eI},BM:function(){return eE},qz:function(){return eU}});var n=r(78704),i=r(52322),a=r(82655),o=r(5879),l=r(87254),s=r(17993),c=r(66855),d=r(68430),u=r(13833);let p=e=>{let{editor:t,updateAttributes:r,currentAttributes:n,urlPlaceholder:a,embedTip:o}=e,l=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:l,updateAttributes:r,placeholder:a||"https://..."}),o,l&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})};var m=r(29705),g=r(47443),h=r(52929),f=r(74444),x=r(11082);let b=e=>{let{guideLink:t,extraMessage:r,providerName:n}=e;return(0,i.jsxs)(g.b,{status:"info",children:[(0,i.jsx)(h.z,{}),(0,i.jsx)(f.X,{children:(0,i.jsx)(o.cC,{id:"qBttXb",values:{providerName:n,extraMessage:r},components:{0:(0,i.jsx)(x.r,{href:t,textDecoration:"underline",isExternal:!0}),1:(0,i.jsx)(m.h,{mx:"2px"})}})})]})},v={label:()=>"Airtable",key:"embed.airtable",description:()=>l.ag._({id:"KlL5LU"}),icon:a.u7T,image:{src:"/_next/static/media/airtable.e403549a.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/airtable.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://airtable.com/...",embedTip:(0,i.jsx)(b,{guideLink:"https://support.airtable.com/hc/en-us/articles/217846478-Embedding-a-view-or-base",providerName:"Airtable",extraMessage:(0,i.jsx)(o.cC,{id:"gsZDsS"})})}),categories:["app","form"],defaultDisplayStyle:"inline",inlineInteractive:!0,iframeOptions:{allowPopups:!0},keywords:["airtable","database","spreadsheet","table"]},j={label:()=>"Amplitude",key:"embed.amplitude",keywords:["amplitude","analytics"],description:()=>l.ag._({id:"wa1wV8"}),icon:a.Ma4,image:{src:"/_next/static/media/amplitude.5828f141.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/analytics.amplitude.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,i.jsx)(b,{guideLink:"https://help.amplitude.com/hc/en-us/articles/235717108-Share-charts-dashboards-and-notebooks-with-stakeholders-outside-your-company#generate-embed-code-for-your-content",extraMessage:(0,i.jsx)(o.cC,{id:"NDM+Av"}),providerName:"Amplitude"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})}};var y=r(97143),w=r(13773),C=r(53345);let A={key:"image.bing",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enableSearch:!0,enablePagination:!1,provider:"bing",resultsPerPage:w.x.count})},label:()=>l.ag._({id:"2V6hMo"}),icon:y.hVS,image:{src:"/_next/static/media/bing.0f94cfbe.svg",height:1024,width:678,blurWidth:0,blurHeight:0},keywords:["image","photo","bing","pic"]},k={label:()=>"Calendly",key:"embed.calendly",description:()=>l.ag._({id:"grPhlY"}),icon:a.fT7,image:{src:"/_next/static/media/calendly.d1a57857.svg",height:150,width:150,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/calendly.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://calendly.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["calendly","meeting","schedule","appointment"]};var _=r(81540),S=r(75009),I=r(77533),E=r(62614),U=r(74409),R=r(37164),P=r(2784),T=r(91994),O=r(29318),H=r(28553),M=r(97253),D=r(47968),N=r(36651),L=r(87205),z=r(2090),G=r(26433),B=r(16494);let F={label:()=>l.ag._({id:"bk8Zu0"}),key:"image.custom",description:()=>l.ag._({id:"RPwTMJ"}),icon:a.VmB,Panel:e=>{let{editor:t,editType:r,updateAttributes:n,currentAttributes:a,resetToPlaceholder:c}=e,d=(0,T.CG)(D.KV),{currentWorkspace:p}=(0,N.SE)(),{orgId:m,templateId:x,useStandardThemeBucket:b}=(0,O.Ds)(d||(null==p?void 0:p.id),r),v=(0,P.useRef)(null),j=(0,P.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n({uploadStatus:B.D.Uploading,showPlaceholder:!0,tempUrl:e,src:null})},[n]),y=(0,P.useCallback)(e=>{n({uploadStatus:B.D.Uploading,showPlaceholder:!1,tempUrl:e,src:null}),v.current=e},[n]),w=(e,i)=>{let a=v.current,o=a||i;if(o){if("node"!==r||!t){n({...(0,M.gM)({result:e,isError:!1}),source:F.key});return}(0,M.Ns)(t,o,e),v.current=null}},C=e=>{if(!v.current||!t){n((0,M.gM)({isError:!0}));return}(0,M.f8)(t,v.current,e)},A=(0,P.useCallback)(e=>{let{file:t,tempUrl:r}=e;if(t.type&&(0,L.Ns)(t.type)){let e="HEIC_tempId_".concat((0,R.x0)());j(e),y(e)}else y(r)},[j,y]),k=(0,P.useCallback)(()=>{n((0,M.gM)({isError:!0}))},[n]),{src:W,tempUrl:q,meta:V,name:Q,showPlaceholder:K,uploadStatus:X}=a,Y=W?(0,L.aN)(W,{width:500}):void 0,Z=!!(W||q||K);return Z?(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[X===B.D.Uploading&&(0,i.jsxs)(g.b,{status:"info",size:"sm",children:[(0,i.jsx)(h.z,{as:_.$,w:5,h:5}),(0,i.jsx)(f.X,{children:(0,i.jsx)(o.cC,{id:"MEDU34"})})]}),K?(0,i.jsx)(H.k3,{isUploading:X===B.D.Uploading,hasUploadError:X===B.D.Error,width:"100%"}):(0,i.jsx)(S.E,{src:Y||q,alt:"",ignoreFallback:!0,borderRadius:"md"}),V&&V.width&&V.height&&(0,i.jsxs)(I.x,{children:[V.width,"\xd7",V.height,"px"]}),Q&&(0,i.jsx)(I.x,{children:Q}),(0,i.jsx)(E.z,{onClick:c,mt:2,w:"100%",children:(0,i.jsx)(o.cC,{id:"HUPV+K"})})]}):(0,i.jsxs)(s.g,{align:"stretch",spacing:4,children:[b&&(0,i.jsxs)(g.b,{status:"warning",size:"sm",children:[(0,i.jsx)(h.z,{}),(0,i.jsx)(f.X,{children:"[Admin] Theme images will be uploaded to production theme_images bucket"})]}),X===B.D.Error&&(0,i.jsxs)(g.b,{status:"error",size:"sm",children:[(0,i.jsx)(h.z,{}),(0,i.jsx)(f.X,{children:(0,i.jsx)(o.cC,{id:"GymiXM"})})]}),(0,i.jsx)(U.X,{size:"md",children:(0,i.jsx)(o.cC,{id:"IagCbF"})}),(0,i.jsx)(u.v,{currentUrl:"",placeholder:l.ag._({id:"jurEzE"}),handleSubmit:e=>{if(!m){console.error("[CustomImagePanel] saveImageFromUrl - No orgId!");return}y(e);try{(0,z.WY)(e,m,{onUploadComplete:w,onOriginalFileUpload:w,onUploadFailed:C},r,x)}catch(e){C()}},handleDataSubmit:e=>{if(!m){console.error("[CustomImagePanel] saveImageFromDataBlob - No orgId!");return}y(e);try{let t=(0,L.v9)(e,"image");(0,z.cT)(t,m,{onUploadComplete:w,onOriginalFileUpload:w,onUploadFailed:C},r,void 0,x)}catch(e){C()}},noHeader:!0}),(0,i.jsx)(U.X,{size:"md",children:(0,i.jsx)(o.cC,{id:"ONWvwQ"})}),m&&(0,i.jsx)(G.u,{onUploadSuccess:w,onUploadStart:A,onUploadFailed:k,orgId:m,uploadType:"image",editType:r,templateId:x})]})},keywords:["image","upload"],resizeToFit:!0},W={label:()=>l.ag._({id:"0+gRao"}),description:()=>l.ag._({id:"w31i/H"}),key:"video.custom",icon:a.sl_,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["video","audio","podcast","embed"],iframeOptions:{allowPopups:!0},preferHtml:!0},q={label:()=>"Figma",key:"embed.figma",icon:y.uWT,keywords:["design","prototype","wireframe","figjam","whiteboard"],description:()=>l.ag._({id:"riUMyL"}),image:{src:"/_next/static/media/figma.14e7d0c1.svg",height:2500,width:1667,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.figma.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.figma.com/file/..."}),(0,i.jsx)(b,{guideLink:"https://help.figma.com/hc/en-us/articles/360039827134-Embed-files-and-prototypes",providerName:"Figma/FigJam"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},canEmbedPrivate:!0,rewriteEmbedUrl:e=>e.includes("figma.com/embed")?e:"https://www.figma.com/embed?embed_host=share&url=".concat(encodeURIComponent(e))};var V=r(38035),Q=r(28535),K=r(42946),X=r(38421),Y=r.n(X);let Z=["funny","surprise","hooray","welcome","excited","nope","fail","sad","cry","angry","teamwork","cats","dogs","high five"],J={key:"image.giphy",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:Z,provider:"giphy"}),(0,i.jsx)(V.k,{width:"100%",justify:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(Q.xu,{maxW:"150px",children:(0,i.jsx)(Y(),{src:"/images/powered-by-giphy.png",width:"150",height:"17",alt:"Powered by GIPHY"})})})]})},label:()=>l.ag._({id:"E435oC",values:{GIPHY_PROPER_NOUN:"GIPHY"}}),description:()=>l.ag._({id:"QmULXm"}),icon:K.qt5,image:{src:"/_next/static/media/giphy.2d92c9c6.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},keywords:["gif","animation","animated","giphy"],resizeToFit:!0};var $=r(94199);let ee={label:()=>"Google Drive",key:"embed.gdrive",description:()=>l.ag._({id:"1q3pN1",values:{SHEETS_PROPER_NOUN:"Sheets",DOCS_PROPER_NOUN:"Docs",SLIDES_PROPER_NOUN:"Slides",GAMMA_ARTIFACT_PROPER_NOUN:$.Yc}}),icon:y.Uuo,image:{src:"/_next/static/media/google-drive.2d314cf9.svg",height:78,width:87,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\//,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://docs.google.com/...",embedTip:(0,i.jsx)(b,{guideLink:"https://support.google.com/docs/answer/183965?hl=en&co=GENIE.Platform%3DDesktop#zippy=%2Cedit-embedded-spreadsheets%2Cembed-a-document-spreadsheet-or-presentation",extraMessage:(0,i.jsx)(o.cC,{id:"G6PCHK",values:{GAMMA_ARTIFACT_PROPER_NOUN:$.Yc}}),providerName:"Google Sheets, Docs, or Slides"})}),canEmbedPrivate:!0,rewriteEmbedUrl:e=>{if(e.includes("/presentation/")){let t=new URL(e.replace("/edit","/preview"));return t.searchParams.set("rm","minimal"),t.toString()}{let t=new URL(e.replace("/preview","/edit"));return t.toString()}},keywords:["docs","sheet","slide","gdrive","document"]},et={label:()=>"Google Form",key:"embed.google.form",description:()=>l.ag._({id:"sgbNf4"}),icon:y.Uuo,image:{src:"/_next/static/media/google-form.c5494f4d.svg",height:66,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\/forms/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://docs.google.com/forms/..."}),canEmbedPrivate:!0,keywords:["google form","form","survey","questionnaire"],defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},er={key:"image.google",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",provider:"google"})})},label:()=>l.ag._({id:"h2JWN5"}),icon:y.xYR,image:{src:"/_next/static/media/google-image.5d5a5835.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["image","photo"]};var en=r(1978);let ei={key:"color.gradient",Panel:e=>{let{updateAttributes:t,currentAttributes:r,isDark:n}=e;return(0,i.jsx)(en._,{value:r,updateValue:t,isDark:n})},label:()=>l.ag._({id:"/S8bMP"}),description:()=>l.ag._({id:"/XRwS6"}),icon:a.e2K,keywords:["gradient","color","mesh"]};var ea=r(69396);let eo={label:()=>"Jotform",key:"embed.jotform",description:()=>l.ag._({id:"7yLOnm"}),icon:a.Lc0,image:{src:"/_next/static/media/jotform.0a55e4a9.svg",height:334,width:304,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/form\.jotform\.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://form.jotform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["jotform","form","survey","questionnaire"]},el=["wallpaper","textures","background","nature","gradient","relax","sky","water","pattern","abstract"],es={key:"image.lexica",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:el,provider:"lexica",enablePagination:!1}),(0,i.jsx)(Q.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(I.x,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(o.cC,{id:"rbDrRg",components:{0:(0,i.jsx)(x.r,{href:"https://lexica.art",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},featureFlag:"lexicaImageSearch",label:()=>l.ag._({id:"cSVX+F"}),description:()=>l.ag._({id:"RdyK6U"}),image:{src:"/_next/static/media/lexica.8699ff3f.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVMaXG5ubm/v782NjYNDQ0UFBSvr6+mpqa0tLSoMQVUAAAACXRSTlMAr+A2F1nir64H2A2bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGNgYGBmZoAAdjYog5GJMIODjYUFzGBmZWVlYQAACCkATB93BkwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},keywords:["ai","lexica","stable diffusion","generated","photo","photography","image"]},ec=P.lazy(()=>Promise.all([r.e(7576),r.e(5053)]).then(r.bind(r,35053)).then(e=>({default:e.LoomPanel}))),ed={key:"video.loom",Panel:e=>(0,i.jsx)(P.Suspense,{fallback:(0,i.jsx)(_.$,{size:"md"}),children:(0,i.jsx)(ec,{...e})}),label:()=>l.ag._({id:"yrPgHm"}),description:()=>l.ag._({id:"NMTPSf"}),icon:a.IyC,image:{src:"/_next/static/media/loom.a033778e.svg",height:190,width:190,blurWidth:0,blurHeight:0},urlRegex:/^https:\/\/www.loom.com/,rewriteEmbedUrl:e=>{if(!e.includes("/embed/"))return e;let t=new URL(e);return t.searchParams.set("hideEmbedTopBar","true"),t.toString()},keywords:["video","recording","loom","screen"]},eu={key:"embed.microsoft.office",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),(0,i.jsx)(b,{guideLink:"https://support.microsoft.com/en-us/office/embed-a-word-document-in-your-blog-0faa0253-2751-44bf-8486-ea7837fe7db1",extraMessage:(0,i.jsx)(o.cC,{id:"2csAkv"}),providerName:"Word, Excel, or PowerPoint"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>"Office 365",description:()=>l.ag._({id:"cbRq5v",values:{MICROSOFT_PROPER_NOUN:"Microsoft",WORD_PROPER_NOUN:"Word",POWERPOINT_PROPER_NOUN:"PowerPoint",EXCEL_PROPER_NOUN:"Excel",ONENOTE_PROPER_NOUN:"OneNote"}}),icon:y.hVS,image:{src:"/_next/static/media/office-365.868363a8.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/.*\.sharepoint\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},rewriteEmbedUrl:e=>{let t=new URL(e.replace("/:p:/r","").replace("/doc2.aspx","/Doc.aspx"));return t.searchParams.set("action","embedview"),t.searchParams.delete("mobileredirect"),t.toString()},keywords:["word","excel","powerpoint","office","microsoft","msoffice"]},ep={label:()=>l.ag._({id:"yA1Sb+",values:{MIRO_PROPER_NOUN:"Miro"}}),key:"embed.miro",icon:a.EhQ,description:()=>l.ag._({id:"Px3dYF"}),image:{src:"/_next/static/media/miro.78878247.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/miro.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.miro.com/..."}),(0,i.jsx)(b,{guideLink:"https://help.miro.com/hc/en-us/articles/360016335640-How-to-embed-editable-boards-into-websites",providerName:"Miro"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["whiteboard","workshop","brainstorm","miro"],rewriteEmbedUrl:e=>e.includes("/embed/")||e.includes("/live-embed/")?e:e.replace("/board/","/embed/")},em={label:()=>l.ag._({id:"1r0gtu"}),key:"embed.pdf",description:()=>l.ag._({id:"2SUV3x"}),icon:a.gSj,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,T.CG)(D.KV),p=(0,c.NW)(n),m=(0,P.useRef)(null),g=(0,P.useCallback)(e=>{let{tempUrl:t,file:n}=e,i=(0,M.B0)(n);m.current=t,r({...i,url:t})},[r]),h=(0,P.useCallback)((e,r)=>{if(!t)return;let n=m.current,i=n||r;(0,M.QZ)(t,i,e),m.current=null},[t]);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:p,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),p&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n}),(0,i.jsx)(U.X,{size:"md",children:(0,i.jsx)(o.cC,{id:"ONWvwQ"})}),a&&(0,i.jsx)(G.u,{onUploadSuccess:h,onUploadStart:g,orgId:a,uploadType:"doc",showTip:!1,dropHereText:l.ag._({id:"ByKyau",values:{0:"%{browse}"}}),editType:"node"})]})},urlRegex:/\.pdf$/,image:{src:"/_next/static/media/PDF_icon.2d280cf2.svg",height:512,width:512,blurWidth:0,blurHeight:0},featureFlag:"uploadPDF",iframeOptions:{noSandbox:!0},downloadable:!0,keywords:["pdf","doc","upload","file"]};var eg=r(54933);let eh={key:"embed.microsoft.powerbi",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>"PowerBI",image:{src:"/_next/static/media/powerbi.94baf198.svg",height:630,width:630,blurWidth:0,blurHeight:0},icon:eg.t5N,urlRegex:/^https?:\/\/app\.powerbi\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["microsoft","powerbi"]},ef={label:()=>"Spotify",key:"video.spotify",keywords:["spotify","music","podcast","playlist","song","album"],description:()=>l.ag._({id:"lrKTd0"}),icon:y.Ha7,image:{src:"/_next/static/media/spotify.2dd06f33.svg",height:1333,width:1333,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/open.spotify.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a||"",updateAttributes:r,placeholder:"https://open.spotify.com/..."}),(0,i.jsx)(b,{guideLink:"https://artists.spotify.com/en/help/article/embedded-players-follow-buttons",providerName:"Spotify",extraMessage:(0,i.jsx)(o.cC,{id:"ItAUcI"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})}},ex={label:()=>"Tally Form",key:"embed.tally",description:()=>l.ag._({id:"Qzo1BZ"}),icon:a.Lc0,image:{src:"/_next/static/media/tally.dd047104.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXHpG9s0E1swDVk0E1s0El/0GeU3H14yEVszEl03El8jElM0El5tFIXjG9v/HO6cF6Y5E2A9E2gHheKrAAAAEnRSTlMAVyclXeYiCNf+fdCl9uif/aFquzWYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANElEQVR4nC3FWRLAEBRFwWPKcxNi2P9iFaV/Grvw+fBQpjQHEJLUHcCr+rcHsPS5PcR4uhY8sgFUhN0cjQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},urlRegex:/^https?:\/\/tally.so/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://tally.so/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},eb=/\/video\/(\d+)/,ev={label:()=>"TikTok",key:"video.tiktok",icon:y.ABo,image:{src:"/_next/static/media/tiktok.cbd7f7ff.svg",height:256,width:256,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.tiktok.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.tiktok.com/..."}),(0,i.jsx)(b,{guideLink:"https://developers.tiktok.com/doc/embed-videos/",providerName:"TikTok"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},preferHtml:!0,rewriteEmbedUrl(e){var t;let r=null===(t=e.match(eb))||void 0===t?void 0:t[1];return r?"https://www.tiktok.com/embed/v2/".concat(r):e},inlineInteractive:!0,keywords:["tiktok","video","social"]},ej={key:"embed.twitter",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(s.g,{align:"flex-start",spacing:4,children:(0,i.jsx)(u.v,{currentUrl:r.url,updateAttributes:t,placeholder:"https://twitter.com/..."})})},label:()=>"Tweet",icon:y.mdU,image:{src:"/_next/static/media/twitter.c7499c85.svg",height:1110,width:1110,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(www\.)?twitter\.com/,keywords:["twitter","tweet"],preferHtml:!0,defaultDisplayStyle:"inline",inlineInteractive:!0},ey={label:()=>"Typeform",key:"embed.typeform",description:()=>l.ag._({id:"yjYR46"}),icon:eg.Lc0,image:{src:"/_next/static/media/typeform.6d709d2e.svg",height:800,width:800,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/([a-z0-9]*\.)?typeform\.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://typeform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["typeform","form","survey","questionnaire"]},ew="Unsplash",eC=["wallpaper","textures","architecture","background","nature","gradient","experimental","animals","california","flowers","relax","sky","water","pattern","abstract"],eA={key:"image.unsplash",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:eC,provider:"unsplash"}),(0,i.jsx)(Q.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(I.x,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(o.cC,{id:"k16iQH",values:{UNSPLASH_PROPER_NOUN:ew},components:{0:(0,i.jsx)(x.r,{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},label:()=>l.ag._({id:"olwQVc",values:{UNSPLASH_PROPER_NOUN:ew}}),description:()=>l.ag._({id:"tQSDXx"}),icon:y.WxC,image:{src:"/_next/static/media/unsplash.1957709b.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["stock","photo","photography","image","unsplash"],resizeToFit:!0},ek={key:"video.vimeo",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://vimeo.com/..."}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>l.ag._({id:"M1Uyl1"}),icon:y.XZc,image:{src:"/_next/static/media/vimeo.4de20653.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(player\.)?vimeo\.com/,keywords:["vimeo","video"]};var e_=r(83230),eS=r(82713);let eI={label:()=>l.ag._({id:"/hLjBB"}),description:()=>l.ag._({id:"wRlboO"}),key:"embed.custom",icon:a.m6E,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,{proxy:a,displayStyle:p}=n,m=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:m||"",updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),m&&p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS.X,{isChecked:a,onChange:e=>r({proxy:e.target.checked}),children:(0,i.jsx)(o.cC,{id:"Fl9cgp"})}),(0,i.jsx)(I.x,{fontSize:"sm",color:"gray.500",mt:-2,children:(0,i.jsx)(o.cC,{id:"J87/8N"})})]}),m&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["webpage","website","app","embed","iframe"]},eE={label:()=>"Wistia",key:"video.wistia",icon:a.IyC,image:{src:"/_next/static/media/wistia.613af213.svg",height:1899,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/fast.wistia.net/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,i.jsx)(b,{guideLink:"https://wistia.com/support/embed-and-share/media-on-your-website",providerName:"Wistia"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["wistia","video"]},eU={key:"video.youtube",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.youtube.com/watch?v=..."}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>l.ag._({id:"7J5KkU"}),icon:y.opf,image:{src:"/_next/static/media/youtube.b0610934.svg",height:461,width:461,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www\.youtube\.com/,keywords:["youtube","video"]},eR=[A,J,er,e_.Q,es,eA,eU,ed,q,et,ee,eI,F,n.N,eu,eh,ej,ek,W,em,ep,v,j,eE,ef,ev,ei,ea.j,k,ey,eo,ex],eP=Object.fromEntries(Object.values(eR).flat().map(e=>[e.key,e]))},16494:function(e,t,r){var n,i;r.d(t,{D:function(){return n}}),(i=n||(n={}))[i.Done=0]="Done",i[i.Uploading=1]="Uploading",i[i.Error=2]="Error",i[i.Queued=3]="Queued"},50279:function(e,t,r){r.d(t,{C:function(){return a},K:function(){return i}});var n=r(61185);let i=e=>{var t,r,n,i,a,o;return(null===(t=e.meta)||void 0===t?void 0:t.description)||(null===(r=e.meta)||void 0===r?void 0:r.alt_description)||(null===(n=e.meta)||void 0===n?void 0:n.title)||(null===(i=e.meta)||void 0===i?void 0:i.snippet)||(null===(o=e.meta)||void 0===o?void 0:null===(a=o.tags)||void 0===a?void 0:a.join(", "))||e.query},a=(e,t,r)=>{let i={src:e.imageUrl,tempUrl:e.thumbnailUrl,meta:{height:e.height,width:e.width,description:e.description,alt_description:e.altDescription,title:e.title,snippet:e.snippet},query:t,source:n.Q[r]};return"aiGenerated"===r&&(i.aiParams={prompt:e.aiPrompt,height:e.height,width:e.width,model:e.aiModel,style_preset:e.aiStylePreset}),i}},11550:function(e,t,r){r.d(t,{M:function(){return l}});var n=r(55478),i=r(2784),a=r(43997),o=r(87827);let l=e=>{let{id:t,...r}=e,{isOpen:l,onOpen:s,onClose:c}=(0,n.q)(r),d=(0,a.I0)();return(0,i.useEffect)(()=>{t&&d((0,o.VN)({id:t,isOpen:l}))},[l,d,t]),(0,i.useEffect)(()=>()=>{t&&d((0,o.VN)({id:t,isOpen:!1}))},[d,t]),{isOpen:l,onOpen:s,onClose:c}}},62131:function(e,t,r){r.d(t,{ER:function(){return s},U:function(){return d},Y7:function(){return c}});var n=r(52322),i=r(82554),a=r(57124),o=r(1163),l=r(12265);let s=e=>{let{product:t="pro",...r}=e;return(0,n.jsx)(i.C,{size:"sm",variant:"solid",bottom:0,right:0,bg:"pro"===t?"linear-gradient(97deg, #3300D9 -10%, #9D20C9 56.82%, #DF7A6C 120%)":"trueblue.500",color:"white",textShadow:"0px 0px 1px rgba(0, 0, 0, .5)",fontSize:"11px",...r,children:(0,l.KL)()[t].name})},c=e=>{let{workspace:t,...r}=e,i=(0,o.K9)(t);return i?(0,n.jsx)(s,{variant:"subtle",...r,product:i}):null},d=e=>{let{workspace:t,productFeature:r,...i}=e,l=(0,a.Y)(r,t),c=(0,o.I4)(r);return l||null===c?null:(0,n.jsx)(s,{variant:"solid",product:c,...i})}},87342:function(e,t,r){r.d(t,{m:function(){return x}});var n=r(52322),i=r(38035),a=r(43297),o=r(29117),l=r(77533),s=r(62614),c=r(5879),d=r(93202),u=r(42111),p=r(94199),m=r(76249),g=r(2953),h=r(1163),f=r(62131);let x=e=>{let{title:t=(0,n.jsx)(c.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:p.x8}}),description:r,buttonLabel:x,onOpenCallback:b,onCloseCallback:v,segmentEvent:j,isNarrow:y}=e,w=(0,u.ye)("upsellUXEnabled_Pro"),{openUpsellModal:C,product:A,proYearlyProductPrice:k}=(0,g.z)();if("pro"===A||!w)return null;let _=((null==k?void 0:k.price)||19200)/(0,h.kK)(null==k?void 0:k.currency)/12,S=(null==k?void 0:k.currency)||d.Fa6.Usd,I=(0,h.aS)(null==k?void 0:k.currency);return(0,n.jsxs)(i.k,{flex:1,w:"100%",mb:4,p:4,borderRadius:"md",bg:"trueblue.50",borderColor:"trueblue.200",position:"relative",borderWidth:1,shadow:"sm",flexDirection:y?"column":"row",align:"center",gap:4,children:[(0,n.jsxs)(a.K,{flex:2,alignSelf:"stretch",children:[(0,n.jsxs)(o.U,{children:[(0,n.jsx)(f.ER,{variant:"solid"}),(0,n.jsx)(l.x,{fontWeight:"bold",children:t})]}),(0,n.jsx)(l.x,{color:"gray.700",fontSize:"xs",children:r||(0,n.jsx)(c.cC,{id:"gGlaFH",values:{GAMMA_PROPER_NOUN:p.N6}})})]}),(0,n.jsxs)(a.K,{spacing:1,flex:1,alignSelf:"stretch",children:[(0,n.jsx)(s.z,{variant:"solid",colorScheme:"trueblue",size:"sm",onClick:()=>{C({onOpenCallback:b,onCloseCallback:v,segmentEvent:j})},children:x||(0,n.jsx)(c.cC,{id:"kwkhPe"})}),(0,n.jsx)(l.x,{textAlign:"center",fontSize:"xs",color:"gray.700",children:(0,n.jsx)(c.cC,{id:"LTohGv",values:{0:(0,m.x)(_,{currency:S,notation:I})}})})]})]})}},41003:function(e,t,r){r.d(t,{R4:function(){return n.R},uL:function(){return i.uL},dU:function(){return i.dU},Y:function(){return i.Y},_O:function(){return i._O}}),r(66051);var n=r(43979),i=r(57124);r(2784)},1978:function(e,t,r){r.d(t,{_:function(){return N}});var n=r(52322),i=r(29117),a=r(28535),o=r(43297),l=r(38035),s=r(10625),c=r(67046),d=r(62614),u=r(99058),p=r(44035),m=r(39237),g=r(75768),h=r(32899),f=r(42946),x=r(49929),b=r(94523),v=r(5879),j=r(87254),y=r(62349),w=r.n(y),C=r(2784),A=r(98621),k=r.n(A),_=r(93441),S=r(82729),I=r(27875),E=r.n(I);let U={soft:{name:"Soft",spin:[0,-40,40],lighten:[0,0,0]},duo:{name:"Duo",spin:[0,180],lighten:[0,0]},crescent:{name:"Crescent",spin:[0,-45,45,-90,90],lighten:[0,0,0,0,0]},wisp:{name:"Wisp",spin:[0,72,216],lighten:[0,0,0]},mono:{name:"Mono",spin:[0,0,0],lighten:[0,20,40]},cosmos:{name:"Cosmos",spin:[0,72,144,216,288],lighten:[0,0,0,0,0]}},R=e=>{let t=[];e.forEach((e,r)=>{let n=e.setAlpha(1),i=n.toHsl().h*r,a="radial-gradient(circle at ".concat(50*(2*i%360/360),"% ").concat(50*(3*i%360/360),"%, ").concat(n.setAlpha(.5).toHex8String()," 0, ").concat(n.setAlpha(0).toHex8String()," ").concat(50*(1*i%360/360)+50,"%)");t.push(a)});let r=e[0].setAlpha(.5).toHex8String();return t.push("linear-gradient(0deg, ".concat(r," 0%, ").concat(r," 100%)")),{backgroundImage:t.join(",")}},P=(e,t)=>{let r=U[e],n=[];return r.spin.forEach(e=>{let r=k()(t.toHsv()).spin(e);n.push(r)}),r.lighten.forEach((e,t)=>{n[t].lighten(e)}),n},T=(e,t)=>{let r=P(e,t),n=R(r);return{colors:r,gradient:n}},O=(e,t,r)=>{t.forEach(e=>{e&&(e.style.opacity="0")}),e.forEach((e,n)=>{let i=t[n];if(!i||!r)return;let a=function(e,t){let r=e.offsetWidth,n=k()(t),i=n.toHsl().h*(Math.PI/180),a=n.toHsl().l,o=-(a*r)+r;return{x:r/2-o*Math.cos(i),y:r/2-o*Math.sin(i)}}(r,e);i.style.transform="translate(calc(".concat(a.x,"px - 50%),calc(").concat(a.y,"px - 50%))"),i.style.backgroundColor=e.toHexString(),i.style.opacity="1"})},H=(0,C.forwardRef)(function(e,t){let{isPrimary:r=!1,noTransition:i=!1}=e;return(0,n.jsx)(a.xu,{ref:t,borderRadius:"full",boxSize:r?7:5,pos:"absolute",zIndex:r?2:1,shadow:"base",border:"2px solid white",pointerEvents:"none",transitionProperty:i?"none":"transform",transitionDuration:"normal"})}),M=(0,C.memo)(e=>{let{updateColor:t,colors:r}=e,i=(0,C.useRef)(null),o=(0,C.useRef)(null),s=(0,C.useRef)(null),c=(0,C.useRef)(null),d=(0,C.useRef)(null),u=(0,C.useRef)(null),p=(0,C.useMemo)(()=>[o,s,c,d,u],[]);(0,C.useEffect)(()=>{let e=p.map(e=>e.current);O(r,e,i.current)},[r,p]);let m=(0,C.useCallback)(e=>{if(!i.current)return;let r=i.current.getBoundingClientRect();(e.clientX||e.clientY)&&t(function(e,t,r){let n=e.current.offsetWidth,i=e.current.offsetHeight,a=n/2,o=i/2,l=function(e,t,r,n,i){let a=r-e,o=n-t;return E()(Math.sqrt(o*o+a*a),0,i)}(t,r,a,o,n/2),s=Math.atan2(o-r,a-t),c=s*(180/Math.PI),d=Math.abs(-l/n+1);return k().fromRatio({h:c+360*Math.ceil(-c/360)+1,s:1,l:d})}(i,e.clientX-r.left,e.clientY-r.top))},[t]),g=(0,C.useCallback)(()=>{document.removeEventListener("mousemove",m)},[m]),h=(0,C.useCallback)(e=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",g,{once:!0}),m(e)},[m,g]);return(0,n.jsxs)(a.xu,{onMouseDown:h,p:4,m:-4,position:"relative",children:[(0,n.jsx)(H,{ref:o,noTransition:!0,isPrimary:!0}),(0,n.jsx)(H,{ref:s}),(0,n.jsx)(H,{ref:c}),(0,n.jsx)(H,{ref:d}),(0,n.jsx)(H,{ref:u}),(0,n.jsx)(S.o,{ratio:1,children:(0,n.jsxs)(l.k,{ref:i,position:"relative",borderRadius:"full",shadow:"lg",children:[(0,n.jsx)(l.k,{pos:"absolute",borderRadius:"full",bg:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)",inset:0,zIndex:1}),(0,n.jsx)(l.k,{pos:"absolute",inset:0,bg:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",transform:"rotateZ(270deg)",borderRadius:"full"})]})})]})}),D={vibe:"mono",primaryColor:"#75d8ff",css:{}},N=e=>{let{value:t,updateValue:r,isDark:y}=e,{vibe:A,primaryColor:S}={...D,...t},[I,E]=(0,C.useState)(k()(S)),{colors:R,gradient:P}=(0,C.useMemo)(()=>T(A,I),[A,I]),O=(0,C.useCallback)(e=>{let{gradient:t}=T(A,e);r({vibe:A,primaryColor:e.toHexString(),css:t})},[A,r]),H=(0,_.Z_)(O,100),N=(0,C.useCallback)(e=>{E(e),H(e)},[H]);return(0,n.jsxs)(i.U,{spacing:4,alignItems:"stretch",wrap:"wrap",children:[(0,n.jsx)(a.xu,{flex:"1",minW:"120px",children:(0,n.jsx)(M,{vibe:U[A],color:I,updateColor:N,colors:R})}),(0,n.jsxs)(o.K,{flex:"2",spacing:4,minW:"180px",children:[(0,n.jsx)(l.k,{backgroundColor:y?"black":"white",...P,opacity:1,flex:"1",borderRadius:"md",shadow:"md",minH:"80px",mt:2}),(0,n.jsxs)(i.U,{children:[(0,n.jsxs)(s.v,{children:[(0,n.jsx)(c.j,{w:"100%",as:d.z,size:"sm",variant:"plain",textAlign:"left",rightIcon:(0,n.jsx)(x.G,{icon:f.ptq}),children:U[A].name}),(0,n.jsx)(u.q,{minWidth:"240px",zIndex:"dropdown",children:(0,n.jsx)(p._,{onChange:e=>{let{gradient:t}=T(e,I);r({vibe:e,primaryColor:I.toHexString(),css:t})},value:A,title:j.ag._({id:"1CalO6"}),type:"radio",children:Object.entries(U).map(e=>{let[t,{name:r}]=e;return(0,n.jsx)(m.i,{value:t,children:r},t)})})})]}),(0,n.jsx)(g.h,{size:"sm",variant:"plain",children:(0,n.jsx)(b.kH,{placement:"top",label:(0,n.jsx)(v.cC,{id:"OVjfHO"}),children:(0,n.jsx)(h.h,{icon:(0,n.jsx)(x.G,{icon:f.RJo}),"aria-label":j.ag._({id:"OVjfHO"}),onClick:()=>{N(k().fromRatio({h:w()(0,360),s:1,l:w()(.5,.8)}))}})})})]})]})]})}},59568:function(e,t,r){r.d(t,{q:function(){return a},u:function(){return i}});var n=r(2784);let i=(0,n.createContext)({});function a(){let e=(0,n.useContext)(i);return{...e}}},29560:function(e,t,r){r.d(t,{B:function(){return l},T:function(){return o}});var n=r(2784),i=r(91994),a=r(47968);let o=()=>{let e=(0,i.bh)();if(!e){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(e));return}e.dispatch((0,a.AK)({isEditingMedia:!0}))},l=()=>{let e=(0,i.qr)();return(0,n.useCallback)(t=>{e.dispatch((0,a.AK)({isEditingMedia:t}))},[e])}},57574:function(e,t,r){r.d(t,{Y:function(){return i},o:function(){return n}});let n="+++",i="/continue"},52332:function(e,t,r){r.d(t,{Ay:function(){return x},E0:function(){return m},HD:function(){return g},I7:function(){return f},K9:function(){return p},Nn:function(){return h}});var n=r(72338),i=r(1842),a=r.n(i),o=r(27191),l=r(91994),s=r(47968),c=r(90604),d=r(91073),u=r(93814);let p=n.hj.create({name:"cardCollapse",addKeyboardShortcuts:()=>({Escape:e=>{let{editor:t}=e,r=(0,l.bh)(),i=(0,s.gh)(r.getState());if(i!==c.q.DOC_VIEW)return!1;let{selection:a}=t.state;if(!a.empty)return!1;let o=(0,n.Kk)(d.KH)(a);return!!o&&o.depth>u.k_&&!g(o.node)&&(h(o.node.attrs.id,!0),!0)}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("cardCollapse"),appendTransaction:(e,t,r)=>{if(r.selection.eq(t.selection)||!r.selection.empty)return;let i=(0,n.Kk)(d.KH)(r.selection);if(!i)return;let{node:a,pos:l}=i,s=g(a);if(s)try{let{tr:e}=r,t=o.qv.create(e.doc,l);if(!t)return;return e.setSelection(t)}catch(e){console.error("Error moving selection out of collapsed card",{node:a,pos:l},e)}}})]}),m=(e,t)=>{let r=[],n=[];e.descendants((e,t,i)=>{if(!(0,d.KH)(e))return;let{id:a}=e.attrs,o=i&&"document"===i.type.name;o?r.push(a):n.push(a)}),t((0,s.rH)({cardIds:r,isCollapsed:!1})),t((0,s.rH)({cardIds:n,isCollapsed:!0}))},g=e=>{let t="string"==typeof e?e:e.attrs.id;if(!t)return;let r=(0,l.bh)().getState();return(0,s.yH)(t)(r)},h=(e,t)=>{if(a()(e)){console.error("[setCardCollapsed] Input is unexpectedly not string | string[]: ",e);return}let r=Array.isArray(e)?e:[e],n=(0,l.bh)();(1!==r.length||(0,s.yH)(r[0])(n.getState())!==t)&&n.dispatch((0,s.rH)({cardIds:r,isCollapsed:t}))},f=e=>{let t=[];e.state.doc.descendants(e=>{if(!(0,d.KH)(e))return;let{id:r}=e.attrs;t.push(r)}),h(t,!1)},x=e=>{let t=(0,l.bh)(),r=t.getState();void 0===r.TipTap.memoState.expandedCards[e]&&t.dispatch((0,s.rH)({cardIds:[e],isCollapsed:!1}))}},15468:function(e,t,r){r.d(t,{$U:function(){return u},Ap:function(){return w},BA:function(){return b},Fi:function(){return j},Hh:function(){return s},Ux:function(){return x},Vc:function(){return l},eZ:function(){return c},gF:function(){return p},jS:function(){return d},pt:function(){return v},q9:function(){return y},wz:function(){return m}});var n=r(13793),i=r(11093),a=r(96255),o=r(48751);let l=e=>["left","right"].includes(e),s=e=>{let{layout:t,parentCards:r,isMobileDevice:n}=e;return n&&l(t)?"mobileStacked":l(t)&&c(r)?"blank":t},c=e=>e.some(e=>l(e.attrs.layout)),d=e=>{let t=u(e),r={};return Object.entries(t.items).forEach(e=>{var t;let[n,i]=e,a=null!==(t=null==i?void 0:i.style)&&void 0!==t?t:{gridArea:n};r['> [data-layout-item-id="'.concat(n,'"]')]=a}),r},u=e=>o.q[null!=e?e:"blank"]||o.q.blank,p=e=>{let t={},r=e.pos,n=e.nodeAfter;return n?n.descendants((e,n)=>{if(!(0,a.pv)(e))return!1;t[e.attrs.itemId]={node:e,pos:r+1+n}}):console.error("[getCardLayoutItems] could not find card node at pos ".concat(r)),t},m=(e,t)=>p(e.doc.resolve(t)),g=(e,t,r)=>{let n=e.doc.resolve(t.pos+1),i=n.blockRange(e.doc.resolve(n.end()));i&&e.wrap(i,[{type:r.nodes.cardLayoutItem}]).setMeta("annotationEvent",{type:"wrap-nodes",start:i.start,end:i.end,level:1})},h=(e,t,r,n)=>{let i=r.nodes.cardLayoutItem.createAndFill({itemId:"body",...n});e.insert(t+1,i)},f=(e,t,r,i)=>{let a=r.nodes.cardAccentLayoutItem.createAndFill({itemId:"accent",background:{type:n.E.NONE},...i});e.insert(t+1,a)},x=(e,t,r,n)=>{let i=e.doc.nodeAt(t),a=m(e,t);if(0===Object.keys(a).length){g(e,{node:i,pos:t},r),n.items.accent&&f(e,t,r);return}n.items.body&&!a.body&&h(e,t,r),n.items.accent&&!a.accent?f(e,t,r):a.accent&&"cardLayoutItem"===a.accent.node.type.name&&b(e,a.accent.pos,a.accent.node,r)},b=(e,t,r,n)=>{e.replaceRangeWith(t,t+r.nodeSize,n.nodes.cardAccentLayoutItem.createAndFill({...r.attrs}))},v=e=>"cardAccentLayoutItem"===e.type.name&&"accent"===e.attrs.itemId,j=e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId,y=(e,t)=>{if(!t)return 0;let r=t.findIndex(t=>t.accentId===e.accentId);return -1===r||void 0===r?0:(r+1)%t.length},w=e=>{let t=(0,i.sS)(e,v)[0];if(!t)return;let r=t.node.attrs;return r.background}},74684:function(e,t,r){r.d(t,{AQ:function(){return f},J9:function(){return h},NE:function(){return w},YS:function(){return v},jz:function(){return j},pE:function(){return x}});var n=r(72338),i=r(27191),a=r(91994),o=r(24781),l=r(35759),s=r(47968),c=r(11093),d=r(60742),u=r(90604),p=r(52332),m=r(93814),g=r(96255);let h=(e,t,r)=>{let i=e=>{let t=(0,g.KH)(e),n="boolean"!=typeof r||(0,p.HD)(e)===r;return t&&n},a=e.state.doc.nodeAt(t),o=e.state.doc.resolve(t);return a&&i(a)?{node:a,pos:t,start:o.start,depth:o.depth}:(0,n.qv)(e.state.doc.resolve(t),i)},f=(e,t)=>{try{let r=(e,t)=>(0,g.KH)(e)&&t===m.k_,n=e.resolve(t),i=e.nodeAt(t);if(i&&r(i,n.depth+1))return{node:i,pos:t};return(0,c.Ci)(n,r)}catch(e){console.error("[findTopCardNodeParent] error",e);return}},x=e=>{let{pos:t,editor:r}=e,n=(0,c.nv)(r.state.doc.resolve(t),g.KH),i=n.map(e=>e.node.attrs.id);(0,p.Nn)(i,!1)},b=async e=>{let{cardId:t,pos:r,editor:n,cardEl:a,isNested:s=!1,origin:c="editor"}=e;if(!a){console.error("[scrollToCard] no cardEl specified");return}(0,p.Nn)(t,!1),x({pos:r,editor:n}),await (0,o.cC)("editor").scrollElementIntoView({element:a,delay:s?m.nY:0}),n.commands.command(e=>{let{tr:t}=e;return t.setSelection(i.Y1.near(n.state.doc.resolve(r))).setMeta(l.C,c),!0})},v=e=>{let{cardId:t,editor:r}=e;if(!t)return;let n=(0,a.bh)(),i=(0,s.gh)(n.getState());if(i===u.q.SLIDE_VIEW){r.commands.spotlightCardById(t);return}let o=document.querySelector('[data-card-id="'.concat(t,'"]'));if(!o)return;let{pos:l}=(0,g.Bw)(r,t)||{};if(!l)return;let c=r.state.doc.resolve(l),d=c.depth>m.k_;b({cardId:t,pos:l,editor:r,cardEl:o,isNested:d})},j=(e,t,r)=>{let n;let i=t.target;if(i.closest(".".concat(m.ar))&&!i.closest("[data-outside-card-body]")||r&&!y(r,e.state.schema))return null;let a=i.closest(".".concat(m.vD));if(!a)return{pos:e.state.doc.content.size-1};let o=a.querySelector(".".concat(m.ar)),l=null==o?void 0:o.getBoundingClientRect();if(!l)return null;let{doc:s}=e.state;try{let t=e.posAtDOM(a,0);if(-1===t)return null;let r=(0,c.nv)(s.resolve(t),g.KH);if(0===r.length)return null;n=r[r.length-1]}catch(e){return console.error("(caught) [checkBetweenCardsDropTarget] error finding parent node:",e),null}let{node:u,pos:p}=n;if(!p||!u)return null;let[h]=(0,d.qs)(o),f=h+l.top,x=h+l.bottom,b=h+t.clientY;return b<f?{pos:p}:b>x?{pos:p+u.nodeSize}:null},y=(e,t)=>t.nodes.card.validContent(e.content),w=(e,t)=>{let r=(0,c.sS)(e,e=>"cardLayoutItem"===e.type.name);return r.length>0?{node:r[0].node,pos:t+r[0].pos+1}:{node:e,pos:t}}},56253:function(e,t,r){r.d(t,{Bk:function(){return s},DB:function(){return c},HQ:function(){return u},Rs:function(){return d},r1:function(){return l}});var n=r(6238),i=r.n(n),a=r(90439),o=r(93814);let l=95,s=120,c=.5*l,d=function(e,t,r){var n;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null!==(n=e.config.fontSize)&&void 0!==n?n:1,c=(r?s:l)*(.5/a),d=i*o.GG,u=t?1.5:3.75;return{baseFontSize:a*(t?1:1.125),contentWidthEms:c,themeFontSize:a,innerPaddingX:u,cardWidthEms:c+2*u+2*d,commentPadding:u+d}},u=i()(e=>{let{isPresentMode:t,isNested:r,nestedDepth:n,isFullBleed:i,displayFullBleed:a,isWideContent:o,isThumbnail:l,theme:s,cardDimensions:c,showPresentBackdrop:u,attrs:f,userZoomLevel:x,isMobileDevice:b}=e,v="none"!==f.background.type&&!r,j=a||r?"0em":b?"".concat(.5,"em"):"".concat(2,"em"),y="calc(var(--card-outer-padding-x) + ".concat(i||r?"0px":"var(--doc-padding-left, 0px)"," + ").concat(t?"var(--present-padding-left, 0px)":"0px",")"),w="calc(var(--card-outer-padding-x) + ".concat(i||r?"0px":"var(--doc-padding-right, 0px)"," + ").concat(t?"var(--present-padding-right, 0px)":"0px",")"),C=a||r?"0em":b?"".concat(.5,"em"):!v||t||l?"".concat(2,"em"):"8em",{baseFontSize:A,contentWidthEms:k,cardWidthEms:_,innerPaddingX:S,commentPadding:I}=d(s,b,o,n),E=t||l?c.aspectRatio?h:g:b?m:p,U=E({userZoomLevel:x,baseFontSize:A,contentWidthEms:k,cardWidthEms:_,cardAspectRatio:c.aspectRatio,showPresentBackdrop:u,isNested:r,isFullBleed:i,isThumbnail:l});return{"--card-inner-padding-x":"".concat(S,"em"),"--card-inner-padding":"var(--card-inner-padding-y) var(--card-inner-padding-x)","--card-outer-padding-left":y,"--card-outer-padding-right":w,"--card-outer-padding-x":j,"--card-outer-padding-y":C,"--comment-padding":"".concat(I,"em"),"--nested-card-margin":"calc(-1 * var(--comment-padding))","--card-vertical-align":c.defaultVerticalAlign,"--top-accent-height":"12.5em","--behind-accent-height":"24em",...U}}),p=e=>{let{baseFontSize:t,contentWidthEms:r,cardWidthEms:n,cardAspectRatio:i,isFullBleed:a}=e;return{"--font-size":"calc(".concat(t," * var(--editor-font-size, 1rem))"),"--card-inner-padding-y":"".concat(2.75+(a?2:0),"em"),"--card-width":"".concat(n,"em"),"--card-min-height":i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(i,")"):void 0,"--max-content-width":"".concat(r,"em")}},m=e=>{let{cardWidthEms:t,baseFontSize:r,isNested:n,cardAspectRatio:i,isFullBleed:a}=e;return{"--card-inner-padding-y":"".concat(n?2.25:1.5+(a?1:0),"em"),"--font-size":"".concat(r,"rem"),"--card-width":"".concat(t,"em"),"--card-min-height":i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(i,")"):void 0,"--top-accent-height":"6em","--behind-accent-height":"12em"}},g=e=>{let{userZoomLevel:t,contentWidthEms:r,cardWidthEms:n,showPresentBackdrop:i,isFullBleed:o,baseFontSize:l,isNested:s,isThumbnail:c}=e,d=a.Pv?"".concat(l*t,"rem"):"calc(".concat(t," * clamp(").concat(c?"0rem":"1rem",", var(--card-max-width) / ").concat(n,", 2.7vh))"),u=!i||o;return{"--card-inner-padding-y":"".concat(2.75,"em"),"--font-size":d,"--card-width":u?"var(--editor-width)":"".concat(n,"em"),"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-min-height":c?"var(--thumbnail-min-height, 0px)":u&&!s?"100vh":"0vh","--max-content-width":"".concat(r,"em")}},h=e=>{let{cardAspectRatio:t,userZoomLevel:r,cardWidthEms:n,isThumbnail:i}=e,o=a.Pv?"calc(var(--card-max-width) / ".concat(t,")"):"calc(100vh - 2 * var(--card-outer-padding-y))",l="calc(".concat(r," * min(var(--card-max-width), calc(var(--card-max-height) * ").concat(t,")))"),s="calc(var(--card-width) / ".concat(t,")"),c=a.Pv||i?"0px":"15px",d="calc((var(--card-width) - ".concat(c,") / ").concat(n,")");return{"--card-inner-padding-y":"".concat(2.75,"em"),"--card-width":l,"--font-size":d,"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-max-height":o,"--card-min-height":s}}},65396:function(e,t,r){r.d(t,{F:function(){return n}});let n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[].slice.call(e.querySelectorAll(t),0);return r&&n.reverse(),n}},65282:function(e,t,r){r.d(t,{e:function(){return a},v:function(){return i}});var n=r(44368);let i=e=>{var t;if(null==e?void 0:null===(t=e.parentElement)||void 0===t?void 0:t.matches("ol, ul"))return e.parentElement;let r=[e],a=e;for(;(a=a.nextElementSibling)&&"LI"===a.tagName;){let t=parseInt(a.getAttribute("indent")||"0")-parseInt(e.getAttribute("indent")||"0");if(t<0)break;if(0==t){if(a.getAttribute("variant")!=e.getAttribute("variant"))break;r.push(a)}else a=i(a),r.push(a)}let o=e.getAttribute("variant")==n.W.Numbered?document.createElement("ol"):document.createElement("ul");return e.replaceWith(o),r.forEach(e=>{e.removeAttribute("variant"),e.removeAttribute("indent")}),o.append(...r),o},a=e=>{var t,r;let i;let a=e,o=0,l="false";for(e.innerHTML.startsWith("[ ]")?(i=n.W.Todo,l="false",e.innerHTML.startsWith("[ ]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)):e.innerHTML.startsWith("[x]")&&(i=n.W.Todo,l="true",e.innerHTML.startsWith("[x]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)),"checkbox"===e.getAttribute("role")&&(i=n.W.Todo,l=e.getAttribute("aria-checked")||"false"),("todo"===e.getAttribute("variant")||e.getAttribute("checked"))&&(i=n.W.Todo,l=e.getAttribute("checked")||"false");a=null===(t=e.parentElement)||void 0===t?void 0:t.closest("li, ul, ol");){if(a.matches("ul, ol")){o++;let e=a.className.match(/lst-kix_\w+-(\d+)/);e&&(o=parseInt(e[1])+1),i||"OL"!=a.tagName?i||"UL"!=a.tagName||(i=n.W.Bullet):i=n.W.Numbered}a.after(e)}e.setAttribute("indent",Math.max(o-1,0).toString()),e.setAttribute("variant",i||n.W.Bullet),i==n.W.Todo&&e.setAttribute("checked",l),1===e.children.length&&(null===(r=e.firstElementChild)||void 0===r?void 0:r.tagName)==="P"&&(e.innerHTML=e.firstElementChild.innerHTML)}},396:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(65396),i=r(65282);let a=e=>((0,n.F)(e,"li").forEach(e=>{(0,i.v)(e)}),e)},20182:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(26151),i=r(11093),a=r(26282),o=r(15468),l=r(96255);let s=(e,t)=>!!c(e),c=e=>{let t=e.parent&&(0,l.KH)(e.parent);if(!t)return!0;let r=(0,i.nv)(e,l.KH)[0];if(!r)return!0;let n=e.doc.resolve(r.pos),a=(0,o.gF)(n);return 0===Object.keys(a).length},d=(e,t,r)=>{var o;let l=e.posAtCoords({left:t.clientX,top:t.clientY});if(!l||l.inside<0)return null;let c=e.state.doc.resolve(l.pos);if(!c)return null;let d=l.pos,u=e.state.doc.resolve(l.inside),p=e.state.doc.nodeAt(l.inside),m=e.state.doc.nodeAt(l.pos);if((null==p?void 0:p.type.name)==="smartLayout"&&(null==m?void 0:m.type.name)==="smartLayoutCell")return null;let g=(0,i.Ru)(u,a.E)[0];if(g&&(d=l.inside,g.pos===d)||!d||r&&null==(d=(0,n.nj)(e.state.doc,d,r)))return null;let h=s(e.state.doc.resolve(d),null===(o=e.dragging)||void 0===o?void 0:o.slice);return h?d:null}},26282:function(e,t,r){r.d(t,{E:function(){return n},G:function(){return i}});let n=e=>"smartLayoutCell"===e.type.name,i=e=>"smartLayout"===e.type.name},44368:function(e,t,r){var n,i;r.d(t,{W:function(){return n},y:function(){return a}}),(i=n||(n={})).Todo="todo",i.Bullet="bullet",i.Numbered="numbered";let a=e=>["todo","bullet","numbered"].includes(e.type.name)},31866:function(e,t,r){r.d(t,{A:function(){return i},b:function(){return a}});var n=r(2784);let i=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,i]=(0,n.useState)(0),[a,o]=(0,n.useState)(0),[l,s]=(0,n.useState)(null),c=(0,n.useCallback)(()=>{var r,n;let a=null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();if(a&&l){let e=l.width/l.height,t=a.width,r=a.width/e;if(0===t||isNaN(t)||0===r||isNaN(r))return;i(t),o(r),s(e)}},[]);return{width:r,height:a,aspectRatio:l,setSize:c,containerWrapperRef:e,imageRef:t}},a=e=>{let t=(0,n.useCallback)(t=>{if(!e)return;let r=null==e?void 0:e.view.domAtPos(t);if(!r){console.warn("scrollOnImageLoad could not domAtPos",{pos:t});return}let n=r.node.childNodes[r.offset];if(!n){console.warn("scrollOnImageLoad could not find node",{parentNode:r.node,offset:r.offset});return}let i=n.querySelector("[data-image-node-element] img");if(!i){console.warn("scrollOnImageLoad could not find <img> element");return}let a=()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run(),setTimeout(()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run()},1e3),i.removeEventListener("load",a)};i.addEventListener("load",a)},[e]);return t}},28553:function(e,t,r){r.d(t,{s7:function(){return R},k3:function(){return P},HI:function(){return U},W6:function(){return T}});var n=r(52322),i=r(16556),a=r(81540),o=r(38035),l=r(17993),s=r(28535),c=r(29117),d=r(82655),u=r(42946),p=r(49929),m=r(5879),g=r(2784),h=r(91994),f=r(29318),x=r(38769),b=r(29560),v=r(73235),j=r(28165),y=r(42822),w=r(77533);function C(){let e=(0,v._)(["\n      from {transform: rotate(-5deg) scale(1)}\n        to {transform: rotate(5deg) scale(1.2)}\n  "]);return C=function(){return e},e}let A=e=>{let{provider:t,color:r="gray"}=e,i=(0,j.F4)(C()),o="aiGenerated"===t?u.ddb:u.Y$T;return(0,n.jsxs)(y.M,{className:"image-loading-spinner",children:[(0,n.jsx)(a.$,{color:"".concat(r,".300"),thickness:"3px",size:"xl",position:"absolute",speed:"0.7s",emptyColor:"transparent"}),(0,n.jsx)(w.x,{color:"".concat(r,".400"),position:"absolute",lineHeight:"2",fontSize:"lg",animation:"".concat(i," infinite alternate 700ms ease-out"),children:(0,n.jsx)(p.G,{icon:o,fixedWidth:!0})})]})};var k=r(47968),_=r(2333),S=r(78820),I=r(24813),E=r(19850);let U=()=>(0,n.jsx)(i.Vp,{size:"sm",variant:"subtle",colorScheme:"gray",pos:"absolute",top:4,left:4,p:1,children:(0,n.jsx)(a.$,{color:"gray.600",size:"xs"})}),R=()=>(0,n.jsx)(i.Vp,{size:"sm",variant:"subtle",colorScheme:"red",pos:"absolute",top:4,left:4,children:(0,n.jsxs)(i.Sn,{children:[(0,n.jsx)(p.G,{icon:u.RLE})," ",(0,n.jsx)(m.cC,{id:"rmh/nq"})]})}),P=(0,g.memo)(e=>{let{children:t,icon:r=d.VmB,isLoading:i=!1,isUploading:a=!1,hasUploadError:u=!1,isAccentImageDrawer:m=!1,loadingProvider:v,openEditBackgroundDrawer:j,onSelectAndFocus:y,defaultSource:w,hideQuickActions:C=!1,...P}=e,T=(0,h.TL)(),[O,H]=(0,g.useState)(!1),M=(0,b.B)(),D=(0,h.CG)(k.hN),N=(0,f.Yy)();return(0,g.useEffect)(()=>{w&&!1===(0,I.FD)(w)?H(!1):C||!D?H(!1):H(!0)},[w,C,D]),(0,n.jsxs)(o.k,{"data-testid":"media-placeholder","data-test-media-source":w,color:N?S.Z.DARK_COLOR:S.Z.LIGHT_COLOR,align:"center",justify:"center",p:3,bg:N?S.Z.DARK_BG:S.Z.LIGHT_BG,className:"placeholder","data-drag-handle":!0,"data-export-as-image":!0,position:"relative",cursor:"default",sx:{containerType:"size","@container (width < 150px) or (height < 140px)":{".quick-actions":{display:"none"},".ai-image-loading-spinner":{transform:"scale(0.5)"}}},onClick:()=>{D&&y&&y()},onDoubleClick:()=>{D&&(y&&y(),m?(T((0,_.G9)()),null==j||j()):(T((0,x.W7)()),M(!0)))},transition:"background-color 0.2s",...P,children:[!i&&(0,n.jsxs)(l.g,{pointerEvents:"none",children:[(0,n.jsx)(s.xu,{color:N?S.Z.DARK_ICON_COLOR:S.Z.LIGHT_ICON_COLOR,sx:{"@container (0px <= width <= 32px)":{fontSize:"sm"},"@container (32px < width <= 80px)":{fontSize:"2xl"},fontSize:"4xl"},children:(0,n.jsx)(p.G,{icon:r,fixedWidth:!0})}),O&&(0,n.jsx)(c.U,{pointerEvents:"auto",className:"quick-actions",children:(0,n.jsx)(E.N,{onSelectImage:y,isAccentImageDrawer:m,openEditBackgroundDrawer:j})})]}),i&&(0,n.jsx)(A,{provider:v}),a&&(0,n.jsx)(U,{}),u&&(0,n.jsx)(R,{}),t]})});P.displayName="MediaPlaceholderImage";let T={minW:16,minH:16,bg:"gray.200"}},19850:function(e,t,r){r.d(t,{N:function(){return v}});var n=r(52322),i=r(28535),a=r(38035),o=r(32899),l=r(54933),s=r(49929),c=r(94523),d=r(5879),u=r(87254),p=r(2784),m=r(99787),g=r(29318),h=r(29560),f=r(66028),x=r(78820),b=r(82533);let v=e=>{let{onSelectImage:t,isAccentImageDrawer:r=!1,openEditBackgroundDrawer:o,...s}=e,{setMediaDrawerSourceKeyAction:c,setBackgroundDrawerSourceKeyAction:p}=(0,b.j)(),g=[{id:"image.custom",label:(0,n.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),c(m.in.key,!0),setTimeout(()=>(0,h.T)(),0)}},{id:"image.web",label:(0,n.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),c(m.QT.key,!0),setTimeout(()=>(0,h.T)(),0)}},{id:"image.ai-generated",label:(0,n.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),c(m.NX.key,!0),setTimeout(()=>(0,h.T)(),0)}}],x=[{id:"image.custom",label:(0,n.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),p(m.in.key),setTimeout(()=>null==o?void 0:o(),0)}},{id:"image.web",label:(0,n.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),p(m.QT.key),setTimeout(()=>null==o?void 0:o(),0)}},{id:"image.ai-generated",label:(0,n.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),p(m.NX.key),setTimeout(()=>null==o?void 0:o(),0)}}];return(0,n.jsx)(i.xu,{pos:"relative",zIndex:100,...s,children:(0,n.jsx)(a.k,{marginBottom:"-8px",onClick:f.UW,children:(r?x:g).map((e,t)=>(0,n.jsx)(j,{...e},t))})})},j=(0,p.memo)(e=>{let{label:t,ariaLabel:r,icon:i,id:a,onClick:l}=e,d=(0,g.Yy)();return(0,n.jsx)(c.kH,{label:t,placement:"top",closeOnClick:!0,children:(0,n.jsx)(o.h,{icon:(0,n.jsx)(s.G,{icon:i,size:"1x"}),"aria-label":r,"data-testid":"quick-action","data-test-media-source":a,variant:"ghost",rounded:"md",onMouseDown:l,width:"32px",height:"32px",color:d?x.Z.DARK_ICON_COLOR:x.Z.LIGHT_ICON_COLOR,display:"flex",alignItems:"center",justifyContent:"center",p:1,cursor:"pointer",_hover:"image.ai-generated"===a?d?{color:x.Z.DARK_AI_BTN_HOVER_COLOR,bg:x.Z.DARK_AI_BTN_HOVER_BG}:{color:x.Z.LIGHT_AI_BTN_HOVER_COLOR,bg:x.Z.LIGHT_AI_BTN_HOVER_BG}:d?{color:x.Z.DARK_BTN_HOVER_COLOR,bg:x.Z.DARK_BTN_HOVER_BG}:{color:x.Z.LIGHT_BTN_HOVER_COLOR,bg:x.Z.LIGHT_BTN_HOVER_BG},animation:"fadeIn",transition:"color 0.2s, background-color 0.2s"})})});j.displayName="QuickActionButton"},82533:function(e,t,r){r.d(t,{j:function(){return s},q:function(){return l}});var n=r(2784),i=r(91994),a=r(38769),o=r(2333);let l=(e,t)=>{let r=(0,n.useCallback)(()=>{e.chain().focus().selectNodeAtPos(t(),!1).run(),setTimeout(()=>{e.view.focus()})},[e,t]);return r},s=()=>{let e=(0,i.TL)(),t=(0,i.CG)(a.RF),r=(0,i.CG)(a.Fk),l=(0,i.CG)(o.TB),s=(0,n.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e((0,a.c9)({sourceKey:t,overrideDefault:r}))},[e]),c=(0,n.useCallback)(t=>{e((0,o.df)({sourceKey:t}))},[e]);return{currentMediaDrawerSourceKey:t,isQuickAction:r,setMediaDrawerSourceKeyAction:s,currentEditBackgroundDrawerSourceKey:l,setBackgroundDrawerSourceKeyAction:c}}},24813:function(e,t,r){r.d(t,{FD:function(){return a},jn:function(){return n.j},qs:function(){return n.q}}),r(19850);var n=r(82533);let i=["image.custom","image.web","image.ai-generated","accent.theme"],a=e=>i.includes(e)},78820:function(e,t,r){r.d(t,{Z:function(){return n}});let n={LIGHT_BG:"gray.200",LIGHT_COLOR:"gray.300",LIGHT_ICON_COLOR:"gray.400",LIGHT_BTN_HOVER_BG:"gray.100",LIGHT_BTN_HOVER_COLOR:"gray.500",LIGHT_AI_BTN_HOVER_BG:"trueblue.100",LIGHT_AI_BTN_HOVER_COLOR:"trueblue.300",DARK_BG:"gray.800",DARK_COLOR:"gray.600",DARK_ICON_COLOR:"gray.600",DARK_BTN_HOVER_BG:"gray.700",DARK_BTN_HOVER_COLOR:"gray.400",DARK_AI_BTN_HOVER_BG:"trueblue.800",DARK_AI_BTN_HOVER_COLOR:"trueblue.300",LIGHT_GALLERY_BG:"gray.100",DARK_GALLERY_BG:"gray.900"}},54653:function(e,t,r){r.d(t,{R:function(){return c}});var n=r(72338),i=r(16494),a=r(87205),o=r(66855),l=r(15636),s=r(59366);let c=n.hj.create({name:"mediaUpload",addCommands(){return{cancelImageUploadsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.editor.isEditable)return!1;let a=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.uploadStatus===i.D.Uploading)});return a.forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null,uploadStatus:i.D.Error});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},uploadDataUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.storage.orgId||!this.editor.isEditable)return!1;let i=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("data:")});return i.forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let n=(0,a.v9)(r.src),i=URL.createObjectURL(n),o=(0,s.j6)(e.node,(0,s.BF)(i));t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,i,n)}),!0},initializeUploadExtension:e=>t=>{let{chain:r}=t;return this.storage.orgId=e,r().cancelImageUploadsOnLoad().uploadDataUrlsOnLoad().revokeAllImageTempURLs().run(),!0},revokeAllImageTempURLs:()=>e=>{let{tr:t,state:r}=e,a=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.tempUrl&&t.src&&t.uploadStatus===i.D.Done)});return a.forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},revokeImageTempURLs:e=>t=>{let{tr:r,state:i}=t,a=(0,n.N2)(i.doc,t=>{let r=(0,s.XU)(t);return!!r&&r.tempUrl===e});return a.forEach(e=>{let t=(0,s.j6)(e.node,{tempUrl:null});r.setNodeMarkup(e.pos,null,t).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),URL.revokeObjectURL(e),!0},updateImageOnUploadFailure:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{let{tr:n,state:a}=r,o=a.doc.nodeAt(e);if(!o||!o.attrs)return!1;let l=(0,s.XU)(o),c=t?{...l,uploadStatus:i.D.Done}:(0,s.gM)({isError:!0}),d=(0,s.j6)(o,c);return n.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}},updateImageOnUploadSuccess:(e,t)=>r=>{let{tr:n,state:i}=r,a=i.doc.nodeAt(e);if(!a||!a.attrs)return!1;let l=(0,s.gM)({isError:!1,result:t}),c=(0,o.UZ)(l),d=(0,s.j6)(a,c);return n.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}}},addStorage:()=>({orgId:void 0,completedUploads:{}}),addProseMirrorPlugins(){return[(0,l.SZ)(this.editor)]}})},97253:function(e,t,r){r.d(t,{B0:function(){return i.B0},Ns:function(){return i.Ns},QZ:function(){return i.QZ},R:function(){return n.R},XU:function(){return i.XU},f8:function(){return i.f8},gM:function(){return i.gM},j6:function(){return i.j6}});var n=r(54653),i=r(59366)},32581:function(e,t,r){r.d(t,{j:function(){return u},x:function(){return p}});var n=r(37164),i=r(99787),a=r(16494),o=r(13793),l=r(38322),s=r(81345),c=r(87205),d=r(59366);let u=(e,t,r,l)=>{var s;let u;let p={type:o.E.IMAGE,source:i.in.key,image:{uploadStatus:a.D.Uploading,source:i.in.key}};(0,c.Ns)(r.type)?(p.image.showPlaceholder=!0,u="HEIC_tempId_".concat((0,n.x0)())):u=URL.createObjectURL(r),p.image.tempUrl=u;let m=(t,r)=>{if(!u&&!r)return;let n=u||r;(0,d.Ns)(e,n,t)};t.setNodeAttribute(l,"background",p).setMeta("imageUploadUpdateAttrs",!0),(0,i.cT)(r,null===(s=e.storage.mediaUpload)||void 0===s?void 0:s.orgId,{onOriginalFileUpload:m,onUploadComplete:m,onUploadFailed:t=>{(0,d.f8)(e,u,t),URL.revokeObjectURL(u)}})},p=function(e,t,r){let n=t.map(t=>(0,c.fU)(t.type)?m(t,e):(0,s.kO)(t.type,(0,s.mD)(t))?g(t,e):null).filter(e=>null!==e);if(0==n.length)return;let i=n.map(e=>e.content),a=e.state.doc.resolve(r),o=a.parent.inlineContent,d=r;o&&0===a.parentOffset?d=r-1:o&&null===a.nodeAfter&&(d=r+1),e.chain().insertContentAt(d,i,{updateSelection:!1}).command(e=>{var t;let{tr:r}=e,n=r.doc.resolve(r.mapping.map(d)),i=(0,l.t)(r.doc.resolve(n.pos-((null===(t=n.nodeBefore)||void 0===t?void 0:t.nodeSize)||1)));return i&&r.setSelection(i),!0}).run(),n.forEach(e=>{e.upload()}),setTimeout(()=>{e.commands.scrollIntoView()},200)},m=(e,t)=>{let r={uploadStatus:a.D.Uploading,source:i.in.key};(0,c.Ns)(e.type)?(r.showPlaceholder=!0,r.tempUrl="HEIC_tempId_".concat((0,n.x0)())):r.tempUrl=URL.createObjectURL(e);let o=(e,n)=>{let i=r.tempUrl;if(!i&&!n)return;let a=i||n;(0,d.Ns)(t,a,e)},l={onOriginalFileUpload:o,onUploadComplete:o,onUploadFailed:e=>{r.tempUrl&&((0,d.f8)(t,r.tempUrl,e),URL.revokeObjectURL(r.tempUrl))}};return{name:e.name,content:{type:"image",attrs:r},upload:()=>{var r;return(0,i.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,l)}}},g=(e,t)=>{let r=URL.createObjectURL(e),n={...(0,d.B0)(e),url:r},a=(e,n)=>{if(!r&&!n)return;let i=r||n;(0,d.QZ)(t,i,e)},o={onOriginalFileUpload:a,onUploadComplete:a};return{name:e.name,content:{type:"embed",attrs:n},upload:()=>{var r;return(0,i.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,o,"node","doc")}}}},15636:function(e,t,r){r.d(t,{SZ:function(){return m},RC:function(){return x},bC:function(){return g},Sm:function(){return u}});var n=r(27191),i=r(99787),a=r(81345),o=r(87205),l=r(20182),s=r(32581);let c=e=>RegExp("^\\s*<svg.*<\\/svg>\\s*$","s").test(e);var d=r(59366);let u=(e,t,r)=>{let n=(r,n)=>{(0,d.Ns)(e,n||t,r)},a={onOriginalFileUpload:n,onUploadComplete:n,onUploadFailed:r=>{(0,d.f8)(e,t,r)}};r?(0,i.cT)(r,e.storage.mediaUpload.orgId,a):(0,i.WY)(t,e.storage.mediaUpload.orgId,a)},p=e=>(0,o.fU)(e.type)||(0,a.kO)(e.type,(0,a.mD)(e)),m=e=>new n.Sy({props:{transformPasted:t=>(t.content.descendants(t=>{if("image"===t.type.name&&t.attrs.tempUrl){let r=e.storage.mediaUpload,n=r.completedUploads[t.attrs.tempUrl];n&&Object.assign(t.attrs,(0,d.j6)(t,(0,d.gM)({isError:!1,result:n})))}else if("image"===t.type.name&&t.attrs.src&&!(0,o.S6)(t.attrs.src)){let r,n=t.attrs.src,i=n.startsWith("data:");i&&(r=(0,o.v9)(t.attrs.src),n=URL.createObjectURL(r)),Object.assign(t.attrs,(0,d.BF)(n)),u(e,n,r)}}),t),handlePaste:(t,r,n)=>f(e,t,r,n),handleDOMEvents:{drop:(t,r)=>h(e,t,r)}}}),g=(e,t)=>{var r;if(!e.clipboardData)return null;let n=e.clipboardData.getData("text/html"),i=e.clipboardData.getData("text/plain");if(i&&!n&&c(i))return[(0,o.K$)(i)];let a=Array.prototype.slice.call(e.clipboardData.items);return a.some(e=>"text/html"===e.type)&&(t.content.childCount>1||(null===(r=t.content.firstChild)||void 0===r?void 0:r.type.name)!=="image")?null:a.map(e=>e.getAsFile()).filter(e=>!!e).filter(p)},h=(e,t,r)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let n=x(r).filter(p);if(0===n.length)return!1;let i=(0,l.Z)(t,r);return!!i&&(r.preventDefault(),(0,s.x)(e,n,i),!0)},f=(e,t,r,n)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let i=g(r,n);if(!i||0===i.length)return!1;let{selection:a}=t.state,o=a.from;return a.empty||e.commands.deleteSelection(),(0,s.x)(e,i,o),!0};function x(e){let t=[],r=e.target;if(e.dataTransfer){let r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else r&&r.files&&(t=r.files);return Array.prototype.slice.call(t)}},59366:function(e,t,r){r.d(t,{B0:function(){return w},BF:function(){return m},Ns:function(){return b},QZ:function(){return y},XU:function(){return h},f8:function(){return v},gM:function(){return p},j6:function(){return g}});var n=r(72338),i=r(72579),a=r.n(i),o=r(98537),l=r.n(o),s=r(16765),c=r.n(s),d=r(16494),u=r(81345);let p=e=>{let{result:t,isError:r}=e;if(r)return{uploadStatus:d.D.Error,showPlaceholder:!0,tempUrl:null,src:null};let{fullResults:n,...i}=t;return{uploadStatus:d.D.Done,showPlaceholder:!1,...i}},m=e=>({tempUrl:e,uploadStatus:d.D.Uploading,src:null,source:"image.custom"}),g=(e,t)=>{let r=e.type.spec.imageKeyPath,n=r?c()({},r,t):t,i=l()({},e.attrs,n);return i},h=e=>{let t=e.type.spec.imageKeyPath;return t||"image"===e.type.name?t?a()(e.attrs,t,e.attrs):e.attrs:null},f=(e,t)=>(0,n.N2)(e.state.doc,e=>{let r=h(e);return[null==r?void 0:r.tempUrl,null==r?void 0:r.src].includes(t)}),x=(e,t)=>(0,n.N2)(e.state.doc,e=>"embed"===e.type.name&&e.attrs.url===t),b=(e,t,r)=>{e.parentEditor&&(e=e.parentEditor),t&&j(e,r,t);let n=f(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>{let{pos:n}=t;e.commands.updateImageOnUploadSuccess(n,r)}),setTimeout(()=>{e.commands.revokeImageTempURLs(t)},3e4)},v=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.parentEditor&&(e=e.parentEditor);let i=f(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>e.commands.updateImageOnUploadFailure(t.pos,n)),console.error(r)},j=(e,t,r)=>{let n=e.storage.mediaUpload;n.completedUploads[r]=t},y=(e,t,r)=>{let n=x(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>{e.commands.updateAttributesAtPos(t.pos,{url:r.src,sourceUrl:r.src,embed:{url:r.src},thumbnail:{src:r.thumbnail,uploadStatus:d.D.Done,showPlaceholder:!1}})})},w=e=>({meta:{title:e.name,description:(0,u.td)(e.size,1)},thumbnail:{uploadStatus:d.D.Uploading,showPlaceholder:!0},source:"embed.pdf"})},5626:function(e,t,r){r.d(t,{SV:function(){return a},gS:function(){return o},lt:function(){return i},m4:function(){return l}});var n=r(56253);let i=30,a=16,o=n.DB*a,l=.6},66855:function(e,t,r){r.d(t,{Bp:function(){return l},NW:function(){return c},UZ:function(){return p},fP:function(){return a},iJ:function(){return s},k7:function(){return d},vb:function(){return o},zd:function(){return u}});var n=r(5626);let i=["image","video","embed","mediaPlaceholder"],a=e=>o(e.type),o=e=>i.includes(e.name),l=e=>"video"===e.type.name||"embed"===e.type.name,s=e=>e.href||e.sourceUrl||e.url||e.embedUrl||void 0,c=e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.url)?e.embed.url:"embedUrl"in e?e.embedUrl:s(e)},d=e=>{var t,r;let n=e.attrs;return[null===(t=n.meta)||void 0===t?void 0:t.title,null===(r=n.meta)||void 0===r?void 0:r.site].filter(Boolean).join(" - ")},u=e=>{var t,r;return null!==(r=null==e?void 0:null===(t=e.split(".").pop())||void 0===t?void 0:t.startsWith("svg"))&&void 0!==r&&r},p=e=>{let{width:t,height:r,resize:i}=e.meta||{};if(!t||!r||(null==i?void 0:i.isAuto)===!1)return e;let a=n.gS,o=window.innerHeight*n.m4;return r/t*a>o?{...e,resize:{width:Math.min(a,o*(t/r)),clipType:null,clipPath:null,clipAspectRatio:null,isAuto:!0}}:e}},38322:function(e,t,r){r.d(t,{G:function(){return o},t:function(){return function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{doc:a}=t,o=r<0;if(!t.nodeAfter)return null;if(t.nodeAfter.inlineContent)return i.Y1.near(a.resolve(t.pos+(o?t.nodeAfter.content.size+1:0)),r);let l=(0,n.N2)(t.nodeAfter,e=>e.inlineContent||i.qv.isSelectable(e));if(!l||0===l.length)return i.qv.create(a,t.pos);let s=t.start(t.depth+1)+(o?l[l.length-1].pos:l[0].pos);return e(a.resolve(s),r)}}});var n=r(72338),i=r(27191),a=r(26151);let o=(e,t)=>{var r;let n;let i=e.doc,o=e.steps.length-1,l=e.steps[o];if(!l||!(l instanceof a.Pu||l instanceof a.FC)||0===l.slice.content.size)return null;let s=t||(null===(r=l.slice.content.child(l.slice.openStart))||void 0===r?void 0:r.type.name),c=e.mapping.maps[o];if(c.forEach((e,t,r)=>{null==n&&(n=r)}),null==n)return null;let d=i.nodeAt(n);if(d&&d.type.name===s)return i.resolve(n);if(!s)return console.warn("[getInsertedNodePos] Error selecting node, type not found in slice.lastChild",n),null;for(let t=l.from;t<e.mapping.map(l.to);t++){let r=e.doc.nodeAt(t);if(r&&r.type.name===s)return i.resolve(t)}return null}},16656:function(e,t,r){r.d(t,{rJ:function(){return ep},kC:function(){return ef}});var n=r(35483),i=r(52322),a=r(38035),o=r(79729),l=r(28165),s=r(2784),c=r(36651),d=r(29117),u=r(43679),p=r(34071),m=r(39429),g=r(75768),h=r(82655),f=r(87254);let x=s.createContext({});function b(){let e=s.useContext(x);return e}var v=r(28535),j=r(32899),y=r(17993),w=r(97166),C=r(20437),A=r(62614),k=r(5879),_={src:"/_next/static/media/transparent-background.ccc186e7.png"};let S={[n.HQ.White]:"#f0f1f3",[n.HQ.Gray]:"#788492",[n.HQ.Green]:"#36b24d",[n.HQ.Blue]:"#1c7ed6",[n.HQ.Violet]:"#7746f1",[n.HQ.Red]:"#ff2133",[n.HQ.Orange]:"#ff9433",[n.HQ.Yellow]:"#ffc936"},I=e=>e.appState.currentStyle,E=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,U=e=>e.settings.isDarkMode?"dark":"light",R=e=>{let{style:t,colorMode:r}=e;return(0,i.jsx)(v.xu,{backgroundColor:t.isFilled?n.tk.fills[r][t.color]:void 0,backgroundImage:t.isFilled?void 0:_.src,backgroundSize:"4em",borderColor:n.tk.strokes[r][t.color],borderWidth:"2px",h:"1em",w:"1em",borderRadius:"md"})},P=Object.keys(n.tk.defaultTextStyle),T=(e,t)=>{let{page:r}=e,n={};if(t.length<=0)return{};{let e=new Set([]);t.map(e=>r.shapes[e]).forEach(t=>{P.forEach(r=>{if(!e.has(r)){if(void 0===n[r])n[r]=t.style[r];else{if(n[r]===t.style[r])return;e.add(r)}}})}),e.forEach(e=>{delete n[e]})}return n},O=()=>{let e=b(),t=e.useStore(U),r=e.useStore(I),a=e.useStore(E),o=T(e,a),l={...r,...o};return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(R,{style:l,colorMode:t}),variant:"ghost",size:"sm","aria-label":""})}),(0,i.jsx)(m.y,{w:"fit-content",bg:"#F9FAFBFA",p:4,children:(0,i.jsxs)(y.g,{spacing:2,align:"flex-start",children:[(0,i.jsx)(w.l,{children:(0,i.jsx)(k.cC,{id:"TuM2Yu"})}),(0,i.jsx)(C.M,{columns:2,spacing:2,children:[!0,!1].map(r=>(0,i.jsx)(A.z,{leftIcon:(0,i.jsx)(R,{style:{...l,isFilled:r},colorMode:t}),variant:"ghost",size:"sm",isActive:l.isFilled===r,onClick:()=>e.style({isFilled:r}),children:r?(0,i.jsx)(k.cC,{id:"5bi1la"}):(0,i.jsx)(k.cC,{id:"dD7NPy"})},r?"fill":"outline"))}),(0,i.jsx)(w.l,{children:(0,i.jsx)(k.cC,{id:"1HfW/F"})}),(0,i.jsx)(C.M,{columns:4,spacing:2,w:"100%",children:Object.entries(n.HQ).map(r=>{let[n,a]=r;return S[a]?(0,i.jsx)(j.h,{icon:(0,i.jsx)(R,{style:{...l,color:a},colorMode:t}),variant:"ghost",size:"md","aria-label":n,isActive:l.color===a,onClick:()=>e.style({color:a})},a):null})})]})})]})};var H=r(68023),M=r(49929),D=r(94523);let N=(0,H.G)((e,t)=>{let{label:r,icon:n,tooltipPlacement:a="top",...o}=e;return(0,i.jsx)(D.kH,{placement:a,label:r,isDisabled:!r,children:(0,i.jsx)(j.h,{"aria-label":r||"",ref:t,size:"sm",variant:"",icon:(0,i.jsx)(M.G,{icon:n}),color:"trueblue.600",textShadow:"0px 1px 0px rgba(0,0,0,0)",fontWeight:"500",borderRadius:"md",borderWidth:"1px",backdropFilter:"blur(20px)",borderColor:"transparent",_hover:{bg:"gray.100",borderColor:"gray.200"},_focus:{bg:"gray.100",borderColor:"gray.200"},_active:{bg:"trueblue.100",borderColor:"trueblue.200"},...o})})}),L=e=>{let{children:t,...r}=e;return(0,i.jsx)(a.k,{bg:"#F9FAFBDD",p:1,borderWidth:"1px",borderColor:"whiteAlpha.600",borderRadius:"xl",shadow:"xl",...r,children:t})},z={[n.HE.Start]:h.elf,[n.HE.Middle]:h.MB3,[n.HE.End]:h.S3c},G=()=>{let e=b(),t=e.useStore(I),r=e.useStore(E),a=T(e,r),o={...t,...a};return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(N,{icon:z[o.textAlign||n.HE.Start]})}),(0,i.jsx)(m.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsx)(L,{direction:"column",children:(0,i.jsxs)(g.h,{children:[(0,i.jsx)(N,{icon:h.elf,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.style({textAlign:n.HE.Start}),isActive:o.textAlign===n.HE.Start},"align-left"),(0,i.jsx)(N,{icon:h.MB3,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.style({textAlign:n.HE.Middle}),isActive:o.textAlign===n.HE.Middle},"align-center"),(0,i.jsx)(N,{icon:h.S3c,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.style({textAlign:n.HE.End}),isActive:o.textAlign===n.HE.End},"align-right"),(0,i.jsx)(N,{icon:h.z1q,label:f.ag._({id:"18P2qJ"}),onClick:()=>e.style({textAlign:n.HE.Justify}),isActive:o.textAlign===n.HE.Justify},"justify")]})})})]})},B=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children),F=e=>"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0,W=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,q=e=>{let t=e.appState.currentPageId,r=e.document.pages[t];for(let n of e.document.pageStates[t].selectedIds)if("text"in r.shapes[n])return!0;return!1},V=s.memo(function(){let e=b(),{isGammaOrgUser:t}=(0,c.SE)(),r=e.useStore(F),o=e.useStore(B),l=e.useStore(W),s=e.useStore(q);return(0,i.jsx)(a.k,{w:"100%",direction:"row",position:"absolute",bottom:2,align:"flex-end",justify:"center",zIndex:1,children:(0,i.jsx)(L,{children:(0,i.jsxs)(d.U,{spacing:2,children:[t&&(0,i.jsx)(N,{icon:h.ISu,label:f.ag._({id:"SpTWH3"}),onClick:()=>e.exportImage(n.Uz.SVG,{scale:1,quality:1})},"download"),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N,{icon:h.XAH,label:f.ag._({id:"/Wgayn"}),onClick:()=>e.delete(),"data-testid":"drawing-edit-toolbar-delete"},"delete"),(0,i.jsx)(Q,{}),l>=2&&(0,i.jsx)(K,{}),l>=2||o?(0,i.jsx)(N,{icon:h.tU8,label:o?"Ungroup selection":"Group selection",onClick:()=>o?e.ungroup():e.group(),isActive:o},"group"):null]}),(0,i.jsx)(O,{}),s&&(0,i.jsx)(G,{})]})})})}),Q=()=>{let e=b();return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(N,{icon:h.y3T})}),(0,i.jsx)(m.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsxs)(L,{direction:"row",children:[(0,i.jsx)(N,{icon:h.XQV,label:f.ag._({id:"J6qWQV"}),onClick:()=>e.moveToFront()},"front"),(0,i.jsx)(N,{icon:h.y3T,label:f.ag._({id:"9xFjqz"}),onClick:()=>e.moveForward()},"forward"),(0,i.jsx)(N,{icon:h.QZW,label:f.ag._({id:"OfSb1W"}),onClick:()=>e.moveBackward()},"backward"),(0,i.jsx)(N,{icon:h.H5Z,label:f.ag._({id:"/zBSYY"}),onClick:()=>e.moveToBack()},"back")]})})]})},K=()=>{let e=b();return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(N,{icon:h.I6v})}),(0,i.jsx)(m.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsxs)(L,{direction:"column",children:[(0,i.jsxs)(g.h,{children:[(0,i.jsx)(N,{icon:h.I6v,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.align(n.MR.Left)},"align-left"),(0,i.jsx)(N,{icon:h.liD,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.align(n.MR.CenterHorizontal)},"align-center"),(0,i.jsx)(N,{icon:h.xfv,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.align(n.MR.Right)},"align-right"),(0,i.jsx)(N,{icon:h.ZC_,label:f.ag._({id:"8lqfXb"}),onClick:()=>e.distribute(n.XR.Horizontal)},"distribute-h")]}),(0,i.jsxs)(g.h,{children:[(0,i.jsx)(N,{icon:h.JhG,label:f.ag._({id:"/Q0jUh"}),onClick:()=>e.align(n.MR.Top)},"align-top"),(0,i.jsx)(N,{icon:h.UiH,label:f.ag._({id:"QhuQN2"}),onClick:()=>e.align(n.MR.CenterVertical)},"align-middle"),(0,i.jsx)(N,{icon:h.iXx,label:f.ag._({id:"EPnxoe"}),onClick:()=>e.align(n.MR.Bottom)},"align-bottom"),(0,i.jsx)(N,{icon:h.edW,label:f.ag._({id:"a1NrWf"}),onClick:()=>e.distribute(n.XR.Vertical)},"distribute-v")]})]})})]})};var X=r(74008),Y=r(54933);let Z=()=>[{icon:Y.qaO,label:f.ag._({id:"rG3WVm"}),tool:"select"},{icon:h.xf2,label:f.ag._({id:"Ajc4TJ"}),tool:"erase"},{icon:Y.ZC5,label:f.ag._({id:"rjuFFw"}),tool:n.Uc.Line},{icon:Y.nUK,label:f.ag._({id:"zFkhx3"}),tool:n.Uc.Arrow},{icon:Y.lCX,label:f.ag._({id:"30KLDI"}),tool:n.Uc.Rectangle},{icon:Y.diR,label:f.ag._({id:"7xMmki"}),tool:n.Uc.Ellipse},{icon:Y.BwA,label:f.ag._({id:"ucHvJP"}),tool:n.Uc.Triangle},{icon:Y.K5C,label:f.ag._({id:"xeiujy"}),tool:n.Uc.Text}],J=e=>e.appState.activeTool,$=s.memo(function(){let e=b(),t=e.useStore(J);return(0,i.jsx)(a.k,{h:"100%",direction:"column",position:"absolute",right:2,align:"flex-end",justify:"center",zIndex:1,children:(0,i.jsx)(L,{children:(0,i.jsx)(y.g,{spacing:2,children:Z().map(r=>{let{label:n,icon:a,tool:o}=r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N,{icon:a,label:n,onClick:()=>e.selectTool(o),isActive:t===o,tooltipPlacement:"left","data-testid":"drawing-insert-toolbar-".concat(o)},n),"select"==o&&(0,i.jsx)(X.i,{},"selectDivider")]})})})})})});var ee=r(10625),et=r(67046),er=r(99058),en=r(25481);let ei=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,ea=e=>e.settings.showGrid,eo=s.memo(function(){let e=b(),t=e.useStore(ea);return(0,i.jsx)(a.k,{position:"absolute",top:2,left:2,zIndex:1,children:(0,i.jsx)(L,{children:(0,i.jsxs)(d.U,{spacing:2,children:[(0,i.jsx)(el,{}),(0,i.jsx)(N,{icon:Y.fnF,label:t?f.ag._({id:"IsBZFj"}):f.ag._({id:"mWgfWA"}),isActive:t,onClick:()=>e.setSetting("showGrid",!t)},"grid")]})})})}),el=s.memo(function(){let e=b(),t=e.useStore(ei);return(0,i.jsxs)(ee.v,{children:[(0,i.jsxs)(et.j,{as:A.z,"data-test-id":"zoom-menu-button",size:"sm",colorScheme:"trueblue",variant:"ghost",leftIcon:(0,i.jsx)(M.G,{icon:h.Y$T}),children:[Math.round(100*t),"%"]}),(0,i.jsxs)(er.q,{children:[(0,i.jsx)(en.s,{command:"#+",onClick:e.zoomIn,children:(0,i.jsx)(k.cC,{id:"AWOSPo"})}),(0,i.jsx)(en.s,{command:"#-",onClick:e.zoomOut,children:(0,i.jsx)(k.cC,{id:"FjkaiT"})}),(0,i.jsx)(en.s,{command:"⇧0",onClick:e.resetZoom,children:(0,i.jsx)(k.cC,{id:"41NrIs"})}),(0,i.jsx)(en.s,{command:"⇧1",onClick:e.zoomToFit,"data-test-id":"zoom-to-fit-button",children:(0,i.jsx)(k.cC,{id:"pLI1Is"})})]})]})});var es=r(99787);let ec=e=>{let t=(0,s.useCallback)(async(t,r,i)=>{if(!e)return console.warn("[useAssetUpload] OrgId is required to upload assets"),!1;let a=URL.createObjectURL(r);console.debug("[useAssetUpload] Handling upload for file",{file:r,id:i,tempUrl:a});let o=e=>{let r=t.assets.find(e=>e.id===i);if(r){console.debug("[useAssetUpload] Upload complete. Replacing temp asset",{id:i,src:e.src});let n={document:{assets:{[i]:{...r,src:e.src}}}};t.patchState(n,"upload"),t.persist(n,"upload")}};return(0,es.cT)(r,e,{onOriginalFileUpload:o,onUploadComplete:o}),t.patchState({document:{assets:{[i]:{id:i,type:n.LO.Image,fileName:r.name,src:a}}}}),a},[e]),r=(0,s.useCallback)(async(e,t)=>!0,[]);return{onAssetCreate:t,onAssetDelete:r}};var ed=r(10668);let eu={dash:n.g6.Solid,isFilled:!0,color:n.HQ.White},ep=e=>{let{isDark:t,font:r,...d}=e,{currentWorkspace:u}=(0,c.SE)(),[p,m]=(0,s.useState)(),[g,h]=(0,s.useState)(!1),f=(0,s.useCallback)(e=>{m(e),e.style(eu,[]),h(!0)},[]),{onAssetCreate:b,onAssetDelete:v}=ec(null==u?void 0:u.id);(0,s.useEffect)(()=>{p&&void 0!==t&&p.setSetting("isDarkMode",t)},[p,t]);let j=(0,s.useMemo)(()=>(0,ed.c)(t),[t]),y=(0,s.useMemo)(()=>(0,ed.m)(r),[r]);return(0,i.jsxs)(a.k,{sx:{".tl-canvas":{"div, text, textarea":{...y},...j,'g[cursor="grab"][aria-label="link handle"]':{display:"none"}}},onDrop:()=>{},onPaste:()=>{},position:"relative",h:"100%",w:"100%",className:"highlight-mask",children:[(0,i.jsx)(l.xB,{styles:{"#__textLabelMeasure, #__textMeasure":{...y}}}),(0,i.jsxs)(x.Provider,{value:p||{},children:[(0,i.jsx)(n.Dr,{onAssetCreate:b,onAssetDelete:v,...d,onMount:(0,o.v0)(d.onMount,f)}),g&&!d.readOnly&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{}),(0,i.jsx)($,{})]}),g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eo,{})})]})]})};var em=r(75054),eg=r(51987);let eh=e=>em.cQ.getCommonBounds(e.map(n.D9.getRotatedBounds)),ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,{shapes:r,pageState:{camera:i},rendererBounds:a}=e;if(0===r.length)return;let o=eh(r);if(!o)return;let l=n.D9.getCameraZoom(Math.min((a.width-t)/o.width,(a.height-t)/o.height)),s=(a.width-o.width*l)/2/l,c=(a.height-o.height*l)/2/l;e.setCamera(eg.B.toFixed(eg.B.sub([s,c],[o.minX,o.minY])),l,"zoomed_to_fit")}},10668:function(e,t,r){r.d(t,{c:function(){return o},m:function(){return a}});var n=r(35483);let i=e=>"".concat(e," !important"),a=e=>({fontFamily:i(e)}),o=e=>{let t={"[data-shape=image]":{".tl-inner-div":{}},img:{'&[src^="blob:"]':{animation:"loading-pulse-animation 1.5s infinite"}}},r=Object.values(n.HQ),a=e?"dark":"light";return r.forEach(e=>{t['[data-color="'.concat(e,'"]')]={color:i(n.tk.strokes[a][e]),":not(mask) > [fill], &[fill]":{"&:not([fill=none])":{fill:i(n.tk.fills[a][e]),"text, tspan":{fill:i(n.tk.strokes[a][e])}}},"[stroke]":{"&:not([stroke=none])":{stroke:i(n.tk.strokes[a][e])}}}}),t}},75320:function(e,t,r){r.d(t,{h:function(){return c}});var n=r(30733),i=r.n(n),a=r(2784);class o{observe(e,t){this.observer?(this.observer.observe(e),this.observedElements.set(e,t)):t(s)}unobserve(e){this.observer&&(this.observer.unobserve(e),this.observedElements.delete(e),this.nextTickCallbacks.delete(e))}handleResize(e){let t=!1;for(let r of e){let e=this.observedElements.get(r.target);e&&(t=!0,this.nextTickCallbacks.set(r.target,()=>{e(r.contentRect)}))}t&&this.queueProcess()}queueProcess(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.frameId=requestAnimationFrame(()=>{for(let e of this.nextTickCallbacks.values())e();this.frameId=null})}constructor(){this.observedElements=new Map,this.nextTickCallbacks=new Map,this.frameId=null,this.observer=null,"undefined"!=typeof ResizeObserver&&(this.observer=new ResizeObserver(e=>this.handleResize(e)))}}let l=i()(()=>new o),s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function c(e){let t=(0,a.useRef)(null),[{width:r,height:n},i]=(0,a.useState)(s);return(0,a.useEffect)(()=>{let e=t.current;return e&&l().observe(e,i),()=>{e&&l().unobserve(e)}},[e]),{ref:t,width:r,height:n}}},81345:function(e,t,r){r.d(t,{O7:function(){return o},S9:function(){return s},kO:function(){return l},mD:function(){return d},td:function(){return c}});var n=r(13326),i=r(56974),a=r.n(i);function o(e){return e===n.Z.pdf}function l(e,t){var r,i;return o(e)||(r=e)===n.Z.doc||r===n.Z.docx||"ppt"===(i=(i=t).toLocaleLowerCase())||"pptx"===i}function s(e){return"otf"===(e=e.toLocaleLowerCase())||"ttf"===e}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";let r=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(r))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n])},d=e=>e.name&&a()(e.name.split("."))||""},78597:function(e,t,r){r.d(t,{OI:function(){return a},uO:function(){return n}});let n=(e,t)=>{let r=0;return new Promise((n,i)=>{let a=()=>{let o=setTimeout(()=>{++r<t.maxRetries?a():i("timed out")},t.timeout);e().then(n).catch(i).finally(()=>{clearTimeout(o)})};a()})},i=e=>new Promise((t,r)=>{setTimeout(()=>{r(Error("timed out"))},e)}),a=(e,t)=>Promise.race([i(t),e])}}]);
//# sourceMappingURL=6656-f0e4ca732da9b0f2.js.map